<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>修復 Service Worker</title></head>
<body style="font-family:system-ui;padding:20px;background:#111;color:#fff">
<h2>清除 Service Worker</h2>
<pre id="log" style="white-space:pre-wrap;background:#222;padding:16px;border-radius:8px;font-size:14px"></pre>
<script>
const log = document.getElementById('log');
function msg(t){ log.textContent += t + '\n'; }
(async()=>{
  msg('開始清除...');
  if('serviceWorker' in navigator){
    const regs = await navigator.serviceWorker.getRegistrations();
    msg('找到 ' + regs.length + ' 個 Service Worker');
    for(const r of regs){
      msg('移除: ' + r.scope);
      await r.unregister();
    }
  } else { msg('此瀏覽器不支援 Service Worker'); }
  const names = await caches.keys();
  msg('找到 ' + names.length + ' 個 Cache');
  for(const n of names){
    msg('刪除 cache: ' + n);
    await caches.delete(n);
  }
  msg('\n✅ 全部清除完成！你可以返回其他 app 試下。');
})();
</script>
</body>
</html>
