<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>ç‡Ÿé¤Šè³‡æ–™åº«</title>

  <!-- PWA Meta Tags -->
  <meta name="application-name" content="ç‡Ÿé¤Šè³‡æ–™åº«">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="ç‡Ÿé¤Šè³‡æ–™åº«">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#166534">
  <meta name="description" content="å€‹äººç‡Ÿé¤Šè³‡æ–™åº« - è¨˜éŒ„å’Œç®¡ç†é£Ÿç‰©ç‡Ÿé¤Šè³‡è¨Š">

  <!-- PWA Icons - PNG files -->
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="512x512" href="icon-512.png">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">

  <!-- Web App Manifest -->
  <link rel="manifest" href="manifest.json">

  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+HK:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    :root {
      --bg-primary: #f0f2f5;
      --bg-secondary: #ffffff;
      --bg-card: #ffffff;
      --text-primary: #1a1a2e;
      --text-secondary: #6b7280;
      --text-muted: #9ca3af;
      --accent: #22c55e;
      --accent-dark: #16a34a;
      --header-gradient: linear-gradient(135deg, #166534 0%, #15803d 50%, #22c55e 100%);
      --divider: rgba(0, 0, 0, 0.06);
      --card-shadow: 0 2px 8px rgba(0,0,0,0.06);
      --pill-bg: #e5e7eb;
      --pill-active: #22c55e;
      --search-bg: rgba(255,255,255,0.15);
      --cal-color: #a855f7;
      --protein-color: #eab308;
      --fat-color: #f97316;
      --carbs-color: #06b6d4;
      --sodium-color: #ec4899;
      --calcium-color: #22c55e;
    }

    .dark {
      --bg-primary: #0f0f1a;
      --bg-secondary: #1a1a2e;
      --bg-card: #252542;
      --text-primary: #ffffff;
      --text-secondary: #9ca3af;
      --text-muted: #6b7280;
      --divider: rgba(255, 255, 255, 0.08);
      --card-shadow: 0 4px 12px rgba(0,0,0,0.3);
      --pill-bg: #374151;
      --search-bg: rgba(255,255,255,0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      height: 100%;
    }

    body {
      font-family: 'Noto Sans HK', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100%;
      min-height: 100dvh;
      overflow-x: hidden;
      /* iOS safe area support */
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }

    /* Standalone mode adjustments */
    @media all and (display-mode: standalone) {
      body {
        padding-top: env(safe-area-inset-top);
      }
      .header {
        padding-top: calc(16px + env(safe-area-inset-top));
      }
      .fab {
        bottom: calc(30px + env(safe-area-inset-bottom));
      }
      .modal {
        padding-bottom: env(safe-area-inset-bottom);
      }
    }

    /* Header */
    .header {
      background: var(--header-gradient);
      padding: 16px 20px 20px;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .header-icon {
      width: 44px;
      height: 44px;
      background: rgba(255,255,255,0.2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .header-icon i {
      font-size: 22px;
      color: white;
    }

    .header-title-group {
      display: flex;
      flex-direction: column;
    }

    .header-title {
      font-size: 20px;
      font-weight: 700;
      color: white;
    }

    .header-subtitle {
      font-size: 12px;
      color: rgba(255,255,255,0.8);
      font-weight: 400;
    }

    .header-actions {
      display: flex;
      gap: 8px;
    }

    .header-btn {
      width: 40px;
      height: 40px;
      background: rgba(255,255,255,0.2);
      border: none;
      border-radius: 10px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.2s;
    }

    .header-btn:hover {
      background: rgba(255,255,255,0.3);
    }

    .search-bar {
      display: flex;
      align-items: center;
      background: var(--search-bg);
      border-radius: 12px;
      padding: 12px 16px;
      gap: 10px;
      backdrop-filter: blur(10px);
    }

    .search-bar i {
      color: rgba(255,255,255,0.7);
      font-size: 16px;
    }

    .search-bar input {
      flex: 1;
      border: none;
      background: transparent;
      font-size: 16px;
      color: white;
      outline: none;
      font-family: inherit;
    }

    .search-bar input::placeholder {
      color: rgba(255,255,255,0.6);
    }

    /* Main Content */
    .main-content {
      padding: 16px;
      padding-bottom: 100px;
    }

    /* Category Pills */
    .category-pills {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      padding: 4px 0 20px 0;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    .category-pills::-webkit-scrollbar {
      display: none;
    }

    .category-pill {
      flex-shrink: 0;
      padding: 10px 18px;
      border-radius: 25px;
      background: var(--pill-bg);
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 500;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .category-pill.active {
      background: var(--pill-active);
      color: white;
    }

    .category-pill:hover {
      transform: scale(1.02);
    }

    .category-pill .emoji {
      font-size: 16px;
    }

    /* Food Cards */
    .food-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .food-card {
      background: var(--bg-card);
      border-radius: 20px;
      padding: 20px;
      box-shadow: var(--card-shadow);
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .food-card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 12px;
    }

    .food-name {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .food-meta {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .food-category-tag {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      background: rgba(234, 179, 8, 0.15);
      color: #ca8a04;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
    }

    .dark .food-category-tag {
      background: rgba(234, 179, 8, 0.2);
      color: #fbbf24;
    }

    .food-serving-tag {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      color: var(--text-secondary);
      font-size: 13px;
    }

    .food-serving-tag i {
      font-size: 11px;
    }

    .food-card-actions {
      display: flex;
      gap: 8px;
    }

    .action-icon-btn {
      width: 36px;
      height: 36px;
      border: none;
      background: transparent;
      color: var(--text-muted);
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .action-icon-btn:hover {
      background: var(--bg-primary);
      color: var(--text-secondary);
    }

    .action-icon-btn.delete:hover {
      color: #ef4444;
    }

    /* Nutrition Grid */
    .nutrition-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 16px;
      cursor: pointer;
      transition: transform 0.15s ease;
    }

    .nutrition-grid:active {
      transform: scale(0.98);
    }

    .nutrition-mode-tag {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      color: var(--text-secondary);
      font-size: 13px;
      background: rgba(34, 197, 94, 0.15);
      padding: 4px 10px;
      border-radius: 12px;
      transition: all 0.2s;
    }

    .dark .nutrition-mode-tag {
      background: rgba(34, 197, 94, 0.2);
    }

    .nutrition-mode-tag i {
      font-size: 11px;
      color: var(--accent);
    }

    .nutrition-mode-tag.per100g {
      background: rgba(168, 85, 247, 0.15);
    }

    .dark .nutrition-mode-tag.per100g {
      background: rgba(168, 85, 247, 0.2);
    }

    .nutrition-mode-tag.per100g i {
      color: var(--cal-color);
    }

    .nutrition-mode-tag.perserving {
      background: rgba(59, 130, 246, 0.15);
    }

    .dark .nutrition-mode-tag.perserving {
      background: rgba(59, 130, 246, 0.2);
    }

    .nutrition-mode-tag.perserving i {
      color: #3b82f6;
    }

    .nutrition-box {
      background: var(--bg-primary);
      border-radius: 12px;
      padding: 12px 16px;
      min-width: 70px;
      text-align: center;
    }

    .nutrition-value {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 2px;
    }

    .nutrition-label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }

    .nutrition-box.cal .nutrition-value { color: var(--cal-color); }
    .nutrition-box.protein .nutrition-value { color: var(--protein-color); }
    .nutrition-box.fat .nutrition-value { color: var(--fat-color); }
    .nutrition-box.carbs .nutrition-value { color: var(--carbs-color); }
    .nutrition-box.sodium .nutrition-value { color: var(--sodium-color); }
    .nutrition-box.calcium .nutrition-value { color: var(--calcium-color); }

    /* Food Footer */
    .food-footer {
      margin-top: 16px;
      padding-top: 12px;
      border-top: 1px solid var(--divider);
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--text-muted);
      font-size: 12px;
    }

    .food-footer i {
      font-size: 14px;
    }

    /* FAB */
    .fab {
      position: fixed;
      bottom: 30px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      border: none;
      box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 26px;
      z-index: 99;
      transition: all 0.2s ease;
    }

    .fab:hover {
      transform: scale(1.08);
      box-shadow: 0 8px 25px rgba(34, 197, 94, 0.5);
    }

    .fab:active {
      transform: scale(0.95);
    }

    /* Modal */
    .modal-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      z-index: 200;
      animation: fadeIn 0.2s ease;
    }

    .modal-overlay.active {
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal {
      background: var(--bg-secondary);
      border-radius: 24px 24px 0 0;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      border-bottom: 1px solid var(--divider);
      position: sticky;
      top: 0;
      background: var(--bg-secondary);
      z-index: 10;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 700;
    }

    .modal-close {
      background: var(--bg-primary);
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: var(--text-secondary);
      font-size: 14px;
    }

    .modal-body {
      padding: 24px;
    }

    .form-group {
      margin-bottom: 18px;
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .form-input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid var(--divider);
      border-radius: 14px;
      font-size: 16px;
      background: var(--bg-primary);
      color: var(--text-primary);
      outline: none;
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .form-input:focus {
      border-color: var(--accent);
    }

    .form-select {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid var(--divider);
      border-radius: 14px;
      font-size: 16px;
      background: var(--bg-primary);
      color: var(--text-primary);
      outline: none;
      font-family: inherit;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239ca3af' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10l-5 5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 16px center;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .form-section-title {
      font-size: 14px;
      font-weight: 700;
      color: var(--text-primary);
      margin: 24px 0 14px 0;
      padding-bottom: 10px;
      border-bottom: 2px solid var(--divider);
    }

    .input-mode-toggle {
      display: flex;
      gap: 0;
      background: var(--bg-primary);
      border-radius: 12px;
      padding: 4px;
      margin-bottom: 16px;
    }

    .input-mode-btn {
      flex: 1;
      padding: 12px 16px;
      border: none;
      background: transparent;
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      border-radius: 10px;
      transition: all 0.2s;
      font-family: inherit;
    }

    .input-mode-btn.active {
      background: var(--accent);
      color: white;
    }

    .input-mode-btn:not(.active):hover {
      background: var(--divider);
    }

    .serving-weight-group {
      transition: opacity 0.2s, max-height 0.3s;
      overflow: hidden;
    }

    .serving-weight-group.hidden {
      opacity: 0.4;
      pointer-events: none;
    }

    /* Scan Label Button */
    .scan-label-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
      padding: 14px 16px;
      background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
      color: white;
      border: none;
      border-radius: 14px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 20px;
      transition: all 0.2s;
      font-family: inherit;
    }

    .scan-label-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
    }

    .scan-label-btn:active {
      transform: scale(0.98);
    }

    .scan-label-btn i {
      font-size: 18px;
    }

    .scan-label-btn.scanning {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      pointer-events: none;
    }

    .scan-label-btn.scanning i {
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    .scan-preview {
      display: none;
      margin-bottom: 16px;
      border-radius: 12px;
      overflow: hidden;
      position: relative;
    }

    .scan-preview.show {
      display: block;
    }

    .scan-preview img {
      width: 100%;
      max-height: 200px;
      object-fit: cover;
      display: block;
    }

    .scan-preview-remove {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 28px;
      height: 28px;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
    }

    .scan-status {
      text-align: center;
      padding: 12px;
      background: var(--bg-primary);
      border-radius: 10px;
      margin-bottom: 16px;
      font-size: 14px;
      color: var(--text-secondary);
      display: none;
    }

    .scan-status.show {
      display: block;
    }

    .scan-status.success {
      background: rgba(34, 197, 94, 0.15);
      color: var(--accent);
    }

    .scan-status.error {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
    }

    /* Cloud Sync Styles */
    .cloud-sync-section {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .cloud-sync-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .cloud-sync-title i {
      color: var(--accent);
    }

    .cloud-url-input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid var(--divider);
      border-radius: 12px;
      font-size: 14px;
      background: var(--bg-primary);
      color: var(--text-primary);
      outline: none;
      font-family: inherit;
      margin-bottom: 12px;
    }

    .cloud-url-input:focus {
      border-color: var(--accent);
    }

    .cloud-btn-row {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
    }

    .cloud-btn {
      flex: 1;
      padding: 14px 16px;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-family: inherit;
      transition: all 0.2s;
    }

    .cloud-btn.upload {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      color: white;
    }

    .cloud-btn.download {
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      color: white;
    }

    .cloud-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .cloud-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    .cloud-btn.loading i {
      animation: spin 1s linear infinite;
    }

    .cloud-status {
      text-align: center;
      padding: 10px;
      border-radius: 10px;
      font-size: 13px;
      margin-bottom: 12px;
      display: none;
    }

    .cloud-status.show {
      display: block;
    }

    .cloud-status.success {
      background: rgba(34, 197, 94, 0.15);
      color: var(--accent);
    }

    .cloud-status.error {
      background: rgba(239, 68, 68, 0.15);
      color: #ef4444;
    }

    .cloud-status.info {
      background: rgba(59, 130, 246, 0.15);
      color: #3b82f6;
    }

    .cloud-help {
      font-size: 12px;
      color: var(--text-muted);
      line-height: 1.6;
      padding: 12px;
      background: var(--bg-primary);
      border-radius: 10px;
    }

    .cloud-help a {
      color: var(--accent);
      text-decoration: none;
    }

    .cloud-help code {
      background: var(--divider);
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 11px;
    }

    .submit-btn {
      width: 100%;
      padding: 16px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 14px;
      font-size: 17px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      font-family: inherit;
      margin-top: 12px;
    }

    .submit-btn:hover {
      background: var(--accent-dark);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
    }

    .empty-state i {
      font-size: 64px;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    .empty-state h3 {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .empty-state p {
      color: var(--text-secondary);
      font-size: 15px;
    }

    /* Confirm Modal */
    .confirm-modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--bg-card);
      border-radius: 20px;
      padding: 28px;
      width: 90%;
      max-width: 340px;
      text-align: center;
      z-index: 300;
      box-shadow: 0 20px 50px rgba(0,0,0,0.3);
    }

    .confirm-modal h3 {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .confirm-modal p {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 24px;
      line-height: 1.5;
    }

    .confirm-buttons {
      display: flex;
      gap: 12px;
    }

    .confirm-btn {
      flex: 1;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
    }

    .confirm-btn.cancel {
      background: var(--bg-primary);
      color: var(--text-primary);
    }

    .confirm-btn.danger {
      background: #ef4444;
      color: white;
    }

    /* Toast */
    .toast {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-100px);
      background: var(--text-primary);
      color: var(--bg-primary);
      padding: 14px 28px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      z-index: 400;
      transition: transform 0.3s ease;
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
    }

    /* Settings Page */
    .page {
      display: none;
    }

    .page.active {
      display: block;
    }

    .settings-section {
      background: var(--bg-card);
      border-radius: 16px;
      overflow: hidden;
      margin-bottom: 20px;
    }

    .settings-header {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      padding: 16px 16px 8px 16px;
    }

    .settings-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      border-bottom: 1px solid var(--divider);
      cursor: pointer;
      transition: background 0.2s;
    }

    .settings-item:last-child {
      border-bottom: none;
    }

    .settings-item:hover {
      background: var(--bg-primary);
    }

    .settings-item-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .settings-icon {
      width: 32px;
      height: 32px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
    }

    .settings-icon.blue { background: #3b82f6; }
    .settings-icon.green { background: #22c55e; }
    .settings-icon.orange { background: #f97316; }
    .settings-icon.red { background: #ef4444; }

    .settings-label {
      font-size: 16px;
    }

    .settings-arrow {
      color: var(--text-muted);
    }

    /* Category Management */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 20px;
      text-align: center;
      box-shadow: var(--card-shadow);
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--accent);
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-secondary);
      margin-top: 4px;
    }

    .category-list {
      background: var(--bg-card);
      border-radius: 16px;
      overflow: hidden;
    }

    .category-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 16px;
      border-bottom: 1px solid var(--divider);
    }

    .category-item:last-child {
      border-bottom: none;
    }

    .category-item-name {
      font-size: 16px;
    }

    .category-item-count {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .category-delete-btn {
      background: none;
      border: none;
      color: #ef4444;
      cursor: pointer;
      padding: 8px;
      font-size: 16px;
    }

    .add-category-row {
      display: flex;
      gap: 8px;
      padding: 12px 16px;
      background: var(--bg-primary);
      border-radius: 0 0 16px 16px;
    }

    .add-category-input {
      flex: 1;
      padding: 12px 14px;
      border: 2px solid var(--divider);
      border-radius: 12px;
      font-size: 16px;
      background: var(--bg-card);
      color: var(--text-primary);
      outline: none;
      font-family: inherit;
    }

    .add-category-btn {
      padding: 12px 20px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
    }

    /* Hidden file input */
    .hidden-input {
      display: none;
    }

    /* Dropdown menu */
    .dropdown-menu {
      display: none;
      position: absolute;
      top: 100%;
      right: 0;
      background: var(--bg-card);
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      min-width: 180px;
      z-index: 150;
      overflow: hidden;
      margin-top: 8px;
    }

    .dropdown-menu.show {
      display: block;
    }

    .dropdown-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      color: var(--text-primary);
      font-size: 15px;
      cursor: pointer;
      transition: background 0.2s;
      border: none;
      background: none;
      width: 100%;
      text-align: left;
      font-family: inherit;
    }

    .dropdown-item:hover {
      background: var(--bg-primary);
    }

    .dropdown-item i {
      width: 20px;
      color: var(--text-secondary);
    }

    .dropdown-item.danger {
      color: #ef4444;
    }

    .dropdown-item.danger i {
      color: #ef4444;
    }

    .header-menu-container {
      position: relative;
    }
  </style>
</head>
<body>
  <!-- Toast -->
  <div class="toast" id="toast"></div>

  <!-- Header -->
  <header class="header">
    <div class="header-top">
      <div class="header-left">
        <div class="header-icon">
          <i class="fas fa-seedling"></i>
        </div>
        <div class="header-title-group">
          <div class="header-title">ç‡Ÿé¤Šè³‡æ–™åº«</div>
          <div class="header-subtitle">Nutrition Database</div>
        </div>
      </div>
      <div class="header-actions">
        <button class="header-btn" onclick="exportData()" title="åŒ¯å‡ºè³‡æ–™">
          <i class="fas fa-share-alt"></i>
        </button>
        <div class="header-menu-container">
          <button class="header-btn" onclick="toggleMenu()" title="æ›´å¤šé¸é …">
            <i class="fas fa-bars"></i>
          </button>
          <div class="dropdown-menu" id="dropdownMenu">
            <button class="dropdown-item" onclick="showAIImport()">
              <i class="fas fa-robot"></i>
              <span>AIæ‰¹é‡åŒ¯å…¥</span>
            </button>
            <button class="dropdown-item" onclick="showCategoryManager()">
              <i class="fas fa-folder"></i>
              <span>åˆ†é¡ç®¡ç†</span>
            </button>
            <button class="dropdown-item" onclick="showCloudSettings()">
              <i class="fas fa-cloud"></i>
              <span>é›²ç«¯åŒæ­¥è¨­å®š</span>
            </button>
            <button class="dropdown-item danger" onclick="confirmClearData()">
              <i class="fas fa-trash"></i>
              <span>æ¸…é™¤æ‰€æœ‰è³‡æ–™</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="search-bar">
      <i class="fas fa-search"></i>
      <input type="text" id="searchInput" placeholder="æœå°‹é£Ÿç‰©æˆ–é£²å“...">
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Home Page -->
    <div class="page active" id="homePage">
      <div class="category-pills" id="categoryPills"></div>
      <div class="food-list" id="foodList"></div>
    </div>

    <!-- Category Management Page -->
    <div class="page" id="categoryPage">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-value" id="totalItems">0</div>
          <div class="stat-label">ç¸½é …ç›®æ•¸</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="totalCategories">0</div>
          <div class="stat-label">åˆ†é¡æ•¸ç›®</div>
        </div>
      </div>

      <p class="settings-header">åˆ†é¡ç®¡ç†</p>
      <div class="category-list" id="categoryList"></div>
      <div class="add-category-row">
        <input type="text" class="add-category-input" id="newCategoryInput" placeholder="æ–°å¢åˆ†é¡...">
        <button class="add-category-btn" onclick="addCategory()">æ–°å¢</button>
      </div>

      <div style="margin-top: 20px;">
        <button class="submit-btn" onclick="backToHome()">
          <i class="fas fa-arrow-left"></i> è¿”å›ä¸»é 
        </button>
      </div>
    </div>

    <!-- Cloud Sync Page -->
    <div class="page" id="cloudPage">
      <div class="cloud-sync-section">
        <div class="cloud-sync-title">
          <i class="fas fa-cloud"></i>
          Google é›²ç«¯åŒæ­¥
        </div>

        <div class="cloud-help" style="margin-bottom: 16px;">
          <strong>ğŸ“– é›™å‘åŒæ­¥åŠŸèƒ½ï¼š</strong><br><br>
          <i class="fas fa-check-circle" style="color: #22c55e;"></i> åœ¨ App æ–°å¢/ä¿®æ”¹è³‡æ–™ â†’ è‡ªå‹•ä¸Šå‚³<br>
          <i class="fas fa-check-circle" style="color: #22c55e;"></i> é–‹å•Ÿ App â†’ è‡ªå‹•ä¸‹è¼‰æœ€æ–°è³‡æ–™<br>
          <i class="fas fa-check-circle" style="color: #22c55e;"></i> å¤šè£ç½®åŒæ­¥
        </div>

        <div id="sheetSyncStatus" class="cloud-status" style="display: none;"></div>

        <div id="lastSyncInfo" style="padding: 12px; background: var(--bg-primary); border-radius: 10px; margin-bottom: 16px;">
          <div style="display: flex; align-items: center; gap: 8px; color: var(--text-secondary); font-size: 13px;">
            <i class="fas fa-clock"></i>
            <span>ä¸Šæ¬¡åŒæ­¥ï¼š<span id="lastSyncTime">å¾æœª</span></span>
          </div>
          <div id="syncModeIndicator" style="display: flex; align-items: center; gap: 8px; color: var(--text-secondary); font-size: 13px; margin-top: 6px;">
            <i class="fas fa-info-circle"></i>
            <span>å°šæœªè¨­å®šé›²ç«¯åŒæ­¥</span>
          </div>
        </div>

        <div style="display: flex; gap: 8px; margin-bottom: 16px;">
          <button class="submit-btn" style="flex: 1;" onclick="syncFromCloud()" id="cloudDownloadBtn">
            <i class="fas fa-cloud-download-alt"></i> ä¸‹è¼‰
          </button>
          <button class="submit-btn" style="flex: 1; background: #34a853;" onclick="syncToCloud()" id="cloudUploadBtn">
            <i class="fas fa-cloud-upload-alt"></i> ä¸Šå‚³
          </button>
        </div>

        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--divider);">
          <div class="form-section-title"><i class="fas fa-cog"></i> Google Apps Script è¨­å®š</div>

          <div class="cloud-help" style="margin-bottom: 12px; font-size: 12px;">
            <strong>ä¸€æ¬¡æ€§è¨­å®šæ­¥é©Ÿï¼š</strong><br>
            1. <a href="#" onclick="showAppsScriptSetup(); return false;" style="color: var(--accent);">é»æ­¤æŸ¥çœ‹è©³ç´°æ•™å­¸</a><br>
            2. è¤‡è£½ Apps Script ä»£ç¢¼åˆ° Google<br>
            3. éƒ¨ç½²ç‚ºç¶²é æ‡‰ç”¨ç¨‹å¼<br>
            4. å°‡ç¶²å€è²¼åˆ°ä¸‹æ–¹
          </div>

          <div class="form-group">
            <label class="form-label">Google Apps Script ç¶²å€</label>
            <input type="text" class="form-input" id="appsScriptUrl" placeholder="https://script.google.com/macros/s/.../exec">
          </div>

          <button class="submit-btn" style="background: #34a853;" onclick="saveAppsScriptUrl()">
            <i class="fas fa-save"></i> å„²å­˜ä¸¦æ¸¬è©¦é€£æ¥
          </button>

          <div style="margin-top: 12px;">
            <label style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text-secondary); cursor: pointer;">
              <input type="checkbox" id="autoSyncCheckbox" onchange="toggleAutoSync()" style="width: 18px; height: 18px;">
              è‡ªå‹•åŒæ­¥ï¼ˆæ¯æ¬¡ä¿®æ”¹å¾Œè‡ªå‹•ä¸Šå‚³ï¼‰
            </label>
          </div>
        </div>

        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--divider);">
          <div class="form-section-title"><i class="fas fa-database"></i> æœ¬æ©Ÿè³‡æ–™ç®¡ç†</div>

          <button class="submit-btn" style="background: #f59e0b; margin-bottom: 8px;" onclick="resetToDefault()">
            <i class="fas fa-undo"></i> é‡ç½®ç‚ºé è¨­è³‡æ–™
          </button>

          <button class="submit-btn" style="background: #8b5cf6; margin-bottom: 8px;" onclick="exportLocalData()">
            <i class="fas fa-download"></i> åŒ¯å‡ºæœ¬æ©Ÿè³‡æ–™ (JSON)
          </button>

          <button class="submit-btn" style="background: #06b6d4;" onclick="exportToCSV()">
            <i class="fas fa-file-csv"></i> åŒ¯å‡ºç‚º CSV
          </button>
        </div>
      </div>

      <div style="margin-top: 20px;">
        <button class="submit-btn" onclick="backToHome()">
          <i class="fas fa-arrow-left"></i> è¿”å›ä¸»é 
        </button>
      </div>
    </div>
  </main>

  <!-- FAB -->
  <button class="fab" id="fab" onclick="openAddModal()">
    <i class="fas fa-plus"></i>
  </button>

  <!-- Add/Edit Modal -->
  <div class="modal-overlay" id="addModal">
    <div class="modal">
      <div class="modal-header">
        <span class="modal-title" id="modalTitle">æ–°å¢é£Ÿç‰©</span>
        <button class="modal-close" onclick="closeModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="foodForm">
          <input type="hidden" id="editId">

          <!-- Scan Nutrition Label -->
          <button type="button" class="scan-label-btn" id="scanLabelBtn" onclick="document.getElementById('labelImageInput').click()">
            <i class="fas fa-camera"></i>
            <span>æ‹æ”/ä¸Šè¼‰ç‡Ÿé¤Šæ¨™ç±¤</span>
          </button>
          <input type="file" id="labelImageInput" accept="image/*" style="display:none" onchange="handleLabelImage(event)">

          <div class="scan-preview" id="scanPreview">
            <img id="scanPreviewImg" src="" alt="Preview">
            <button type="button" class="scan-preview-remove" onclick="clearScanPreview()">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="scan-status" id="scanStatus"></div>

          <div class="form-group">
            <label class="form-label">ä¸­æ–‡åç¨±</label>
            <input type="text" class="form-input" id="foodName" placeholder="ä¾‹å¦‚ï¼šè¦é¤ƒ" required>
          </div>

          <div class="form-group">
            <label class="form-label">è‹±æ–‡åç¨± (é¸å¡«)</label>
            <input type="text" class="form-input" id="foodNameEn" placeholder="e.g. Steamed prawn dumpling">
          </div>

          <div class="form-group">
            <label class="form-label">åˆ†é¡</label>
            <select class="form-select" id="foodCategory" required></select>
          </div>

          <div class="form-section-title">ç‡Ÿé¤Šè³‡æ–™è¼¸å…¥æ–¹å¼</div>
          <div class="input-mode-toggle">
            <button type="button" class="input-mode-btn active" id="inputModePer100g" onclick="setInputMode('per100g')">
              æ¯ 100g
            </button>
            <button type="button" class="input-mode-btn" id="inputModePerServing" onclick="setInputMode('perServing')">
              æ¯é£Ÿç”¨ä»½é‡
            </button>
          </div>

          <div class="form-group serving-weight-group hidden" id="servingWeightGroup">
            <label class="form-label">æ¯ä»½é‡é‡ (g) <span style="color: var(--accent);">*å¿…å¡«</span></label>
            <input type="number" step="0.1" class="form-input" id="servingWeight" placeholder="ä¾‹å¦‚ï¼š31">
          </div>

          <div class="form-section-title" id="nutritionSectionTitle">ç‡Ÿé¤Šè³‡æ–™ (æ¯100g)</div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">å¡è·¯é‡Œ (kcal) - é¸å¡«</label>
              <input type="number" step="0.1" class="form-input" id="caloriesServing" placeholder="é¸å¡«">
            </div>
            <div class="form-group">
              <label class="form-label">è›‹ç™½è³ª (g) - é¸å¡«</label>
              <input type="number" step="0.1" class="form-input" id="proteinServing" placeholder="é¸å¡«">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">è„‚è‚ª (g) - é¸å¡«</label>
              <input type="number" step="0.1" class="form-input" id="fatServing" placeholder="é¸å¡«">
            </div>
            <div class="form-group">
              <label class="form-label">ç¢³æ°´åŒ–åˆç‰© (g) - é¸å¡«</label>
              <input type="number" step="0.1" class="form-input" id="carbsServing" placeholder="é¸å¡«">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label">éˆ‰ (mg) - é¸å¡«</label>
              <input type="number" step="0.1" class="form-input" id="sodiumServing" placeholder="é¸å¡«">
            </div>
            <div class="form-group">
              <label class="form-label">éˆ£ (mg) - é¸å¡«</label>
              <input type="number" step="0.1" class="form-input" id="calciumServing" placeholder="é¸å¡«">
            </div>
          </div>

          <button type="submit" class="submit-btn" id="submitBtn">å„²å­˜</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Confirm Modal -->
  <div class="modal-overlay" id="confirmModal">
    <div class="confirm-modal">
      <h3 id="confirmTitle">ç¢ºèªåˆªé™¤ï¼Ÿ</h3>
      <p id="confirmMessage">æ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚</p>
      <div class="confirm-buttons">
        <button class="confirm-btn cancel" onclick="closeConfirmModal()">å–æ¶ˆ</button>
        <button class="confirm-btn danger" id="confirmAction">ç¢ºèª</button>
      </div>
    </div>
  </div>

  <!-- AI Import Modal -->
  <div class="modal-overlay" id="aiImportModal">
    <div class="modal" style="max-width: 500px;">
      <div class="modal-header">
        <span class="modal-title"><i class="fas fa-robot"></i> AIæ‰¹é‡åŒ¯å…¥</span>
        <button class="modal-close" onclick="closeAIImportModal()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <p style="color: var(--text-secondary); margin-bottom: 16px; font-size: 14px;">
          ä¸Šå‚³ç‡Ÿé¤Šè¡¨æ ¼åœ–ç‰‡ï¼ŒAIæœƒè‡ªå‹•è­˜åˆ¥ä¸¦è¨ˆç®—å¹³å‡ç‡Ÿé¤Šå€¼ï¼Œç„¶å¾Œæ‰¹é‡åŠ å…¥åˆ°appä¸­ã€‚
        </p>

        <div class="form-group">
          <label class="form-label">é¸æ“‡åˆ†é¡</label>
          <select class="form-select" id="aiImportCategory"></select>
        </div>

        <div class="form-group">
          <label class="form-label">æˆ–è¼¸å…¥æ–°åˆ†é¡åç¨±</label>
          <div style="display: flex; gap: 8px;">
            <input type="text" class="form-input" id="aiNewCategory" placeholder="ä¾‹å¦‚ï¼šæ—¥å¼æ–™ç†">
            <input type="text" class="form-input" id="aiNewCategoryEmoji" placeholder="ğŸ±" style="width: 60px; text-align: center;">
          </div>
        </div>

        <button type="button" class="scan-label-btn" onclick="document.getElementById('aiImportImageInput').click()" style="margin-top: 12px;">
          <i class="fas fa-image"></i>
          <span>é¸æ“‡è¡¨æ ¼åœ–ç‰‡</span>
        </button>
        <input type="file" id="aiImportImageInput" accept="image/*" style="display:none" onchange="handleAIImportImage(event)">

        <div class="scan-preview" id="aiImportPreview" style="display: none;">
          <img id="aiImportPreviewImg" src="" alt="Preview">
          <button type="button" class="scan-preview-remove" onclick="clearAIImportPreview()">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <div id="aiImportStatus" style="margin-top: 16px; padding: 12px; border-radius: 12px; display: none;"></div>

        <div id="aiImportResults" style="margin-top: 16px; max-height: 300px; overflow-y: auto; display: none;">
          <div class="form-section-title">è­˜åˆ¥çµæœé è¦½</div>
          <div id="aiImportResultsList"></div>
        </div>

        <div style="display: flex; gap: 12px; margin-top: 20px;">
          <button type="button" class="submit-btn" id="aiAnalyzeBtn" onclick="analyzeWithAI()" style="flex: 1; background: var(--accent);" disabled>
            <i class="fas fa-wand-magic-sparkles"></i> é–‹å§‹è­˜åˆ¥
          </button>
          <button type="button" class="submit-btn" id="aiConfirmBtn" onclick="confirmAIImport()" style="flex: 1; display: none;">
            <i class="fas fa-check"></i> ç¢ºèªåŒ¯å…¥
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Hidden file input -->
  <input type="file" class="hidden-input" id="importInput" accept=".json" onchange="importData(event)">

  <script>
    // ==================== IndexedDB for Data Persistence ====================
    const DB_NAME = 'NutritionDB';
    const DB_VERSION = 1;
    let db = null;
    let isIndexedDBAvailable = false;

    // In-memory settings storage (fallback for Poe Canvas)
    let memorySettings = {};

    // Check if IndexedDB is available
    function checkIndexedDBSupport() {
      try {
        if (!window.indexedDB) return false;
        // Try to open a test database
        const testRequest = indexedDB.open('__test__', 1);
        testRequest.onerror = () => {};
        testRequest.onsuccess = () => {
          testRequest.result.close();
          indexedDB.deleteDatabase('__test__');
        };
        return true;
      } catch (e) {
        return false;
      }
    }

    function openDatabase() {
      return new Promise((resolve, reject) => {
        // Check if we're in a restricted environment (like Poe Canvas)
        if (!window.indexedDB) {
          console.log('IndexedDB not supported in this environment');
          isIndexedDBAvailable = false;
          resolve(null);
          return;
        }

        try {
          const request = indexedDB.open(DB_NAME, DB_VERSION);

          request.onerror = (e) => {
            console.log('IndexedDB open error:', e.target.error);
            isIndexedDBAvailable = false;
            resolve(null); // Don't reject, just resolve with null
          };

          request.onsuccess = () => {
            db = request.result;
            isIndexedDBAvailable = true;
            resolve(db);
          };

          request.onupgradeneeded = (event) => {
            const database = event.target.result;
            if (!database.objectStoreNames.contains('foods')) {
              database.createObjectStore('foods', { keyPath: 'id' });
            }
            if (!database.objectStoreNames.contains('categories')) {
              database.createObjectStore('categories', { keyPath: 'name' });
            }
            if (!database.objectStoreNames.contains('settings')) {
              database.createObjectStore('settings', { keyPath: 'key' });
            }
          };
        } catch (e) {
          console.log('IndexedDB exception:', e);
          isIndexedDBAvailable = false;
          resolve(null);
        }
      });
    }

    async function saveToIndexedDB() {
      if (!db) return;
      try {
        const tx = db.transaction(['foods', 'categories'], 'readwrite');
        const foodStore = tx.objectStore('foods');
        const catStore = tx.objectStore('categories');

        // Clear and re-add all foods
        await new Promise((resolve, reject) => {
          const clearReq = foodStore.clear();
          clearReq.onsuccess = resolve;
          clearReq.onerror = reject;
        });

        for (const food of foods) {
          foodStore.put(food);
        }

        // Clear and re-add all categories
        await new Promise((resolve, reject) => {
          const clearReq = catStore.clear();
          clearReq.onsuccess = resolve;
          clearReq.onerror = reject;
        });

        for (const cat of categories) {
          catStore.put({ name: cat });
        }

        await new Promise((resolve, reject) => {
          tx.oncomplete = resolve;
          tx.onerror = reject;
        });
      } catch (err) {
        console.log('Error saving to IndexedDB:', err);
      }
    }

    async function loadFromIndexedDB() {
      if (!db) return false;
      try {
        const tx = db.transaction(['foods', 'categories'], 'readonly');
        const foodStore = tx.objectStore('foods');
        const catStore = tx.objectStore('categories');

        const loadedFoods = await new Promise((resolve, reject) => {
          const req = foodStore.getAll();
          req.onsuccess = () => resolve(req.result);
          req.onerror = reject;
        });

        const loadedCats = await new Promise((resolve, reject) => {
          const req = catStore.getAll();
          req.onsuccess = () => resolve(req.result);
          req.onerror = reject;
        });

        if (loadedFoods && loadedFoods.length > 0) {
          foods = loadedFoods;
        }

        if (loadedCats && loadedCats.length > 0) {
          categories = loadedCats.map(c => c.name);
        }

        return true;
      } catch (err) {
        console.log('Error loading from IndexedDB:', err);
        return false;
      }
    }

    // ==================== Service Worker Registration ====================
    if ('serviceWorker' in navigator) {
      // Create inline service worker
      const swCode = `
        const CACHE_NAME = 'nutrition-db-v1';
        const urlsToCache = [
          './',
          './index.html'
        ];

        self.addEventListener('install', event => {
          event.waitUntil(
            caches.open(CACHE_NAME)
              .then(cache => cache.addAll(urlsToCache))
              .then(() => self.skipWaiting())
          );
        });

        self.addEventListener('activate', event => {
          event.waitUntil(
            caches.keys().then(cacheNames => {
              return Promise.all(
                cacheNames.filter(name => name !== CACHE_NAME)
                  .map(name => caches.delete(name))
              );
            }).then(() => self.clients.claim())
          );
        });

        self.addEventListener('fetch', event => {
          event.respondWith(
            caches.match(event.request)
              .then(response => {
                if (response) return response;
                return fetch(event.request).then(response => {
                  if (!response || response.status !== 200) return response;
                  const responseToCache = response.clone();
                  caches.open(CACHE_NAME).then(cache => {
                    cache.put(event.request, responseToCache);
                  });
                  return response;
                });
              })
          );
        });
      `;

      const blob = new Blob([swCode], { type: 'application/javascript' });
      const swUrl = URL.createObjectURL(blob);

      navigator.serviceWorker.register(swUrl, { scope: './' })
        .then(reg => console.log('SW registered'))
        .catch(err => console.log('SW registration failed:', err));
    }

    // ==================== Dark Mode Detection ====================
    // Dark mode detection
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
      if (event.matches) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    });

    // Category emojis
    const categoryEmojis = {
      'å…¨éƒ¨': '',
      'é»å¿ƒ': 'ğŸ¥Ÿ',
      'åŒ…é»': 'ğŸ¥Ÿ',
      'å’¸è’¸é»': 'ğŸ¥¢',
      'è’¸è…¸ç²‰': 'ğŸœ',
      'ç…ç‚¸é»å¿ƒ': 'ğŸ¤',
      'ç¼èœ': 'ğŸ¥¬',
      'é£¯éºµé¡': 'ğŸš',
      'ç”œå“': 'ğŸ®',
      'å…¶ä»–': 'ğŸ“¦',
      'æ°´æœ': 'ğŸ',
      'è”¬èœ': 'ğŸ¥¬',
      'è‚‰é¡': 'ğŸ–',
      'æµ·é®®': 'ğŸ¦',
      'å°é£Ÿ': 'ğŸª',
      'éº¥ç•¶å‹': 'ğŸ”',
      'ç²¥ç²‰éºªé£¯': 'ğŸœ',
      'é£²å“': 'ğŸ§‹',
      'æ¸¯å¼å°èœ': 'ğŸ³',
      'ä¸­å¼ç´ èœ': 'ğŸ¥¬'
    };

    // Categories
    let categories = ['é»å¿ƒ', 'æ°´æœ', 'è”¬èœ', 'éº¥ç•¶å‹', 'ç²¥ç²‰éºªé£¯', 'é£²å“', 'æ¸¯å¼å°èœ', 'ä¸­å¼ç´ èœ', 'å…¶ä»–'];
    let currentFilter = 'å…¨éƒ¨';

    // Track which food items are showing per100g (by food id)
    let showPer100gSet = new Set();

    // Track input mode for the form: 'per100g' or 'perServing'
    let formInputMode = 'per100g';

    // Cloud sync URL
    let cloudSyncUrl = '';

    // Pre-loaded dim sum data from FEHD Report No. 17
    // æ¯ä»½é‡é‡è¨ˆç®—å…¬å¼: weight = (perServing.calories / per100g.calories) Ã— 100
    let foods = [
      // åŒ…é» (Steamed buns)
      { id: '1', name: 'å¥¶çš‡åŒ…', nameEn: 'Steamed egg custard bun', category: 'é»å¿ƒ', per100g: { calories: 260, protein: 4.3, fat: 6.4, carbs: 46, sodium: 100, calcium: 51 }, perServing: { weight: 46, calories: 120, protein: 2.0, fat: 3.0, carbs: 22, sodium: 47, calcium: 24 }},
      { id: '2', name: 'å‰ç‡’åŒ…', nameEn: 'Steamed barbecued pork bun', category: 'é»å¿ƒ', per100g: { calories: 270, protein: 7.3, fat: 7.3, carbs: 43, sodium: 290, calcium: 18 }, perServing: { weight: 56, calories: 150, protein: 4.1, fat: 4.1, carbs: 24, sodium: 160, calcium: 9.9 }},
      { id: '3', name: 'è›‹é»ƒè“®è“‰åŒ…', nameEn: 'Steamed lotus seed paste and egg yolk bun', category: 'é»å¿ƒ', per100g: { calories: 310, protein: 5.2, fat: 8.1, carbs: 55, sodium: 65, calcium: 33 }, perServing: { weight: 55, calories: 170, protein: 2.9, fat: 4.5, carbs: 30, sodium: 36, calcium: 18 }},
      { id: '4', name: 'é›åŒ…ä»”', nameEn: 'Steamed chicken bun', category: 'é»å¿ƒ', per100g: { calories: 230, protein: 7.5, fat: 5.9, carbs: 37, sodium: 300, calcium: 27 }, perServing: { weight: 52, calories: 120, protein: 3.9, fat: 3.1, carbs: 19, sodium: 160, calcium: 14 }},
      { id: '5', name: 'ç³¯ç±³å·', nameEn: 'Steamed glutinous rice roll', category: 'é»å¿ƒ', per100g: { calories: 270, protein: 5.1, fat: 6.5, carbs: 48, sodium: 370, calcium: 26 }, perServing: { weight: 96, calories: 260, protein: 4.9, fat: 6.3, carbs: 47, sodium: 360, calcium: 25 }},
      { id: '6', name: 'é¦¬æ‹‰ç³•', nameEn: 'Mai-lai cake', category: 'é»å¿ƒ', per100g: { calories: 290, protein: 6.8, fat: 8.1, carbs: 47, sodium: 220, calcium: 48 }, perServing: { weight: 128, calories: 370, protein: 8.6, fat: 10, carbs: 59, sodium: 280, calcium: 60 }},
      { id: '7', name: 'èœè‚‰åŒ…', nameEn: 'Steamed vegetable and meat bun', category: 'é»å¿ƒ', per100g: { calories: 240, protein: 5.9, fat: 7.9, carbs: 37, sodium: 280, calcium: 22 }, perServing: { weight: 79, calories: 190, protein: 4.7, fat: 6.2, carbs: 29, sodium: 220, calcium: 17 }},
      { id: '8', name: 'å¤§åŒ…', nameEn: 'Steamed bun with assorted stuffing', category: 'é»å¿ƒ', per100g: { calories: 230, protein: 7.9, fat: 8.2, carbs: 32, sodium: 300, calcium: 29 }, perServing: { weight: 235, calories: 540, protein: 18, fat: 19, carbs: 75, sodium: 700, calcium: 68 }},

      // å’¸è’¸é» (Steamed salty dim sum)
      { id: '9', name: 'æ½®å·ç²‰æœ', nameEn: 'Steamed dumpling, Chiu Chow-style', category: 'é»å¿ƒ', per100g: { calories: 150, protein: 3.1, fat: 5.7, carbs: 22, sodium: 360, calcium: 30 }, perServing: { weight: 61, calories: 92, protein: 1.9, fat: 3.5, carbs: 13, sodium: 220, calcium: 18 }},
      { id: '10', name: 'è±‰æ±è’¸æ’éª¨', nameEn: 'Steamed pork ribs with black bean sauce', category: 'é»å¿ƒ', per100g: { calories: 220, protein: 14, fat: 15, carbs: 6.3, sodium: 570, calcium: 41 }, perServing: { weight: 118, calories: 260, protein: 16, fat: 17, carbs: 7.3, sodium: 660, calcium: 48 }},
      { id: '11', name: 'è±‰æ±è’¸é³³çˆª', nameEn: 'Steamed chicken feet with black bean sauce', category: 'é»å¿ƒ', per100g: { calories: 200, protein: 15, fat: 13, carbs: 5.7, sodium: 620, calcium: 66 }, perServing: { weight: 100, calories: 200, protein: 15, fat: 13, carbs: 5.7, sodium: 620, calcium: 66 }},
      { id: '12', name: 'è±‰æ±è’¸é­šé›²', nameEn: 'Steamed fish head with black bean sauce', category: 'é»å¿ƒ', per100g: { calories: 170, protein: 10, fat: 12, carbs: 4.2, sodium: 580, calcium: 180 }, perServing: { weight: 112, calories: 190, protein: 11, fat: 13, carbs: 4.7, sodium: 640, calcium: 200 }},
      { id: '13', name: 'å°ç± åŒ…', nameEn: 'Steamed pork dumpling, Shanghai-style', category: 'é»å¿ƒ', per100g: { calories: 230, protein: 9.0, fat: 14, carbs: 17, sodium: 390, calcium: 13 }, perServing: { weight: 37, calories: 85, protein: 3.3, fat: 5.2, carbs: 6.3, sodium: 140, calcium: 4.8 }},
      { id: '14', name: 'çŒæ¹¯é¤ƒ', nameEn: 'Soup dumpling', category: 'é»å¿ƒ', per100g: { calories: 61, protein: 5.2, fat: 2.0, carbs: 5.7, sodium: 410, calcium: 16 }, perServing: { weight: 230, calories: 140, protein: 12, fat: 4.6, carbs: 13, sodium: 940, calcium: 37 }},
      { id: '15', name: 'èŸ¹ç²‰å°ç± åŒ…', nameEn: 'Steamed pork dumpling with crab meat', category: 'é»å¿ƒ', per100g: { calories: 230, protein: 8.7, fat: 14, carbs: 17, sodium: 380, calcium: 20 }, perServing: { weight: 36, calories: 83, protein: 3.1, fat: 5.0, carbs: 6.1, sodium: 140, calcium: 7.2 }},
      { id: '16', name: 'ä¸Šç´ è’¸ç²‰æœ', nameEn: 'Steamed vegetarian dumpling', category: 'é»å¿ƒ', per100g: { calories: 120, protein: 1.4, fat: 3.4, carbs: 21, sodium: 360, calcium: 11 }, perServing: { weight: 43, calories: 52, protein: 0.6, fat: 1.5, carbs: 9.0, sodium: 150, calcium: 4.7 }},
      { id: '17', name: 'è–‘è”¥ç‰›æŸè‘‰', nameEn: 'Steamed beef omasum with ginger and spring onion', category: 'é»å¿ƒ', per100g: { calories: 99, protein: 12, fat: 4.2, carbs: 3.5, sodium: 540, calcium: 36 }, perServing: { weight: 162, calories: 160, protein: 20, fat: 6.9, carbs: 5.8, sodium: 890, calcium: 59 }},
      { id: '18', name: 'æŸ±ä¾¯é‡‘éŒ¢è‚š', nameEn: 'Braised ox tripe with zhuhou sauce', category: 'é»å¿ƒ', per100g: { calories: 140, protein: 14, fat: 6.5, carbs: 7.4, sodium: 600, calcium: 22 }, perServing: { weight: 157, calories: 220, protein: 22, fat: 10, carbs: 11, sodium: 920, calcium: 34 }},
      { id: '19', name: 'è’œèŒ¸è’¸é­·é­š', nameEn: 'Steamed squid with garlic', category: 'é»å¿ƒ', per100g: { calories: 120, protein: 14, fat: 4.6, carbs: 4.4, sodium: 600, calcium: 23 }, perServing: { weight: 142, calories: 170, protein: 19, fat: 6.4, carbs: 6.1, sodium: 830, calcium: 32 }},
      { id: '20', name: 'é›çµ²ç²‰å·', nameEn: 'Steamed rice flour roll with shredded chicken', category: 'é»å¿ƒ', per100g: { calories: 160, protein: 5.8, fat: 8.5, carbs: 14, sodium: 390, calcium: 15 }, perServing: { weight: 69, calories: 110, protein: 3.9, fat: 5.8, carbs: 9.5, sodium: 270, calcium: 10 }},
      { id: '21', name: 'é®®ç«¹å·', nameEn: 'Steamed beancurd sheet roll', category: 'é»å¿ƒ', per100g: { calories: 260, protein: 11, fat: 22, carbs: 5.3, sodium: 440, calcium: 38 }, perServing: { weight: 58, calories: 150, protein: 6.2, fat: 12, carbs: 3.0, sodium: 250, calcium: 21 }},
      { id: '22', name: 'é´¨è…³æ‰', nameEn: 'Steamed beancurd sheet roll with duck feet', category: 'é»å¿ƒ', per100g: { calories: 220, protein: 10, fat: 15, carbs: 12, sodium: 420, calcium: 38 }, perServing: { weight: 73, calories: 160, protein: 7.4, fat: 11, carbs: 8.8, sodium: 310, calcium: 28 }},
      { id: '23', name: 'é›æ‰', nameEn: 'Steamed beancurd sheet roll with chicken', category: 'é»å¿ƒ', per100g: { calories: 180, protein: 12, fat: 12, carbs: 4.9, sodium: 450, calcium: 20 }, perServing: { weight: 83, calories: 150, protein: 10, fat: 10, carbs: 4.2, sodium: 390, calcium: 17 }},
      { id: '24', name: 'è¦é¤ƒ', nameEn: 'Steamed fresh prawn dumpling (Ha-gau)', category: 'é»å¿ƒ', per100g: { calories: 160, protein: 6.7, fat: 6.7, carbs: 18, sodium: 400, calcium: 27 }, perServing: { weight: 31, calories: 50, protein: 2.1, fat: 2.1, carbs: 5.6, sodium: 120, calcium: 8.4 }},
      { id: '25', name: 'ç‡’è³£', nameEn: 'Steamed stuffed dumpling with shrimp (Siu mai)', category: 'é»å¿ƒ', per100g: { calories: 210, protein: 11, fat: 13, carbs: 11, sodium: 560, calcium: 26 }, perServing: { weight: 29, calories: 61, protein: 3.2, fat: 3.8, carbs: 3.2, sodium: 160, calcium: 7.5 }},
      { id: '26', name: 'å±±ç«¹ç‰›è‚‰', nameEn: 'Steamed minced beef ball', category: 'é»å¿ƒ', per100g: { calories: 190, protein: 8.5, fat: 14, carbs: 9.1, sodium: 520, calcium: 11 }, perServing: { weight: 49, calories: 93, protein: 4.2, fat: 6.9, carbs: 4.5, sodium: 250, calcium: 5.4 }},
      { id: '27', name: 'æ£‰èŠ±é›', nameEn: 'Steamed chicken with fish maw', category: 'é»å¿ƒ', per100g: { calories: 140, protein: 12, fat: 9.3, carbs: 3.5, sodium: 640, calcium: 16 }, perServing: { weight: 150, calories: 210, protein: 18, fat: 14, carbs: 5.3, sodium: 970, calcium: 24 }},
      { id: '28', name: 'å’–å“©è’¸é­·é­š', nameEn: 'Steamed curry squid', category: 'é»å¿ƒ', per100g: { calories: 98, protein: 11, fat: 4.3, carbs: 4.5, sodium: 640, calcium: 29 }, perServing: { weight: 194, calories: 190, protein: 22, fat: 8.5, carbs: 8.9, sodium: 1300, calcium: 57 }},
      { id: '29', name: 'è’¸è˜¿è””ç³•', nameEn: 'Turnip cake (steamed)', category: 'é»å¿ƒ', per100g: { calories: 95, protein: 2.3, fat: 3.6, carbs: 13, sodium: 430, calcium: 21 }, perServing: { weight: 179, calories: 170, protein: 4.0, fat: 6.3, carbs: 23, sodium: 750, calcium: 37 }},
      { id: '30', name: 'çç é›', nameEn: 'Mini-sized sticky rice wrapped in lotus leaf', category: 'é»å¿ƒ', per100g: { calories: 220, protein: 6.4, fat: 7.3, carbs: 32, sodium: 440, calcium: 26 }, perServing: { weight: 95, calories: 210, protein: 6.1, fat: 7.0, carbs: 31, sodium: 420, calcium: 25 }},
      { id: '31', name: 'ç³¯ç±³é›', nameEn: 'Sticky rice wrapped in lotus leaf', category: 'é»å¿ƒ', per100g: { calories: 210, protein: 7.6, fat: 6.7, carbs: 31, sodium: 420, calcium: 11 }, perServing: { weight: 338, calories: 710, protein: 26, fat: 23, carbs: 110, sodium: 1400, calcium: 37 }},

      // è’¸è…¸ç²‰ (Steamed rice-roll)
      { id: '32', name: 'å‰ç‡’è…¸ç²‰', nameEn: 'Steamed rice-roll with barbecued pork', category: 'é»å¿ƒ', per100g: { calories: 140, protein: 5.1, fat: 5.7, carbs: 18, sodium: 410, calcium: 7.8 }, perServing: { weight: 79, calories: 110, protein: 3.8, fat: 4.3, carbs: 14, sodium: 310, calcium: 5.9 }},
      { id: '33', name: 'ç‰›è‚‰è…¸ç²‰', nameEn: 'Steamed rice-roll with beef', category: 'é»å¿ƒ', per100g: { calories: 110, protein: 2.8, fat: 3.5, carbs: 16, sodium: 150, calcium: 6.3 }, perServing: { weight: 80, calories: 88, protein: 2.2, fat: 2.8, carbs: 13, sodium: 120, calcium: 5.0 }},
      { id: '34', name: 'é®®è¦è…¸ç²‰', nameEn: 'Steamed rice-roll with shrimp', category: 'é»å¿ƒ', per100g: { calories: 110, protein: 3.9, fat: 2.2, carbs: 17, sodium: 150, calcium: 17 }, perServing: { weight: 74, calories: 81, protein: 2.9, fat: 1.6, carbs: 13, sodium: 110, calcium: 13 }},
      { id: '35', name: 'è’¸å¸¶å­è…¸ç²‰', nameEn: 'Steamed rice-roll with scallops', category: 'é»å¿ƒ', per100g: { calories: 100, protein: 4.3, fat: 2.3, carbs: 16, sodium: 160, calcium: 9.2 }, perServing: { weight: 70, calories: 70, protein: 3.0, fat: 1.6, carbs: 11, sodium: 110, calcium: 6.4 }},
      { id: '36', name: 'è’¸ç¾…æ¼¢é½‹è…¸ç²‰', nameEn: 'Steamed rice-roll with vegetarian stuffing', category: 'é»å¿ƒ', per100g: { calories: 100, protein: 2.1, fat: 2.8, carbs: 17, sodium: 190, calcium: 9.0 }, perServing: { weight: 76, calories: 76, protein: 1.6, fat: 2.1, carbs: 13, sodium: 140, calcium: 6.8 }},

      // ç…ç‚¸é»å¿ƒ (Pan-fried and deep-fried dim sum)
      { id: '37', name: 'èŠ‹è§’', nameEn: 'Deep-fried taro dumpling', category: 'é»å¿ƒ', per100g: { calories: 370, protein: 6.0, fat: 26, carbs: 27, sodium: 440, calcium: 25 }, perServing: { weight: 46, calories: 170, protein: 2.8, fat: 12, carbs: 13, sodium: 210, calcium: 12 }},
      { id: '38', name: 'æ˜¥å·', nameEn: 'Spring roll', category: 'é»å¿ƒ', per100g: { calories: 350, protein: 9.1, fat: 24, carbs: 24, sodium: 480, calcium: 23 }, perServing: { weight: 43, calories: 150, protein: 4.0, fat: 11, carbs: 11, sodium: 210, calcium: 10 }},
      { id: '39', name: 'é¹¹æ°´è§’', nameEn: 'Deep-fried meat dumpling', category: 'é»å¿ƒ', per100g: { calories: 340, protein: 4.9, fat: 16, carbs: 43, sodium: 180, calcium: 25 }, perServing: { weight: 50, calories: 170, protein: 2.4, fat: 7.8, carbs: 21, sodium: 88, calcium: 12 }},
      { id: '40', name: 'ç‚¸é¥…é ­', nameEn: 'Deep-fried plain bun', category: 'é»å¿ƒ', per100g: { calories: 430, protein: 4.9, fat: 23, carbs: 50, sodium: 67, calcium: 27 }, perServing: { weight: 65, calories: 280, protein: 3.2, fat: 15, carbs: 33, sodium: 44, calcium: 18 }},
      { id: '41', name: 'ç‚¸é›²å', nameEn: 'Deep fried wonton', category: 'é»å¿ƒ', per100g: { calories: 430, protein: 9.7, fat: 29, carbs: 32, sodium: 440, calcium: 30 }, perServing: { weight: 23, calories: 99, protein: 2.2, fat: 6.7, carbs: 7.4, sodium: 100, calcium: 6.9 }},
      { id: '42', name: 'ç…è…¸ç²‰', nameEn: 'Pan-fried rice-roll', category: 'é»å¿ƒ', per100g: { calories: 140, protein: 2.0, fat: 4.4, carbs: 24, sodium: 190, calcium: 22 }, perServing: { weight: 321, calories: 450, protein: 6.4, fat: 14, carbs: 77, sodium: 610, calcium: 71 }},
      { id: '43', name: 'ç…è…çš®å·', nameEn: 'Pan-fried beancurd sheet roll', category: 'é»å¿ƒ', per100g: { calories: 320, protein: 14, fat: 26, carbs: 5.9, sodium: 520, calcium: 63 }, perServing: { weight: 41, calories: 130, protein: 5.7, fat: 11, carbs: 2.4, sodium: 210, calcium: 26 }},
      { id: '44', name: 'ç…è˜¿è””ç³•', nameEn: 'Turnip cake (pan-fried)', category: 'é»å¿ƒ', per100g: { calories: 140, protein: 3.2, fat: 5.7, carbs: 18, sodium: 540, calcium: 25 }, perServing: { weight: 86, calories: 120, protein: 2.7, fat: 4.8, carbs: 15, sodium: 450, calcium: 21 }},
      { id: '45', name: 'ç…é¦¬è¹„ç³•', nameEn: 'Sweetened water chestnut cake (pan-fried)', category: 'é»å¿ƒ', per100g: { calories: 140, protein: 0, fat: 1.7, carbs: 32, sodium: 12, calcium: 3.1 }, perServing: { weight: 79, calories: 110, protein: 0, fat: 1.3, carbs: 25, sodium: 9.4, calcium: 2.4 }},
      { id: '46', name: 'ç…èŠ‹é ­ç³•', nameEn: 'Taro cake (pan-fried)', category: 'é»å¿ƒ', per100g: { calories: 180, protein: 3.2, fat: 7.4, carbs: 24, sodium: 460, calcium: 30 }, perServing: { weight: 78, calories: 140, protein: 2.5, fat: 5.7, carbs: 18, sodium: 350, calcium: 23 }},
      { id: '47', name: 'ç”Ÿç…èœè‚‰åŒ…', nameEn: 'Pan-fried vegetable and meat bun', category: 'é»å¿ƒ', per100g: { calories: 280, protein: 6.4, fat: 13, carbs: 34, sodium: 320, calcium: 32 }, perServing: { weight: 57, calories: 160, protein: 3.7, fat: 7.5, carbs: 20, sodium: 190, calcium: 19 }},

      // ç¼èœ (Boiled vegetables)
      { id: '48', name: 'ç™½ç¼ç”Ÿèœ', nameEn: 'Boiled headed lettuce (without sauce)', category: 'é»å¿ƒ', per100g: { calories: 31, protein: 0.87, fat: 2.0, carbs: 2.5, sodium: 23, calcium: 24 }, perServing: { weight: 281, calories: 87, protein: 2.4, fat: 5.6, carbs: 7.0, sodium: 65, calcium: 67 }},
      { id: '49', name: 'ç™½ç¼èœå¿ƒ', nameEn: 'Boiled Chinese flowering cabbage (without sauce)', category: 'é»å¿ƒ', per100g: { calories: 28, protein: 1.8, fat: 0.91, carbs: 3.2, sodium: 33, calcium: 91 }, perServing: { weight: 257, calories: 72, protein: 4.6, fat: 2.3, carbs: 8.3, sodium: 85, calcium: 230 }},
      { id: '50', name: 'ç™½ç¼é€šèœ', nameEn: 'Boiled water spinach (without sauce)', category: 'é»å¿ƒ', per100g: { calories: 24, protein: 1.7, fat: 0.7, carbs: 2.7, sodium: 47, calcium: 46 }, perServing: { weight: 296, calories: 71, protein: 5.0, fat: 2.1, carbs: 8.0, sodium: 140, calcium: 140 }},

      // é£¯éºµé¡ (Rice and noodles)
      { id: '51', name: 'å†¬è°è’¸é›é£¯', nameEn: 'Steamed rice with chicken and winter mushroom', category: 'é»å¿ƒ', per100g: { calories: 160, protein: 6.1, fat: 4.4, carbs: 25, sodium: 280, calcium: 9.7 }, perServing: { weight: 413, calories: 660, protein: 25, fat: 18, carbs: 100, sodium: 1100, calcium: 40 }},
      { id: '52', name: 'è±‰æ±é³³çˆªæ’éª¨é£¯', nameEn: 'Steamed rice with pork rib and chicken leg', category: 'é»å¿ƒ', per100g: { calories: 180, protein: 5.3, fat: 5.4, carbs: 28, sodium: 260, calcium: 12 }, perServing: { weight: 456, calories: 820, protein: 24, fat: 25, carbs: 130, sodium: 1200, calcium: 55 }},
      { id: '53', name: 'é­šç‰‡æ¹¯ç±³ç²‰ (é€£æ¹¯)', nameEn: 'Rice vermicelli-in-soup with sliced freshwater fish', category: 'é»å¿ƒ', per100g: { calories: 67, protein: 3.8, fat: 1.1, carbs: 10, sodium: 230, calcium: 11 }, perServing: { weight: 672, calories: 450, protein: 25, fat: 7.3, carbs: 67, sodium: 1500, calcium: 73 }},
      { id: '54', name: 'å†¬ç“œè‚‰ç²’æ¹¯é£¯', nameEn: 'Rice-in-soup with winter melon and diced pork', category: 'é»å¿ƒ', per100g: { calories: 81, protein: 3.9, fat: 0.71, carbs: 15, sodium: 210, calcium: 5.7 }, perServing: { weight: 728, calories: 590, protein: 28, fat: 5.1, carbs: 110, sodium: 1500, calcium: 41 }},

      // ç”œå“ (Desserts)
      { id: '55', name: 'ç´…è±†æ²™', nameEn: 'Red bean dessert/sweet soup', category: 'é»å¿ƒ', per100g: { calories: 110, protein: 3.6, fat: 0.36, carbs: 22, sodium: 0, calcium: 18 }, perServing: { weight: 236, calories: 260, protein: 8.6, fat: 0.86, carbs: 53, sodium: 0, calcium: 43 }},
      { id: '56', name: 'ç¶ è±†æ²™', nameEn: 'Mung bean dessert/sweet soup', category: 'é»å¿ƒ', per100g: { calories: 80, protein: 2.5, fat: 0.32, carbs: 17, sodium: 0, calcium: 12 }, perServing: { weight: 350, calories: 280, protein: 8.7, fat: 1.1, carbs: 59, sodium: 0, calcium: 42 }},
      { id: '57', name: 'è•ƒè–¯ç³–æ°´', nameEn: 'Sweet potato dessert/sweet soup', category: 'é»å¿ƒ', per100g: { calories: 70, protein: 0.39, fat: 0, carbs: 17, sodium: 16, calcium: 12 }, perServing: { weight: 314, calories: 220, protein: 1.2, fat: 0, carbs: 53, sodium: 50, calcium: 38 }},
      { id: '58', name: 'å–³å’‹', nameEn: 'Mixed bean dessert/sweet soup (Ja-ja dessert)', category: 'é»å¿ƒ', per100g: { calories: 110, protein: 3.6, fat: 1.7, carbs: 20, sodium: 7.6, calcium: 23 }, perServing: { weight: 327, calories: 360, protein: 12, fat: 5.6, carbs: 66, sodium: 25, calcium: 76 }},
      { id: '59', name: 'è±†è…èŠ±', nameEn: 'Soybean curd dessert', category: 'é»å¿ƒ', per100g: { calories: 55, protein: 2.2, fat: 1.3, carbs: 8.6, sodium: 0, calcium: 86 }, perServing: { weight: 309, calories: 170, protein: 6.6, fat: 3.9, carbs: 26, sodium: 0, calcium: 260 }},
      { id: '60', name: 'èŠ’æœå¸ƒç”¸', nameEn: 'Mango pudding', category: 'é»å¿ƒ', per100g: { calories: 97, protein: 2.2, fat: 2.2, carbs: 17, sodium: 29, calcium: 40 }, perServing: { weight: 186, calories: 180, protein: 4.0, fat: 4.0, carbs: 31, sodium: 53, calcium: 73 }},
      { id: '61', name: 'å°è›‹æ’»', nameEn: 'Egg tart (small)', category: 'é»å¿ƒ', per100g: { calories: 330, protein: 5.2, fat: 18, carbs: 36, sodium: 68, calcium: 32 }, perServing: { weight: 26, calories: 86, protein: 1.4, fat: 4.7, carbs: 9.4, sodium: 18, calcium: 8.3 }},
      { id: '62', name: 'èŠéº»ç³Š', nameEn: 'Sesame dessert/sweet soup', category: 'é»å¿ƒ', per100g: { calories: 100, protein: 1.6, fat: 4.2, carbs: 15, sodium: 0, calcium: 74 }, perServing: { weight: 290, calories: 290, protein: 4.6, fat: 12, carbs: 43, sodium: 0, calcium: 210 }},
      { id: '63', name: 'æ¥Šæç”˜éœ²', nameEn: 'Mango sago dessert with pomelo', category: 'é»å¿ƒ', per100g: { calories: 83, protein: 0.4, fat: 2.1, carbs: 15, sodium: 11, calcium: 13 }, perServing: { weight: 253, calories: 210, protein: 1.0, fat: 5.4, carbs: 39, sodium: 28, calcium: 34 }},
      { id: '64', name: 'æ¤°æ±é¦¬è±†ç³•', nameEn: 'Coconut milk yellow bean pudding', category: 'é»å¿ƒ', per100g: { calories: 140, protein: 3.9, fat: 4.8, carbs: 19, sodium: 16, calcium: 19 }, perServing: { weight: 86, calories: 120, protein: 3.3, fat: 4.1, carbs: 16, sodium: 14, calcium: 16 }},
      { id: '65', name: 'è±†æ²™æ°´æ™¶åŒ…', nameEn: 'Steamed sago dumpling with red bean paste', category: 'é»å¿ƒ', per100g: { calories: 220, protein: 1.8, fat: 4.7, carbs: 43, sodium: 0, calcium: 15 }, perServing: { weight: 39, calories: 86, protein: 0.7, fat: 1.8, carbs: 17, sodium: 0, calcium: 5.9 }},
      { id: '66', name: 'è“®è“‰æ°´æ™¶åŒ…', nameEn: 'Steamed sago dumpling with lotus seed paste', category: 'é»å¿ƒ', per100g: { calories: 240, protein: 2.1, fat: 8.0, carbs: 41, sodium: 7.0, calcium: 15 }, perServing: { weight: 37, calories: 89, protein: 0.78, fat: 3.0, carbs: 15, sodium: 2.6, calcium: 5.6 }},

      // å…¶ä»– (Others)
      { id: '67', name: 'é¹¹è‚‰ç²½', nameEn: 'Salted meat rice dumpling', category: 'é»å¿ƒ', per100g: { calories: 190, protein: 5.7, fat: 6.7, carbs: 27, sodium: 260, calcium: 12 }, perServing: { weight: 253, calories: 480, protein: 14, fat: 17, carbs: 68, sodium: 660, calcium: 30 }},
      { id: '68', name: 'é¹¼æ°´ç²½', nameEn: 'Gan-shui rice dumpling', category: 'é»å¿ƒ', per100g: { calories: 160, protein: 2.6, fat: 1.4, carbs: 34, sodium: 23, calcium: 3.7 }, perServing: { weight: 244, calories: 390, protein: 6.3, fat: 3.4, carbs: 83, sodium: 56, calcium: 9.0 }},
      { id: '69', name: 'éº»é¦™æ‹Œæµ·èœ‡', nameEn: 'Marinated jelly fish', category: 'é»å¿ƒ', per100g: { calories: 84, protein: 4.5, fat: 6.4, carbs: 2.2, sodium: 780, calcium: 3.1 }, perServing: { weight: 286, calories: 240, protein: 13, fat: 18, carbs: 6.3, sodium: 2200, calcium: 8.9 }},
      { id: '70', name: 'å‰ç‡’é…¥', nameEn: 'Baked barbecued pork puff', category: 'é»å¿ƒ', per100g: { calories: 450, protein: 8.9, fat: 31, carbs: 32, sodium: 250, calcium: 15 }, perServing: { weight: 44, calories: 200, protein: 3.9, fat: 14, carbs: 14, sodium: 110, calcium: 6.6 }},
      { id: '71', name: 'è˜¿è””çµ²é…¥é¤…', nameEn: 'Puff pastries filled with shredded turnip', category: 'é»å¿ƒ', per100g: { calories: 290, protein: 3.2, fat: 19, carbs: 26, sodium: 320, calcium: 20 }, perServing: { weight: 72, calories: 210, protein: 2.3, fat: 13, carbs: 18, sodium: 230, calcium: 14 }},

      // æ°´æœ (Fruits) - é™„ä»¶VI
      { id: '72', name: 'ç‰›æ²¹æœ', nameEn: 'Avocado', category: 'æ°´æœ', per100g: { calories: 160, protein: 2.0, fat: 14.66, carbs: 8.53, sodium: 7, calcium: 12 }, perServing: { weight: 101, calories: 161, protein: 2.01, fat: 14.74, carbs: 8.58, sodium: 7, calcium: 12 }},
      { id: '73', name: 'é¦™è•‰', nameEn: 'Banana', category: 'æ°´æœ', per100g: { calories: 89, protein: 1.09, fat: 0.33, carbs: 22.84, sodium: 1, calcium: 5 }, perServing: { weight: 68, calories: 61, protein: 0.74, fat: 0.22, carbs: 15.53, sodium: 1, calcium: 3 }},
      { id: '74', name: 'é»‘åŠ ä¾–å­', nameEn: 'Black currant', category: 'æ°´æœ', per100g: { calories: 63, protein: 1.40, fat: 0.41, carbs: 15.38, sodium: 2, calcium: 55 }, perServing: { weight: 61, calories: 36, protein: 0.79, fat: 0.23, carbs: 8.62, sodium: 1, calcium: 31 }},
      { id: '75', name: 'ç½é ­æ¡ƒ', nameEn: 'Canned peach', category: 'æ°´æœ', per100g: { calories: 77, protein: 0.54, fat: 0.14, carbs: 19.79, sodium: 6, calcium: 3 }, perServing: { weight: 111, calories: 85, protein: 0.60, fat: 0.16, carbs: 21.97, sodium: 7, calcium: 3 }},
      { id: '76', name: 'ç½é ­è è˜¿', nameEn: 'Canned pineapple', category: 'æ°´æœ', per100g: { calories: 60, protein: 0.51, fat: 0.11, carbs: 15.56, sodium: 1, calcium: 16 }, perServing: { weight: 91, calories: 54, protein: 0.46, fat: 0.10, carbs: 14.08, sodium: 1, calcium: 14 }},
      { id: '77', name: 'ç«é¾æœ', nameEn: 'Dragon fruit', category: 'æ°´æœ', per100g: { calories: 61, protein: 1.1, fat: 1.4, carbs: 11, sodium: 0, calcium: 5.8 }, perServing: { weight: 175, calories: 107, protein: 1.9, fat: 2.5, carbs: 19, sodium: 0, calcium: 10.2 }},
      { id: '78', name: 'æ¦´æ§¤', nameEn: 'Durian', category: 'æ°´æœ', per100g: { calories: 147, protein: 1.47, fat: 5.33, carbs: 27.09, sodium: 2, calcium: 6 }, perServing: { weight: 122, calories: 179, protein: 1.79, fat: 6.48, carbs: 32.91, sodium: 2, calcium: 7 }},
      { id: '79', name: 'é¦™æ¢¨', nameEn: 'Fragrant pear', category: 'æ°´æœ', per100g: { calories: 58, protein: 0.3, fat: 0.3, carbs: 14, sodium: 0, calcium: 7.9 }, perServing: { weight: 122, calories: 71, protein: 0.4, fat: 0.4, carbs: 17, sodium: 0, calcium: 9.6 }},
      { id: '80', name: 'å¯Œå£«è˜‹æœ', nameEn: 'Fuji apple', category: 'æ°´æœ', per100g: { calories: 58, protein: 0, fat: 0.4, carbs: 14, sodium: 0, calcium: 4.9 }, perServing: { weight: 138, calories: 80, protein: 0, fat: 0.6, carbs: 19, sodium: 0, calcium: 6.8 }},
      { id: '81', name: 'æå­', nameEn: 'Grape', category: 'æ°´æœ', per100g: { calories: 68, protein: 0.6, fat: 0.6, carbs: 15, sodium: 0, calcium: 8.2 }, perServing: { weight: 75, calories: 51, protein: 0.5, fat: 0.5, carbs: 11, sodium: 0, calcium: 6.2 }},
      { id: '82', name: 'è¥¿æŸš', nameEn: 'Grapefruit', category: 'æ°´æœ', per100g: { calories: 32, protein: 0.63, fat: 0.10, carbs: 8.08, sodium: 0, calcium: 12 }, perServing: { weight: 128, calories: 41, protein: 0.81, fat: 0.13, carbs: 10.34, sodium: 0, calcium: 15 }},
      { id: '83', name: 'é’è˜‹æœ', nameEn: 'Green apple', category: 'æ°´æœ', per100g: { calories: 59, protein: 0.3, fat: 0.3, carbs: 14, sodium: 0, calcium: 6.2 }, perServing: { weight: 138, calories: 81, protein: 0.4, fat: 0.4, carbs: 19, sodium: 0, calcium: 8.6 }},
      { id: '84', name: 'ç•ªçŸ³æ¦´', nameEn: 'Guava', category: 'æ°´æœ', per100g: { calories: 68, protein: 2.55, fat: 0.95, carbs: 14.32, sodium: 2, calcium: 18 }, perServing: { weight: 55, calories: 37, protein: 1.40, fat: 0.52, carbs: 8.92, sodium: 1, calcium: 10 }},
      { id: '85', name: 'èœœæ¢¨', nameEn: 'Honey pear', category: 'æ°´æœ', per100g: { calories: 49, protein: 0.4, fat: 0, carbs: 12, sodium: 0, calcium: 4.0 }, perServing: { weight: 122, calories: 60, protein: 0.5, fat: 0, carbs: 15, sodium: 0, calcium: 4.9 }},
      { id: '86', name: 'å¥‡ç•°æœ', nameEn: 'Kiwi fruit', category: 'æ°´æœ', per100g: { calories: 61, protein: 1.14, fat: 0.52, carbs: 14.66, sodium: 3, calcium: 34 }, perServing: { weight: 76, calories: 46, protein: 0.87, fat: 0.40, carbs: 11.14, sodium: 2, calcium: 26 }},
      { id: '87', name: 'æª¸æª¬', nameEn: 'Lemon', category: 'æ°´æœ', per100g: { calories: 29, protein: 1.10, fat: 0.30, carbs: 9.32, sodium: 2, calcium: 26 }, perServing: { weight: 84, calories: 24, protein: 0.92, fat: 0.25, carbs: 7.83, sodium: 2, calcium: 22 }},
      { id: '88', name: 'é¾çœ¼', nameEn: 'Longan', category: 'æ°´æœ', per100g: { calories: 60, protein: 1.31, fat: 0.10, carbs: 15.14, sodium: 0, calcium: 1 }, perServing: { weight: 48, calories: 29, protein: 0.63, fat: 0.05, carbs: 7.27, sodium: 0, calcium: 0 }},
      { id: '89', name: 'è”æ', nameEn: 'Lychee', category: 'æ°´æœ', per100g: { calories: 66, protein: 0.83, fat: 0.44, carbs: 16.53, sodium: 1, calcium: 5 }, perServing: { weight: 95, calories: 63, protein: 0.79, fat: 0.42, carbs: 15.70, sodium: 1, calcium: 5 }},
      { id: '90', name: 'èŠ’æœ', nameEn: 'Mango', category: 'æ°´æœ', per100g: { calories: 65, protein: 0.51, fat: 0.27, carbs: 17.00, sodium: 2, calcium: 10 }, perServing: { weight: 104, calories: 67, protein: 0.53, fat: 0.28, carbs: 17.59, sodium: 2, calcium: 10 }},
      { id: '91', name: 'æ©™', nameEn: 'Orange', category: 'æ°´æœ', per100g: { calories: 47, protein: 0.94, fat: 0.12, carbs: 11.75, sodium: 0, calcium: 40 }, perServing: { weight: 131, calories: 62, protein: 1.23, fat: 0.16, carbs: 15.39, sodium: 0, calcium: 52 }},
      { id: '92', name: 'æœ¨ç“œ', nameEn: 'Papaya', category: 'æ°´æœ', per100g: { calories: 39, protein: 0.61, fat: 0.14, carbs: 9.81, sodium: 3, calcium: 24 }, perServing: { weight: 70, calories: 27, protein: 0.43, fat: 0.10, carbs: 6.87, sodium: 2, calcium: 17 }},
      { id: '93', name: 'æ¡ƒ', nameEn: 'Peach', category: 'æ°´æœ', per100g: { calories: 39, protein: 0.91, fat: 0.25, carbs: 9.54, sodium: 0, calcium: 6 }, perServing: { weight: 150, calories: 58, protein: 1.36, fat: 0.38, carbs: 14.31, sodium: 0, calcium: 9 }},
      { id: '94', name: 'è è˜¿', nameEn: 'Pineapple', category: 'æ°´æœ', per100g: { calories: 48, protein: 0.54, fat: 0.12, carbs: 12.63, sodium: 1, calcium: 13 }, perServing: { weight: 78, calories: 37, protein: 0.42, fat: 0.09, carbs: 9.79, sodium: 1, calcium: 10 }},
      { id: '95', name: 'æŸšå­', nameEn: 'Pomelo', category: 'æ°´æœ', per100g: { calories: 46, protein: 0.7, fat: 0.4, carbs: 9.8, sodium: 0, calcium: 14 }, perServing: { weight: 122, calories: 56, protein: 0.9, fat: 0.5, carbs: 12, sodium: 0, calcium: 17.1 }},
      { id: '96', name: 'è›‡æœ', nameEn: 'Red delicious apple', category: 'æ°´æœ', per100g: { calories: 61, protein: 0, fat: 0.4, carbs: 14, sodium: 0, calcium: 6.3 }, perServing: { weight: 138, calories: 84, protein: 0, fat: 0.6, carbs: 19, sodium: 0, calcium: 8.7 }},
      { id: '97', name: 'æ¥Šæ¡ƒ', nameEn: 'Starfruit', category: 'æ°´æœ', per100g: { calories: 31, protein: 1.04, fat: 0.33, carbs: 6.73, sodium: 2, calcium: 3 }, perServing: { weight: 62, calories: 19, protein: 0.64, fat: 0.20, carbs: 4.17, sodium: 1, calcium: 2 }},
      { id: '98', name: 'å£«å¤šå•¤æ¢¨', nameEn: 'Strawberry', category: 'æ°´æœ', per100g: { calories: 32, protein: 0.67, fat: 0.30, carbs: 7.68, sodium: 1, calcium: 16 }, perServing: { weight: 72, calories: 23, protein: 0.48, fat: 0.22, carbs: 5.53, sodium: 1, calcium: 12 }},
      { id: '99', name: 'æŸ‘', nameEn: 'Mandarin orange', category: 'æ°´æœ', per100g: { calories: 53, protein: 0.81, fat: 0.31, carbs: 13.34, sodium: 2, calcium: 37 }, perServing: { weight: 88, calories: 47, protein: 0.71, fat: 0.27, carbs: 11.74, sodium: 2, calcium: 33 }},
      { id: '100', name: 'è¥¿ç“œ', nameEn: 'Watermelon', category: 'æ°´æœ', per100g: { calories: 30, protein: 0.61, fat: 0.15, carbs: 7.55, sodium: 1, calcium: 7 }, perServing: { weight: 76, calories: 23, protein: 0.46, fat: 0.11, carbs: 5.74, sodium: 1, calcium: 5 }},
      { id: '101', name: 'è“®éœ§', nameEn: 'Wax jumbo', category: 'æ°´æœ', per100g: { calories: 37, protein: 0.6, fat: 0, carbs: 8.6, sodium: 0, calcium: 2.3 }, perServing: { weight: 120, calories: 44, protein: 0.7, fat: 0, carbs: 10, sodium: 0, calcium: 2.8 }},
      { id: '102', name: 'å•¤æ¢¨', nameEn: 'Western pear', category: 'æ°´æœ', per100g: { calories: 60, protein: 0, fat: 0, carbs: 15, sodium: 0, calcium: 6.5 }, perServing: { weight: 178, calories: 107, protein: 0, fat: 0, carbs: 27, sodium: 0, calcium: 11.6 }},

      // è”¬èœ (Vegetables) - é™„ä»¶V (åªæœ‰æ¯100å…‹è³‡æ–™)
      { id: '103', name: 'çµ²ç“œ', nameEn: 'Angled loofah', category: 'è”¬èœ', per100g: { calories: 20, protein: 1.1, fat: 0, carbs: 4.0, sodium: 0, calcium: 13 }},
      { id: '104', name: 'è˜†ç­', nameEn: 'Asparagus', category: 'è”¬èœ', per100g: { calories: 25, protein: 2.2, fat: 0.12, carbs: 3.88, sodium: 2, calcium: 24 }},
      { id: '105', name: 'è‹¦ç“œ', nameEn: 'Bitter cucumber', category: 'è”¬èœ', per100g: { calories: 16, protein: 0.7, fat: 0, carbs: 3.2, sodium: 0, calcium: 14 }},
      { id: '106', name: 'éŸ®é»ƒ', nameEn: 'Blanched Chinese chive', category: 'è”¬èœ', per100g: { calories: 19, protein: 1.5, fat: 0.3, carbs: 2.6, sodium: 0, calcium: 29 }},
      { id: '107', name: 'è¥¿è˜­èŠ±', nameEn: 'Broccoli', category: 'è”¬èœ', per100g: { calories: 33, protein: 3.1, fat: 0.5, carbs: 4.1, sodium: 21, calcium: 32 }},
      { id: '108', name: 'æ¤°èœ', nameEn: 'Cabbage', category: 'è”¬èœ', per100g: { calories: 22, protein: 1.3, fat: 0, carbs: 4.3, sodium: 19, calcium: 46 }},
      { id: '109', name: 'ç”˜ç­', nameEn: 'Carrot', category: 'è”¬èœ', per100g: { calories: 41, protein: 0.93, fat: 0.24, carbs: 9.58, sodium: 69, calcium: 33 }},
      { id: '110', name: 'æ¤°èœèŠ±', nameEn: 'Cauliflower', category: 'è”¬èœ', per100g: { calories: 25, protein: 1.98, fat: 0.10, carbs: 5.30, sodium: 30, calcium: 22 }},
      { id: '111', name: 'è¥¿èŠ¹', nameEn: 'Celery', category: 'è”¬èœ', per100g: { calories: 16, protein: 0.69, fat: 0.17, carbs: 2.97, sodium: 80, calcium: 40 }},
      { id: '112', name: 'ä½›æ‰‹ç“œ', nameEn: 'Chayote', category: 'è”¬èœ', per100g: { calories: 17, protein: 0.82, fat: 0.13, carbs: 3.90, sodium: 2, calcium: 17 }},
      { id: '113', name: 'é»ƒèŠ½ç™½', nameEn: 'Chinese cabbage', category: 'è”¬èœ', per100g: { calories: 16, protein: 1.20, fat: 0.20, carbs: 3.23, sodium: 9, calcium: 77 }},
      { id: '114', name: 'éŸ®èœèŠ±', nameEn: 'Chinese chive (Flower Stalks)', category: 'è”¬èœ', per100g: { calories: 40, protein: 2.3, fat: 0.4, carbs: 6.8, sodium: 0, calcium: 26 }},
      { id: '115', name: 'éŸ®èœ', nameEn: 'Chinese chive', category: 'è”¬èœ', per100g: { calories: 30, protein: 2.2, fat: 0.4, carbs: 4.3, sodium: 0, calcium: 110 }},
      { id: '116', name: 'èœå¿ƒ', nameEn: 'Chinese flowering cabbage', category: 'è”¬èœ', per100g: { calories: 18, protein: 2.1, fat: 0.3, carbs: 1.6, sodium: 30, calcium: 100 }},
      { id: '117', name: 'èŠ¥è˜­', nameEn: 'Chinese kale', category: 'è”¬èœ', per100g: { calories: 34, protein: 3.0, fat: 0.6, carbs: 4.1, sodium: 18, calcium: 140 }},
      { id: '118', name: 'å”ç”Ÿèœ', nameEn: 'Chinese lettuce', category: 'è”¬èœ', per100g: { calories: 8.4, protein: 1.0, fat: 0, carbs: 1.1, sodium: 8, calcium: 28 }},
      { id: '119', name: 'è§èœ', nameEn: 'Chinese Spinach', category: 'è”¬èœ', per100g: { calories: 21, protein: 1.9, fat: 0.4, carbs: 2.5, sodium: 15, calcium: 140 }},
      { id: '120', name: 'é’ç“œ', nameEn: 'Cucumber', category: 'è”¬èœ', per100g: { calories: 10, protein: 0.7, fat: 0, carbs: 1.8, sodium: 0, calcium: 20 }},
      { id: '121', name: 'èŒ„å­', nameEn: 'Eggplant', category: 'è”¬èœ', per100g: { calories: 26, protein: 1.0, fat: 0, carbs: 5.6, sodium: 0, calcium: 14 }},
      { id: '122', name: 'å››å­£è±†', nameEn: 'French bean', category: 'è”¬èœ', per100g: { calories: 34, protein: 1.9, fat: 0.3, carbs: 6.0, sodium: 0, calcium: 49 }},
      { id: '123', name: 'ç¢—è±†', nameEn: 'Garden peas', category: 'è”¬èœ', per100g: { calories: 42, protein: 2.8, fat: 0.20, carbs: 7.55, sodium: 4, calcium: 43 }},
      { id: '124', name: 'èŒ¼è’¿', nameEn: 'Garland Chrysanthemum', category: 'è”¬èœ', per100g: { calories: 24, protein: 3.36, fat: 0.56, carbs: 3.02, sodium: 118, calcium: 117 }},
      { id: '125', name: 'é’é€šèœ', nameEn: 'Green water spinach', category: 'è”¬èœ', per100g: { calories: 23, protein: 2.0, fat: 0.4, carbs: 2.9, sodium: 32, calcium: 59 }},
      { id: '126', name: 'ç¯€ç“œ', nameEn: 'Hairy gourd', category: 'è”¬èœ', per100g: { calories: 20, protein: 0.8, fat: 0, carbs: 4.1, sodium: 0, calcium: 15 }},
      { id: '127', name: 'èœœç³–è±†', nameEn: 'Honey peas', category: 'è”¬èœ', per100g: { calories: 48, protein: 3.3, fat: 0, carbs: 8.6, sodium: 0, calcium: 44 }},
      { id: '128', name: 'éº¥èœ', nameEn: 'Indian lettuce', category: 'è”¬èœ', per100g: { calories: 23, protein: 1.2, fat: 0.4, carbs: 3.6, sodium: 13, calcium: 44 }},
      { id: '129', name: 'è¥¿ç”Ÿèœ', nameEn: 'Lettuce', category: 'è”¬èœ', per100g: { calories: 11, protein: 0.9, fat: 0, carbs: 1.9, sodium: 51, calcium: 57 }},
      { id: '130', name: 'è“®è—•', nameEn: 'Lotus root', category: 'è”¬èœ', per100g: { calories: 74, protein: 2.6, fat: 0.10, carbs: 17.23, sodium: 40, calcium: 45 }},
      { id: '131', name: 'èŠ¥èœ', nameEn: 'Mustard leaf', category: 'è”¬èœ', per100g: { calories: 27, protein: 2.1, fat: 0.5, carbs: 3.4, sodium: 9, calcium: 110 }},
      { id: '132', name: 'æ´‹è‘±', nameEn: 'Onions', category: 'è”¬èœ', per100g: { calories: 40, protein: 1.10, fat: 0.10, carbs: 9.34, sodium: 4, calcium: 23 }},
      { id: '133', name: 'è±†è‹—', nameEn: 'Pea shoots', category: 'è”¬èœ', per100g: { calories: 38, protein: 4.2, fat: 0.7, carbs: 3.8, sodium: 0, calcium: 49 }},
      { id: '134', name: 'å—ç“œ', nameEn: 'Pumpkin', category: 'è”¬èœ', per100g: { calories: 26, protein: 1.00, fat: 0.10, carbs: 6.50, sodium: 1, calcium: 21 }},
      { id: '135', name: 'è˜¿è””', nameEn: 'Radish', category: 'è”¬èœ', per100g: { calories: 18, protein: 0.8, fat: 0, carbs: 3.7, sodium: 24, calcium: 21 }},
      { id: '136', name: 'å°å”èœ', nameEn: 'Shanghai white cabbage', category: 'è”¬èœ', per100g: { calories: 18, protein: 2.3, fat: 0.3, carbs: 1.6, sodium: 35, calcium: 97 }},
      { id: '137', name: 'å°ç™½èœ', nameEn: 'Small Chinese white cabbage', category: 'è”¬èœ', per100g: { calories: 20, protein: 2.7, fat: 0.4, carbs: 1.5, sodium: 18, calcium: 140 }},
      { id: '138', name: 'è èœ', nameEn: 'Spinach', category: 'è”¬èœ', per100g: { calories: 21, protein: 2.3, fat: 0.4, carbs: 2.0, sodium: 5, calcium: 18 }},
      { id: '139', name: 'è¥¿æ¤’', nameEn: 'Sweet pepper', category: 'è”¬èœ', per100g: { calories: 21, protein: 0.8, fat: 0, carbs: 4.5, sodium: 0, calcium: 11 }},
      { id: '140', name: 'è•ƒèŒ„', nameEn: 'Tomato', category: 'è”¬èœ', per100g: { calories: 18, protein: 0.7, fat: 0, carbs: 3.9, sodium: 0, calcium: 9.7 }},
      { id: '141', name: 'æ°´èŠ¹', nameEn: 'Water celery', category: 'è”¬èœ', per100g: { calories: 16, protein: 1.4, fat: 0, carbs: 2.6, sodium: 73, calcium: 120 }},
      { id: '142', name: 'é¦¬è¹„', nameEn: 'Water chestnut', category: 'è”¬èœ', per100g: { calories: 56, protein: 1.0, fat: 0, carbs: 13, sodium: 0, calcium: 4.5 }},
      { id: '143', name: 'è¥¿æ´‹èœ', nameEn: 'Watercress', category: 'è”¬èœ', per100g: { calories: 19, protein: 1.6, fat: 0.3, carbs: 2.4, sodium: 66, calcium: 81 }},
      { id: '144', name: 'å†¬ç“œ', nameEn: 'Wax gourd / Winter melon', category: 'è”¬èœ', per100g: { calories: 13, protein: 0.4, fat: 0, carbs: 2.9, sodium: 0, calcium: 8.3 }},
      { id: '145', name: 'ç™½èœ', nameEn: 'White cabbage', category: 'è”¬èœ', per100g: { calories: 15, protein: 1.9, fat: 0, carbs: 1.9, sodium: 50, calcium: 140 }},
      { id: '146', name: 'ç™½é€šèœ', nameEn: 'White water spinach', category: 'è”¬èœ', per100g: { calories: 16, protein: 1.5, fat: 0, carbs: 2.4, sodium: 47, calcium: 60 }},
      { id: '147', name: 'ç‹èœ(å¨ƒå¨ƒèœ)', nameEn: 'Wong Choi cabbage', category: 'è”¬èœ', per100g: { calories: 16, protein: 1.5, fat: 0, carbs: 2.5, sodium: 20, calcium: 47 }},
      { id: '148', name: 'é’è±†è§’', nameEn: 'Yardlong bean', category: 'è”¬èœ', per100g: { calories: 47, protein: 2.80, fat: 0.40, carbs: 8.35, sodium: 4, calcium: 50 }},

      // éº¥ç•¶å‹ (McDonald's Hong Kong) - ç›´æ¥å¾å®˜æ–¹PDF 2020è¤‡è£½
      // æ²™å¾‹ Salad
      { id: '149', name: 'å‡±æ’’æ²™å¾‹', nameEn: 'Caesar Salad', category: 'éº¥ç•¶å‹', perServing: { calories: 127, protein: 7.4, fat: 6.7, carbs: 9.9, sodium: 364 }, per100g: { calories: 102, protein: 5.9, fat: 5.3, carbs: 8.0, sodium: 291 }},
      { id: '150', name: 'çƒ¤é›å‡±æ’’æ²™å¾‹', nameEn: 'Grilled Chicken Caesar Salad', category: 'éº¥ç•¶å‹', perServing: { calories: 248, protein: 24.2, fat: 11.4, carbs: 12.4, sodium: 936 }, per100g: { calories: 121, protein: 11.8, fat: 5.6, carbs: 6.0, sodium: 457 }},

      // æ—©æ™¨æ‹¼ç›¤åŠæ‰­æ‰­ç²‰ Breakfast Platter and Twisty Pasta
      { id: '151', name: 'ç²¾é¸æ—©æ™¨å¥—é¤', nameEn: 'Deluxe Breakfast', category: 'éº¥ç•¶å‹', perServing: { calories: 597, protein: 23.3, fat: 38.5, carbs: 38.2, sodium: 1063 }, per100g: { calories: 238, protein: 9.3, fat: 15.3, carbs: 15.2, sodium: 424 }},
      { id: '152', name: 'ç†±é¦™é¤… (3ä»¶)', nameEn: 'Hotcakes (3 pcs)', category: 'éº¥ç•¶å‹', perServing: { calories: 273, protein: 7.6, fat: 4.7, carbs: 49.9, sodium: 864 }, per100g: { calories: 173, protein: 4.8, fat: 3.0, carbs: 31.6, sodium: 547 }},
      { id: '153', name: 'ç†±é¦™é¤… (2ä»¶)', nameEn: 'Hotcakes (2 pcs)', category: 'éº¥ç•¶å‹', perServing: { calories: 182, protein: 5.1, fat: 3.1, carbs: 33.3, sodium: 576 }, per100g: { calories: 171, protein: 4.8, fat: 3.0, carbs: 31.5, sodium: 544 }},
      { id: '154', name: 'æ¿ç‡’é›è…¿æ‰­æ‰­ç²‰ (é›æ¹¯åŸå‘³)', nameEn: 'Grilled Chicken Twisty Pasta (Chicken flavor)', category: 'éº¥ç•¶å‹', perServing: { calories: 332, protein: 26.0, fat: 6.4, carbs: 42.9, sodium: 2010 }, per100g: { calories: 56, protein: 4.4, fat: 1.1, carbs: 7.2, sodium: 339 }},
      { id: '155', name: 'Minié›œèœè›‹æ‰­æ‰­ç²‰', nameEn: 'Mixed Veggies Egg Mini Twisty Pasta', category: 'éº¥ç•¶å‹', perServing: { calories: 163, protein: 10.0, fat: 5.1, carbs: 19.2, sodium: 621 }, per100g: { calories: 68, protein: 4.2, fat: 2.1, carbs: 8.1, sodium: 261 }},

      // é£½é¡ Burgers
      { id: '156', name: 'éº¥èŠè›‹é£½', nameEn: 'Egg & Cheese Burger', category: 'éº¥ç•¶å‹', perServing: { calories: 302, protein: 14.1, fat: 13.6, carbs: 30.1, sodium: 725 }, per100g: { calories: 227, protein: 10.6, fat: 10.2, carbs: 22.6, sodium: 545 }},
      { id: '157', name: 'ç…™è‚‰è›‹æ¼¢å ¡', nameEn: 'Egg McMuffin', category: 'éº¥ç•¶å‹', perServing: { calories: 266, protein: 17.9, fat: 10.2, carbs: 25.0, sodium: 771 }, per100g: { calories: 207, protein: 13.9, fat: 7.9, carbs: 19.4, sodium: 598 }},
      { id: '158', name: 'ç«è…¿æ‰’èŠå£«æ¼¢å ¡', nameEn: "Ham N' Cheese Burger", category: 'éº¥ç•¶å‹', perServing: { calories: 346, protein: 12.9, fat: 20.4, carbs: 27.0, sodium: 701 }, per100g: { calories: 326, protein: 12.2, fat: 19.2, carbs: 25.5, sodium: 661 }},
      { id: '159', name: 'å·¨ç„¡éœ¸', nameEn: 'Big Mac', category: 'éº¥ç•¶å‹', perServing: { calories: 496, protein: 25.6, fat: 24.6, carbs: 42.7, sodium: 938 }, per100g: { calories: 232, protein: 11.9, fat: 11.5, carbs: 19.9, sodium: 438 }},
      { id: '160', name: 'èŠå£«æ¼¢å ¡é£½', nameEn: 'Cheeseburger', category: 'éº¥ç•¶å‹', perServing: { calories: 294, protein: 15.5, fat: 12.4, carbs: 29.8, sodium: 686 }, per100g: { calories: 258, protein: 13.6, fat: 10.9, carbs: 26.2, sodium: 602 }},
      { id: '161', name: 'é›™å±¤èŠå£«å­–å ¡', nameEn: 'Double Cheeseburger', category: 'éº¥ç•¶å‹', perServing: { calories: 434, protein: 25.6, fat: 22.9, carbs: 30.8, sodium: 1019 }, per100g: { calories: 264, protein: 15.6, fat: 13.9, carbs: 18.8, sodium: 621 }},
      { id: '162', name: 'é­šæŸ³é£½', nameEn: 'Filet-O-Fish', category: 'éº¥ç•¶å‹', perServing: { calories: 337, protein: 15.0, fat: 14.4, carbs: 36.7, sodium: 598 }, per100g: { calories: 240, protein: 10.7, fat: 10.3, carbs: 26.2, sodium: 427 }},
      { id: '163', name: 'æ¼¢å ¡é£½', nameEn: 'Hamburger', category: 'éº¥ç•¶å‹', perServing: { calories: 245, protein: 12.6, fat: 8.5, carbs: 29.4, sodium: 499 }, per100g: { calories: 245, protein: 12.6, fat: 8.5, carbs: 29.4, sodium: 499 }},
      { id: '164', name: 'éº¥é¦™é›', nameEn: 'McChicken', category: 'éº¥ç•¶å‹', perServing: { calories: 382, protein: 14.6, fat: 18.1, carbs: 40.0, sodium: 780 }, per100g: { calories: 227, protein: 8.7, fat: 10.8, carbs: 23.8, sodium: 465 }},
      { id: '165', name: 'è„†è¾£é›è…¿é£½', nameEn: 'McSpicy Chicken Filet', category: 'éº¥ç•¶å‹', perServing: { calories: 461, protein: 18.5, fat: 24.3, carbs: 41.7, sodium: 1094 }, per100g: { calories: 241, protein: 9.7, fat: 12.7, carbs: 21.9, sodium: 573 }},
      { id: '166', name: 'æ¿ç‡’é›è…¿é£½', nameEn: 'GCB', category: 'éº¥ç•¶å‹', perServing: { calories: 358, protein: 23.0, fat: 14.6, carbs: 33.4, sodium: 1001 }, per100g: { calories: 205, protein: 13.1, fat: 8.3, carbs: 19.1, sodium: 572 }},
      { id: '167', name: 'è±¬æŸ³æ¼¢å ¡', nameEn: 'Sausage McMuffin', category: 'éº¥ç•¶å‹', perServing: { calories: 361, protein: 14.9, fat: 22.4, carbs: 24.6, sodium: 753 }, per100g: { calories: 328, protein: 13.6, fat: 20.4, carbs: 22.4, sodium: 684 }},
      { id: '168', name: 'è±¬æŸ³è›‹æ¼¢å ¡', nameEn: 'Sausage McMuffin with Egg', category: 'éº¥ç•¶å‹', perServing: { calories: 427, protein: 20.7, fat: 26.8, carbs: 24.9, sodium: 890 }, per100g: { calories: 272, protein: 13.2, fat: 17.1, carbs: 15.9, sodium: 567 }},
      { id: '169', name: 'è˜‘è‡å®‰æ ¼æ–¯', nameEn: 'Cheesy Champignon Angus Burger', category: 'éº¥ç•¶å‹', perServing: { calories: 644, protein: 36.2, fat: 38.7, carbs: 37.3, sodium: 1045 }, per100g: { calories: 247, protein: 13.9, fat: 14.8, carbs: 14.3, sodium: 400 }},
      { id: '170', name: 'èŠå£«å®‰æ ¼æ–¯', nameEn: 'Angus Original', category: 'éº¥ç•¶å‹', perServing: { calories: 580, protein: 34.8, fat: 32.2, carbs: 37.8, sodium: 988 }, per100g: { calories: 271, protein: 16.3, fat: 15.0, carbs: 17.7, sodium: 462 }},

      // å…¶ä»– Snacks and Sides
      { id: '171', name: 'ç²’ç²’ç²Ÿç±³æ¯', nameEn: 'Fresh Corn Cup', category: 'éº¥ç•¶å‹', perServing: { calories: 81, protein: 3.2, fat: 2.0, carbs: 12.6, sodium: 5 }, per100g: { calories: 64, protein: 2.5, fat: 1.6, carbs: 9.9, sodium: 4 }},
      { id: '172', name: 'ç²’ç²’ç²Ÿç±³æ¯ (ç´°)', nameEn: 'Fresh Corn Cup (S)', category: 'éº¥ç•¶å‹', perServing: { calories: 54, protein: 2.1, fat: 1.3, carbs: 8.4, sodium: 3 }, per100g: { calories: 64, protein: 2.5, fat: 1.6, carbs: 9.9, sodium: 4 }},
      { id: '173', name: 'è„†è–¯é¤…', nameEn: 'Hash Browns', category: 'éº¥ç•¶å‹', perServing: { calories: 138, protein: 1.3, fat: 9.1, carbs: 12.4, sodium: 354 }, per100g: { calories: 246, protein: 2.4, fat: 16.3, carbs: 22.2, sodium: 632 }},
      { id: '174', name: 'éº¥æ¨‚é› (6ä»¶)', nameEn: 'Chicken McNuggets (6 pcs)', category: 'éº¥ç•¶å‹', perServing: { calories: 316, protein: 18.3, fat: 21.5, carbs: 12.1, sodium: 557 }, per100g: { calories: 264, protein: 15.3, fat: 18.0, carbs: 10.1, sodium: 466 }},
      { id: '175', name: 'è–¯æ¢ (ä¸­)', nameEn: 'Fries (M)', category: 'éº¥ç•¶å‹', perServing: { calories: 313, protein: 4.7, fat: 16.7, carbs: 35.8, sodium: 198 }, per100g: { calories: 285, protein: 4.3, fat: 15.2, carbs: 32.6, sodium: 180 }},
      { id: '176', name: 'è–¯æ¢ (ç´°)', nameEn: 'Fries (S)', category: 'éº¥ç•¶å‹', perServing: { calories: 225, protein: 3.4, fat: 12.0, carbs: 25.8, sodium: 143 }, per100g: { calories: 285, protein: 4.3, fat: 15.2, carbs: 32.6, sodium: 181 }},
      { id: '177', name: 'è„†é¦™é›ç¿¼ (2ä»¶)', nameEn: 'McWings (2 pcs)', category: 'éº¥ç•¶å‹', perServing: { calories: 242, protein: 14.6, fat: 16.7, carbs: 8.1, sodium: 564 }, per100g: { calories: 279, protein: 16.9, fat: 19.3, carbs: 9.4, sodium: 652 }},

      // ç”œå“ Desserts
      { id: '178', name: 'è˜‹æœæ‰¹', nameEn: 'Apple Pie', category: 'éº¥ç•¶å‹', perServing: { calories: 228, protein: 2.3, fat: 13.3, carbs: 24.9, sodium: 187 }, per100g: { calories: 272, protein: 2.7, fat: 15.8, carbs: 29.7, sodium: 222 }},
      { id: '179', name: 'æ–°åœ°ç­’', nameEn: 'Twist Cone', category: 'éº¥ç•¶å‹', perServing: { calories: 137, protein: 3.2, fat: 4.4, carbs: 21.3, sodium: 88 }, per100g: { calories: 153, protein: 3.5, fat: 4.9, carbs: 23.7, sodium: 97 }},
      { id: '180', name: 'æœ±å¤åŠ›æ–°åœ°', nameEn: 'Hot Fudge Sundae', category: 'éº¥ç•¶å‹', perServing: { calories: 343, protein: 6.5, fat: 13.1, carbs: 49.7, sodium: 177 }, per100g: { calories: 193, protein: 3.7, fat: 7.3, carbs: 27.9, sodium: 99 }},
      { id: '181', name: 'è—è“é«˜éˆ£ä½è„‚ä¹³é…ª', nameEn: 'Hi-Calcium Low Fat Blueberry Yoghurt', category: 'éº¥ç•¶å‹', perServing: { calories: 75, protein: 3.3, fat: 1.0, carbs: 13.2, sodium: 42 }, per100g: { calories: 75, protein: 3.3, fat: 1.0, carbs: 13.2, sodium: 42 }},

      // é£²å“ Beverages
      { id: '182', name: 'å¯å£å¯æ¨‚æ±½æ°´ (ä¸­)', nameEn: 'Coca-Cola (M)', category: 'éº¥ç•¶å‹', perServing: { calories: 148, protein: 0, fat: 0, carbs: 36.5, sodium: 7 }, per100g: { calories: 34, protein: 0, fat: 0, carbs: 8.5, sodium: 2 }},
      { id: '183', name: 'ç¾ç²’æœæ©™æ± (ç´°)', nameEn: 'Minute Maid Orange Juice (S)', category: 'éº¥ç•¶å‹', perServing: { calories: 94, protein: 1.4, fat: 0, carbs: 20.1, sodium: 2 }, per100g: { calories: 48, protein: 0.7, fat: 0, carbs: 10.3, sodium: 1 }},
      { id: '184', name: 'ç†±æ–°é®®æª¸æª¬èŒ¶', nameEn: 'Hot Fresh Lemon Tea', category: 'éº¥ç•¶å‹', perServing: { calories: 12, protein: 0.4, fat: 0.4, carbs: 2.2, sodium: 5 }, per100g: { calories: 5, protein: 0.2, fat: 0.2, carbs: 0.9, sodium: 2 }},
      { id: '185', name: 'ç†±æ–°é®®æª¸æª¬æ°´', nameEn: 'Hot Fresh Lemon Water', category: 'éº¥ç•¶å‹', perServing: { calories: 9, protein: 0, fat: 0, carbs: 1.7, sodium: 0 }, per100g: { calories: 4, protein: 0, fat: 0, carbs: 0.7, sodium: 0 }},
      { id: '186', name: 'å‡æ–°é®®æª¸æª¬èŒ¶', nameEn: 'Iced Fresh Lemon Tea', category: 'éº¥ç•¶å‹', perServing: { calories: 10, protein: 0.4, fat: 0.4, carbs: 2.2, sodium: 5 }, per100g: { calories: 3, protein: 0.1, fat: 0.1, carbs: 0.6, sodium: 1 }},
      { id: '187', name: 'å¥¶èŒ¶', nameEn: 'Hot Tea', category: 'éº¥ç•¶å‹', perServing: { calories: 2, protein: 0, fat: 0, carbs: 0.7, sodium: 0 }, per100g: { calories: 1, protein: 0, fat: 0, carbs: 0.3, sodium: 0 }},
      { id: '188', name: 'ç†±æ¸¯å¼å¥¶èŒ¶ (ç´°)', nameEn: 'Hot Local Milk Tea (S)', category: 'éº¥ç•¶å‹', perServing: { calories: 70, protein: 2.7, fat: 4.0, carbs: 5.7, sodium: 54 }, per100g: { calories: 33, protein: 1.3, fat: 1.9, carbs: 2.7, sodium: 25 }},
      { id: '189', name: 'å„ªè³ªæ¿ƒé¦™å’–å•¡ (ç´°)', nameEn: 'Premium Roast Coffee (S)', category: 'éº¥ç•¶å‹', perServing: { calories: 3, protein: 0, fat: 0, carbs: 0, sodium: 5 }, per100g: { calories: 1, protein: 0, fat: 0, carbs: 0, sodium: 2 }},
      { id: '190', name: 'å„ªå“è±†æ¼¿', nameEn: 'Soy Milk', category: 'éº¥ç•¶å‹', perServing: { calories: 169, protein: 6.1, fat: 2.9, carbs: 29.0, sodium: 52 }, per100g: { calories: 75, protein: 2.7, fat: 1.3, carbs: 12.9, sodium: 23 }},
      { id: '191', name: 'é«˜éˆ£ä½è„‚ç‰›å¥¶é£²å“', nameEn: 'Hi-Calcium Low Fat Milk Drink', category: 'éº¥ç•¶å‹', perServing: { calories: 139, protein: 10.4, fat: 3.5, carbs: 16.8, sodium: 137 }, per100g: { calories: 59, protein: 4.4, fat: 1.5, carbs: 7.1, sodium: 58 }},
      { id: '192', name: 'Qooè³å¥¶é£²å“', nameEn: 'Qoo Soya Milk', category: 'éº¥ç•¶å‹', perServing: { calories: 72, protein: 1.4, fat: 2.4, carbs: 11.4, sodium: 88 }, per100g: { calories: 36, protein: 0.7, fat: 1.2, carbs: 5.7, sodium: 44 }},
      { id: '193', name: 'ç†±æœ±å¤åŠ›', nameEn: 'Hot Chocolate', category: 'éº¥ç•¶å‹', perServing: { calories: 56, protein: 0.6, fat: 1.6, carbs: 9.9, sodium: 64 }, per100g: { calories: 25, protein: 0.3, fat: 0.7, carbs: 4.4, sodium: 28 }},

      // McCafÃ© ç†±é£² McCafÃ© Hot Beverages
      { id: '194', name: 'æ¿ƒé»‘å’–å•¡ (ä¸­)', nameEn: 'Long Black (M)', category: 'éº¥ç•¶å‹', perServing: { calories: 24, protein: 1.6, fat: 0.5, carbs: 4.2, sodium: 0 }, per100g: { calories: 7, protein: 0.5, fat: 0, carbs: 1.3, sodium: 0 }},
      { id: '195', name: 'é®®å¥¶å’–å•¡ (ä¸­)', nameEn: 'Latte (M)', category: 'éº¥ç•¶å‹', perServing: { calories: 132, protein: 6.7, fat: 7.0, carbs: 10.6, sodium: 88 }, per100g: { calories: 51, protein: 2.6, fat: 2.7, carbs: 4.1, sodium: 34 }},
      { id: '196', name: 'æ„å¤§åˆ©æ³¡æ²«å’–å•¡ (ä¸­)', nameEn: 'Cappuccino (M)', category: 'éº¥ç•¶å‹', perServing: { calories: 141, protein: 7.1, fat: 6.7, carbs: 13.1, sodium: 85 }, per100g: { calories: 50, protein: 2.5, fat: 2.4, carbs: 4.6, sodium: 30 }},

      // ç²¥ç²‰éºªé£¯ - ç²¥ (Congee)
      { id: '197', name: 'ç™½ç²¥', nameEn: 'Plain Congee', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 32, protein: 0.71, fat: 0.69, carbs: 5.8, sodium: 29, calcium: 5.5 }, perServing: { weight: 450, calories: 140, protein: 3.2, fat: 3.1, carbs: 26, sodium: 130, calcium: 25 }},
      { id: '198', name: 'çš®è›‹ç˜¦è‚‰ç²¥', nameEn: 'Congee with Preserved Egg and Lean Pork', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 56, protein: 3.4, fat: 2.5, carbs: 4.8, sodium: 280, calcium: 9.8 }, perServing: { weight: 470, calories: 260, protein: 16, fat: 12, carbs: 22, sodium: 1300, calcium: 46 }},
      { id: '199', name: 'æŸ´é­šèŠ±ç”Ÿç²¥', nameEn: 'Congee with Dried Fish and Peanut', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 64, protein: 3.2, fat: 3.3, carbs: 5.5, sodium: 240, calcium: 18 }, perServing: { weight: 470, calories: 300, protein: 15, fat: 15, carbs: 26, sodium: 1100, calcium: 84 }},
      { id: '200', name: 'è‰‡ä»”ç²¥', nameEn: 'Sampan Congee', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 66, protein: 2.9, fat: 3.1, carbs: 6.8, sodium: 280, calcium: 7.6 }, perServing: { weight: 450, calories: 300, protein: 13, fat: 14, carbs: 31, sodium: 1300, calcium: 34 }},
      { id: '201', name: 'åŠç¬¬ç²¥', nameEn: 'Congee with Pork Offal', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 63, protein: 4.5, fat: 2.5, carbs: 5.8, sodium: 310, calcium: 7.6 }, perServing: { weight: 500, calories: 310, protein: 22, fat: 12, carbs: 29, sodium: 1500, calcium: 38 }},

      // ç²¥ç²‰éºªé£¯ - æ¹¯ç²‰éºª (Noodles in Soup)
      { id: '202', name: 'æ°´é¤ƒæ¹¯ç²—éºªæ¢', nameEn: 'Dumpling Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 66, protein: 4.8, fat: 1.6, carbs: 8.1, sodium: 440, calcium: 15 }, perServing: { weight: 580, calories: 380, protein: 28, fat: 9.3, carbs: 47, sodium: 2500, calcium: 87 }},
      { id: '203', name: 'é›²åæ¹¯ç²—éºªæ¢', nameEn: 'Wonton Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 67, protein: 5.3, fat: 1.8, carbs: 7.5, sodium: 460, calcium: 16 }, perServing: { weight: 630, calories: 420, protein: 33, fat: 11, carbs: 47, sodium: 2900, calcium: 100 }},
      { id: '204', name: 'é›²åæ¹¯å¹¼éºªæ¢', nameEn: 'Wonton Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 71, protein: 5.2, fat: 2.2, carbs: 7.5, sodium: 460, calcium: 17 }, perServing: { weight: 630, calories: 450, protein: 33, fat: 14, carbs: 47, sodium: 2900, calcium: 110 }},
      { id: '205', name: 'é›²åæ¹¯ç±³ç²‰', nameEn: 'Wonton Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 72, protein: 3.3, fat: 1.6, carbs: 11, sodium: 290, calcium: 16 }, perServing: { weight: 720, calories: 520, protein: 24, fat: 11, carbs: 79, sodium: 2100, calcium: 110 }},
      { id: '206', name: 'é›²åæ¹¯æ²³ç²‰', nameEn: 'Wonton Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 79, protein: 2.8, fat: 1.8, carbs: 13, sodium: 260, calcium: 14 }, perServing: { weight: 720, calories: 570, protein: 20, fat: 13, carbs: 94, sodium: 1900, calcium: 100 }},
      { id: '207', name: 'é­šçš®é¤ƒæ¹¯æ²³ç²‰', nameEn: 'Fish Skin Dumpling Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 83, protein: 2.4, fat: 2.3, carbs: 13, sodium: 260, calcium: 14 }, perServing: { weight: 670, calories: 550, protein: 16, fat: 15, carbs: 87, sodium: 1700, calcium: 94 }},
      { id: '208', name: 'é­šçš®é¤ƒæ¹¯å¹¼éºªæ¢', nameEn: 'Fish Skin Dumpling Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 70, protein: 4.4, fat: 2.3, carbs: 7.8, sodium: 410, calcium: 14 }, perServing: { weight: 590, calories: 410, protein: 26, fat: 14, carbs: 46, sodium: 2400, calcium: 82 }},
      { id: '209', name: 'é­šçš®é¤ƒæ¹¯ç±³ç²‰', nameEn: 'Fish Skin Dumpling Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 85, protein: 3.3, fat: 2.6, carbs: 12, sodium: 320, calcium: 15 }, perServing: { weight: 660, calories: 560, protein: 22, fat: 17, carbs: 79, sodium: 2100, calcium: 99 }},
      { id: '210', name: 'é­šçš®é¤ƒæ¹¯ç²—éºªæ¢', nameEn: 'Fish Skin Dumpling Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 86, protein: 5, fat: 3.5, carbs: 8.7, sodium: 460, calcium: 21 }, perServing: { weight: 590, calories: 500, protein: 29, fat: 20, carbs: 51, sodium: 2700, calcium: 120 }},
      { id: '211', name: 'ç‰›è…©æ¹¯ç²—éºªæ¢', nameEn: 'Beef Brisket Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 84, protein: 7.5, fat: 2.5, carbs: 7.9, sodium: 480, calcium: 12 }, perServing: { weight: 620, calories: 520, protein: 46, fat: 15, carbs: 49, sodium: 3000, calcium: 74 }},
      { id: '212', name: 'ç‰›è…©æ¹¯å¹¼éºªæ¢', nameEn: 'Beef Brisket Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 86, protein: 7.9, fat: 2.7, carbs: 7.6, sodium: 490, calcium: 11 }, perServing: { weight: 640, calories: 550, protein: 50, fat: 17, carbs: 48, sodium: 3100, calcium: 70 }},
      { id: '213', name: 'ç‰›è…©æ¹¯ç±³ç²‰', nameEn: 'Beef Brisket Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 87, protein: 7, fat: 2.1, carbs: 10, sodium: 270, calcium: 13 }, perServing: { weight: 700, calories: 610, protein: 49, fat: 15, carbs: 70, sodium: 1900, calcium: 91 }},
      { id: '214', name: 'ç‰›è…©æ¹¯æ²³ç²‰', nameEn: 'Beef Brisket Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 93, protein: 5.6, fat: 2.6, carbs: 12, sodium: 270, calcium: 12 }, perServing: { weight: 720, calories: 670, protein: 40, fat: 19, carbs: 86, sodium: 1900, calcium: 86 }},
      { id: '215', name: 'ç‰›ç­‹æ¹¯æ²³ç²‰', nameEn: 'Beef Tendon Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 83, protein: 6.7, fat: 1.3, carbs: 11, sodium: 310, calcium: 10 }, perServing: { weight: 680, calories: 560, protein: 45, fat: 8.8, carbs: 75, sodium: 2100, calcium: 68 }},
      { id: '216', name: 'ç‰›ç­‹æ¹¯å¹¼éºªæ¢', nameEn: 'Beef Tendon Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 77, protein: 9, fat: 1.5, carbs: 6.9, sodium: 510, calcium: 12 }, perServing: { weight: 620, calories: 480, protein: 56, fat: 9.3, carbs: 43, sodium: 3200, calcium: 75 }},
      { id: '217', name: 'ç‰›ç­‹æ¹¯ç±³ç²‰', nameEn: 'Beef Tendon Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 80, protein: 7.8, fat: 1.3, carbs: 9.1, sodium: 360, calcium: 11 }, perServing: { weight: 680, calories: 540, protein: 53, fat: 8.8, carbs: 62, sodium: 2400, calcium: 74 }},
      { id: '218', name: 'ç‰›ç­‹æ¹¯ç²—éºªæ¢', nameEn: 'Beef Tendon Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 77, protein: 8.8, fat: 1.6, carbs: 6.8, sodium: 500, calcium: 13 }, perServing: { weight: 590, calories: 460, protein: 52, fat: 9.5, carbs: 40, sodium: 3000, calcium: 77 }},
      { id: '219', name: 'ç‰›è‚š(èƒƒ)æ¹¯ç²—éºªæ¢', nameEn: 'Beef Tripe Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 61, protein: 6, fat: 1, carbs: 7, sodium: 480, calcium: 17 }, perServing: { weight: 590, calories: 360, protein: 35, fat: 5.9, carbs: 41, sodium: 2800, calcium: 100 }},
      { id: '220', name: 'ç‰›ä»€(å…§è‡Ÿ)æ¹¯ç²—éºªæ¢', nameEn: 'Beef Offal Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 73, protein: 6.4, fat: 2.2, carbs: 6.8, sodium: 500, calcium: 15 }, perServing: { weight: 630, calories: 460, protein: 40, fat: 14, carbs: 43, sodium: 3100, calcium: 94 }},
      { id: '221', name: 'ç‰›ä¸¸æ¹¯æ²³ç²‰', nameEn: 'Beef Ball Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 65, protein: 2.9, fat: 0.99, carbs: 11, sodium: 270, calcium: 10 }, perServing: { weight: 700, calories: 450, protein: 20, fat: 6.9, carbs: 77, sodium: 1900, calcium: 70 }},
      { id: '222', name: 'ç‰›ä¸¸æ¹¯å¹¼éºªæ¢', nameEn: 'Beef Ball Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 63, protein: 5.3, fat: 1.3, carbs: 7.4, sodium: 440, calcium: 14 }, perServing: { weight: 600, calories: 380, protein: 32, fat: 7.8, carbs: 45, sodium: 2600, calcium: 84 }},
      { id: '223', name: 'ç‰›ä¸¸æ¹¯ç±³ç²‰', nameEn: 'Beef Ball Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 67, protein: 3.6, fat: 0.99, carbs: 11, sodium: 340, calcium: 14 }, perServing: { weight: 670, calories: 450, protein: 24, fat: 6.6, carbs: 74, sodium: 2300, calcium: 94 }},
      { id: '224', name: 'ç‰›ä¸¸æ¹¯ç²—éºªæ¢', nameEn: 'Beef Ball Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 63, protein: 5.2, fat: 1.4, carbs: 7.3, sodium: 460, calcium: 15 }, perServing: { weight: 620, calories: 390, protein: 32, fat: 8.7, carbs: 45, sodium: 2900, calcium: 93 }},
      { id: '225', name: 'é­šè›‹æ¹¯ç±³ç²‰', nameEn: 'Fish Ball Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 58, protein: 3.5, fat: 0.69, carbs: 9.5, sodium: 260, calcium: 29 }, perServing: { weight: 700, calories: 400, protein: 24, fat: 4.8, carbs: 66, sodium: 1800, calcium: 200 }},
      { id: '226', name: 'é­šè›‹æ¹¯æ²³ç²‰', nameEn: 'Fish Ball Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 63, protein: 2.8, fat: 0.67, carbs: 11, sodium: 280, calcium: 28 }, perServing: { weight: 720, calories: 450, protein: 20, fat: 4.8, carbs: 79, sodium: 2000, calcium: 200 }},
      { id: '227', name: 'é­šè›‹æ¹¯ç²—éºªæ¢', nameEn: 'Fish Ball Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 55, protein: 4.8, fat: 0.78, carbs: 7.3, sodium: 410, calcium: 28 }, perServing: { weight: 620, calories: 340, protein: 30, fat: 4.8, carbs: 45, sodium: 2500, calcium: 170 }},
      { id: '228', name: 'é­šè›‹æ¹¯å¹¼éºªæ¢', nameEn: 'Fish Ball Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 55, protein: 4.8, fat: 0.81, carbs: 7.2, sodium: 410, calcium: 31 }, perServing: { weight: 640, calories: 350, protein: 30, fat: 5.1, carbs: 46, sodium: 2600, calcium: 200 }},
      { id: '229', name: 'é­šç‰‡æ¹¯æ²³ç²‰', nameEn: 'Fish Slice Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 62, protein: 2.5, fat: 0.72, carbs: 11, sodium: 330, calcium: 17 }, perServing: { weight: 640, calories: 390, protein: 16, fat: 4.6, carbs: 70, sodium: 2100, calcium: 110 }},
      { id: '230', name: 'é­šç‰‡æ¹¯å¹¼éºªæ¢', nameEn: 'Fish Slice Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 56, protein: 4.8, fat: 0.93, carbs: 7.1, sodium: 520, calcium: 20 }, perServing: { weight: 580, calories: 320, protein: 28, fat: 5.4, carbs: 41, sodium: 3000, calcium: 120 }},
      { id: '231', name: 'é­šç‰‡æ¹¯ç±³ç²‰', nameEn: 'Fish Slice Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 61, protein: 3.1, fat: 0.78, carbs: 10, sodium: 350, calcium: 18 }, perServing: { weight: 650, calories: 390, protein: 20, fat: 5, carbs: 65, sodium: 2300, calcium: 120 }},
      { id: '232', name: 'é­šç‰‡æ¹¯ç²—éºªæ¢', nameEn: 'Fish Slice Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 55, protein: 4.6, fat: 0.88, carbs: 7.2, sodium: 500, calcium: 20 }, perServing: { weight: 570, calories: 310, protein: 26, fat: 5, carbs: 41, sodium: 2900, calcium: 110 }},
      { id: '233', name: 'å¢¨é­šä¸¸æ¹¯ç±³ç²‰', nameEn: 'Cuttlefish Ball Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 64, protein: 3.1, fat: 1.1, carbs: 10, sodium: 300, calcium: 9.5 }, perServing: { weight: 700, calories: 450, protein: 22, fat: 7.7, carbs: 70, sodium: 2100, calcium: 67 }},
      { id: '234', name: 'å¢¨é­šä¸¸æ¹¯æ²³ç²‰', nameEn: 'Cuttlefish Ball Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 67, protein: 2.3, fat: 1.3, carbs: 11, sodium: 290, calcium: 9.1 }, perServing: { weight: 690, calories: 460, protein: 16, fat: 8.9, carbs: 75, sodium: 2000, calcium: 62 }},
      { id: '235', name: 'å¢¨é­šä¸¸æ¹¯ç²—éºªæ¢', nameEn: 'Cuttlefish Ball Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 58, protein: 4.5, fat: 1.3, carbs: 7, sodium: 470, calcium: 12 }, perServing: { weight: 640, calories: 370, protein: 29, fat: 8.4, carbs: 45, sodium: 3000, calcium: 77 }},
      { id: '236', name: 'å¢¨é­šä¸¸æ¹¯å¹¼éºªæ¢', nameEn: 'Cuttlefish Ball Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 59, protein: 4.6, fat: 1.3, carbs: 7.2, sodium: 480, calcium: 12 }, perServing: { weight: 620, calories: 370, protein: 29, fat: 8.1, carbs: 45, sodium: 3000, calcium: 75 }},
      { id: '237', name: 'è²¢ä¸¸æ¹¯æ²³ç²‰', nameEn: 'Pork Ball Flat Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 81, protein: 2.8, fat: 2.2, carbs: 12, sodium: 310, calcium: 9.1 }, perServing: { weight: 680, calories: 550, protein: 19, fat: 15, carbs: 82, sodium: 2100, calcium: 62 }},
      { id: '238', name: 'è²¢ä¸¸æ¹¯å¹¼éºªæ¢', nameEn: 'Pork Ball Noodle Soup (Thin Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 73, protein: 4.5, fat: 2.5, carbs: 8.2, sodium: 440, calcium: 15 }, perServing: { weight: 660, calories: 480, protein: 30, fat: 16, carbs: 54, sodium: 2900, calcium: 99 }},
      { id: '239', name: 'è²¢ä¸¸æ¹¯ç²—éºªæ¢', nameEn: 'Pork Ball Noodle Soup (Thick Noodles)', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 68, protein: 4.6, fat: 2, carbs: 7.9, sodium: 420, calcium: 14 }, perServing: { weight: 660, calories: 450, protein: 30, fat: 13, carbs: 52, sodium: 2800, calcium: 93 }},
      { id: '240', name: 'è²¢ä¸¸æ¹¯ç±³ç²‰', nameEn: 'Pork Ball Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 72, protein: 3.3, fat: 1.6, carbs: 11, sodium: 330, calcium: 12 }, perServing: { weight: 730, calories: 520, protein: 24, fat: 12, carbs: 80, sodium: 2400, calcium: 87 }},
      { id: '241', name: 'é®®é­šç‰‡æ¹¯ç±³ç²‰', nameEn: 'Fresh Fish Slice Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 67, protein: 3.8, fat: 1.1, carbs: 10, sodium: 230, calcium: 11 }, perServing: { weight: 670, calories: 450, protein: 25, fat: 7.3, carbs: 67, sodium: 1500, calcium: 73 }},
      { id: '242', name: 'é›ªèœè‚‰çµ²æ¹¯ç±³ç²‰', nameEn: 'Snow Vegetable and Shredded Pork Rice Noodle Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 84, protein: 3, fat: 1.7, carbs: 14, sodium: 360, calcium: 12 }, perServing: { weight: 420, calories: 350, protein: 12, fat: 7.1, carbs: 58, sodium: 1500, calcium: 50 }},
      { id: '243', name: 'é¤è‚‰è›‹å³é£Ÿéºª', nameEn: 'Instant Noodle with Luncheon Meat and Egg', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 150, protein: 4.9, fat: 8.4, carbs: 13, sodium: 400, calcium: 14 }, perServing: { weight: 450, calories: 680, protein: 22, fat: 38, carbs: 59, sodium: 1800, calcium: 64 }},
      { id: '244', name: 'äº”é¦™è‚‰ä¸å³é£Ÿéºª', nameEn: 'Instant Noodle with Spiced Pork', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 160, protein: 6.6, fat: 8.2, carbs: 14, sodium: 460, calcium: 11 }, perServing: { weight: 450, calories: 710, protein: 29, fat: 37, carbs: 62, sodium: 2100, calcium: 49 }},
      { id: '245', name: 'æ²™çˆ¹ç‰›è‚‰å³é£Ÿéºª', nameEn: 'Instant Noodle with Satay Beef', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 130, protein: 5.8, fat: 5.5, carbs: 13, sodium: 440, calcium: 11 }, perServing: { weight: 500, calories: 640, protein: 29, fat: 27, carbs: 64, sodium: 2200, calcium: 54 }},
      { id: '246', name: 'ä»€éŒ¦æµ·é®®æ¹¯çƒå†¬', nameEn: 'Assorted Seafood Udon Soup', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 58, protein: 4.4, fat: 0.9, carbs: 8.1, sodium: 290, calcium: 12 }, perServing: { weight: 710, calories: 410, protein: 31, fat: 6.4, carbs: 58, sodium: 2100, calcium: 85 }},

      // ç²¥ç²‰éºªé£¯ - ç‚’ç²‰éºª (Stir-fried Noodles)
      { id: '247', name: 'è±‰æ²¹çš‡ç‚’éºª', nameEn: 'Fried Noodle with Soy Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 170, protein: 5.8, fat: 5.2, carbs: 25, sodium: 510, calcium: 17 }, perServing: { weight: 400, calories: 680, protein: 23, fat: 21, carbs: 100, sodium: 2100, calcium: 68 }},
      { id: '248', name: 'ç‚’ç±³ç²‰', nameEn: 'Fried Rice Vermicelli', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 160, protein: 3.7, fat: 4.7, carbs: 27, sodium: 390, calcium: 17 }, perServing: { weight: 410, calories: 660, protein: 15, fat: 19, carbs: 110, sodium: 1600, calcium: 70 }},
      { id: '249', name: 'æ˜Ÿå·ç‚’ç±³ç²‰', nameEn: 'Singapore Fried Rice Vermicelli', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 6.3, fat: 8.4, carbs: 19, sodium: 350, calcium: 21 }, perServing: { weight: 610, calories: 1100, protein: 39, fat: 51, carbs: 120, sodium: 2100, calcium: 130 }},
      { id: '250', name: 'å»ˆé–€ç‚’ç±³ç²‰', nameEn: 'Xiamen Fried Rice Vermicelli', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 170, protein: 5.7, fat: 6.4, carbs: 22, sodium: 340, calcium: 21 }, perServing: { weight: 670, calories: 1100, protein: 38, fat: 43, carbs: 150, sodium: 2300, calcium: 140 }},
      { id: '251', name: 'é›ªèœç‡’é´¨çµ²ç‚†ç±³ç²‰', nameEn: 'Rice Vermicelli with Roast Duck and Snow Vegetable', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 140, protein: 4.8, fat: 5.3, carbs: 18, sodium: 400, calcium: 14 }, perServing: { weight: 720, calories: 1000, protein: 34, fat: 38, carbs: 130, sodium: 2900, calcium: 100 }},
      { id: '252', name: 'é›ªèœè±¬è‚‰çµ²ç‚†ç±³ç²‰', nameEn: 'Rice Vermicelli with Pork and Snow Vegetable', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 120, protein: 4.2, fat: 4, carbs: 17, sodium: 390, calcium: 16 }, perServing: { weight: 720, calories: 860, protein: 30, fat: 29, carbs: 120, sodium: 2800, calcium: 120 }},
      { id: '253', name: 'ç‚’è²´åˆ', nameEn: 'Fried Kwai Teow', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 160, protein: 4.2, fat: 6, carbs: 23, sodium: 350, calcium: 14 }, perServing: { weight: 770, calories: 1200, protein: 32, fat: 46, carbs: 180, sodium: 2700, calcium: 110 }},
      { id: '254', name: 'ä¹¾ç‚’ç‰›è‚‰æ²³ç²‰', nameEn: 'Stir-fried Flat Rice Noodle with Beef', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 150, protein: 4, fat: 5.1, carbs: 22, sodium: 350, calcium: 10 }, perServing: { weight: 650, calories: 970, protein: 26, fat: 33, carbs: 140, sodium: 2300, calcium: 65 }},
      { id: '255', name: 'æ™‚èœç‰›è‚‰ç‚’æ²³ç²‰', nameEn: 'Fried Flat Rice Noodle with Beef and Vegetables', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 130, protein: 3.5, fat: 4.6, carbs: 19, sodium: 250, calcium: 15 }, perServing: { weight: 780, calories: 1000, protein: 27, fat: 36, carbs: 150, sodium: 2000, calcium: 120 }},
      { id: '256', name: 'æ™‚èœç‰›è‚‰ç‚’éºª', nameEn: 'Fried Noodle with Beef and Vegetables', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 170, protein: 7.2, fat: 8.3, carbs: 17, sodium: 410, calcium: 18 }, perServing: { weight: 580, calories: 990, protein: 42, fat: 48, carbs: 99, sodium: 2400, calcium: 100 }},
      { id: '257', name: 'æ™‚èœè±¬è‚‰ç‰‡ç‚’éºª', nameEn: 'Fried Noodle with Pork and Vegetables', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 170, protein: 6.9, fat: 8, carbs: 17, sodium: 350, calcium: 18 }, perServing: { weight: 610, calories: 1000, protein: 42, fat: 49, carbs: 100, sodium: 2100, calcium: 110 }},
      { id: '258', name: 'æ™‚èœæ’éª¨ç‚’éºª', nameEn: 'Fried Noodle with Spare Ribs and Vegetables', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 8.1, fat: 11, carbs: 17, sodium: 370, calcium: 29 }, perServing: { weight: 650, calories: 1200, protein: 50, fat: 68, carbs: 100, sodium: 2300, calcium: 180 }},
      { id: '259', name: 'å‘³èœè±¬è‚‰ç‰‡ç‚’éºª', nameEn: 'Fried Noodle with Pork and Preserved Vegetable', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 170, protein: 5.8, fat: 8.6, carbs: 17, sodium: 380, calcium: 12 }, perServing: { weight: 710, calories: 1200, protein: 41, fat: 61, carbs: 120, sodium: 2700, calcium: 85 }},
      { id: '260', name: 'å‘³èœæ’éª¨ç‚’éºª', nameEn: 'Fried Noodle with Spare Ribs and Preserved Vegetable', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 190, protein: 6.7, fat: 10, carbs: 17, sodium: 460, calcium: 17 }, perServing: { weight: 760, calories: 1400, protein: 49, fat: 72, carbs: 120, sodium: 3300, calcium: 120 }},
      { id: '261', name: 'å‘³èœé­·é­šç‚’éºª', nameEn: 'Fried Noodle with Squid and Preserved Vegetable', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 150, protein: 5.5, fat: 7.4, carbs: 16, sodium: 380, calcium: 14 }, perServing: { weight: 750, calories: 1100, protein: 41, fat: 56, carbs: 120, sodium: 2900, calcium: 110 }},
      { id: '262', name: 'è±‰æ¤’ç‰›è‚‰ç‚’éºª', nameEn: 'Fried Noodle with Beef in Black Bean Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 6.6, fat: 8.7, carbs: 18, sodium: 420, calcium: 14 }, perServing: { weight: 630, calories: 1100, protein: 41, fat: 55, carbs: 110, sodium: 2600, calcium: 88 }},
      { id: '263', name: 'è±‰æ¤’è±¬è‚‰ç‰‡ç‚’éºª', nameEn: 'Fried Noodle with Pork in Black Bean Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 170, protein: 6.7, fat: 8.7, carbs: 17, sodium: 420, calcium: 13 }, perServing: { weight: 630, calories: 1100, protein: 42, fat: 55, carbs: 110, sodium: 2700, calcium: 82 }},
      { id: '264', name: 'è±‰æ¤’æ’éª¨ç‚’éºª', nameEn: 'Fried Noodle with Spare Ribs in Black Bean Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 220, protein: 7.6, fat: 13, carbs: 18, sodium: 410, calcium: 17 }, perServing: { weight: 740, calories: 1500, protein: 53, fat: 91, carbs: 130, sodium: 2900, calcium: 120 }},
      { id: '265', name: 'è±‰æ¤’é­·é­šç‚’éºª', nameEn: 'Fried Noodle with Squid in Black Bean Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 170, protein: 6.7, fat: 7.7, carbs: 17, sodium: 390, calcium: 16 }, perServing: { weight: 650, calories: 1100, protein: 43, fat: 50, carbs: 110, sodium: 2500, calcium: 100 }},
      { id: '266', name: 'æ¶¼ç“œç‰›è‚‰ç‚’éºª', nameEn: 'Fried Noodle with Beef and Bitter Melon', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 6.4, fat: 9.7, carbs: 17, sodium: 450, calcium: 12 }, perServing: { weight: 680, calories: 1200, protein: 44, fat: 66, carbs: 120, sodium: 3100, calcium: 82 }},
      { id: '267', name: 'æ¶¼ç“œè±¬è‚‰ç‰‡ç‚’éºª', nameEn: 'Fried Noodle with Pork and Bitter Melon', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 6.5, fat: 9.3, carbs: 18, sodium: 410, calcium: 12 }, perServing: { weight: 650, calories: 1200, protein: 42, fat: 60, carbs: 120, sodium: 2700, calcium: 78 }},
      { id: '268', name: 'è±¬æ‰’ç‚’å³é£Ÿéºª', nameEn: 'Fried Instant Noodle with Pork Chop', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 230, protein: 8.9, fat: 13, carbs: 19, sodium: 480, calcium: 17 }, perServing: { weight: 550, calories: 1200, protein: 47, fat: 68, carbs: 99, sodium: 2500, calcium: 89 }},
      { id: '269', name: 'å¹²ç‡’ä¼Šéºª', nameEn: 'Dry-fried E-Fu Noodle', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 5, fat: 11, carbs: 20, sodium: 420, calcium: 13 }, perServing: { weight: 650, calories: 1300, protein: 33, fat: 72, carbs: 130, sodium: 2700, calcium: 85 }},
      { id: '270', name: 'æµ·é®®ç‚’çƒå†¬', nameEn: 'Fried Udon with Seafood', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 120, protein: 5.9, fat: 2.9, carbs: 17, sodium: 370, calcium: 17 }, perServing: { weight: 740, calories: 890, protein: 44, fat: 22, carbs: 130, sodium: 2700, calcium: 130 }},

      // ç²¥ç²‰éºªé£¯ - æ¹¯é£¯ (Rice in Soup)
      { id: '271', name: 'å†¬ç“œè‚‰ç²’æ¹¯é£¯', nameEn: 'Rice Soup with Winter Melon and Pork', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 81, protein: 3.9, fat: 0.71, carbs: 15, sodium: 210, calcium: 5.7 }, perServing: { weight: 720, calories: 590, protein: 28, fat: 5.1, carbs: 110, sodium: 1500, calcium: 41 }},
      { id: '272', name: 'æ–¹é­šè‚‰ç¢æ¹¯é£¯', nameEn: 'Rice Soup with Dried Fish and Minced Pork', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 73, protein: 3.8, fat: 2, carbs: 10, sodium: 270, calcium: 19 }, perServing: { weight: 660, calories: 480, protein: 25, fat: 13, carbs: 66, sodium: 1800, calcium: 120 }},

      // ç²¥ç²‰éºªé£¯ - ç‚’é£¯ (Fried Rice)
      { id: '273', name: 'æšå·ç‚’é£¯', nameEn: 'Yangzhou Fried Rice', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 7, fat: 7.9, carbs: 25, sodium: 310, calcium: 17 }, perServing: { weight: 620, calories: 1200, protein: 43, fat: 49, carbs: 150, sodium: 1900, calcium: 100 }},
      { id: '274', name: 'ç¦å»ºç‚’é£¯', nameEn: 'Fujian Fried Rice', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 150, protein: 6, fat: 4.7, carbs: 21, sodium: 320, calcium: 12 }, perServing: { weight: 960, calories: 1400, protein: 57, fat: 45, carbs: 200, sodium: 3100, calcium: 110 }},
      { id: '275', name: 'é´›é´¦ç‚’é£¯', nameEn: 'Mandarin Duck Fried Rice', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 140, protein: 4.7, fat: 4.5, carbs: 19, sodium: 280, calcium: 13 }, perServing: { weight: 1100, calories: 1500, protein: 51, fat: 49, carbs: 210, sodium: 3000, calcium: 140 }},
      { id: '276', name: 'è¥¿ç‚’é£¯', nameEn: 'Western Style Fried Rice', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 190, protein: 5.9, fat: 7.4, carbs: 25, sodium: 300, calcium: 17 }, perServing: { weight: 680, calories: 1300, protein: 40, fat: 50, carbs: 170, sodium: 2000, calcium: 120 }},
      { id: '277', name: 'é¹¹é­šé›ç²’ç‚’é£¯', nameEn: 'Fried Rice with Salted Fish and Chicken', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 7, fat: 6.7, carbs: 27, sodium: 330, calcium: 14 }, perServing: { weight: 690, calories: 1400, protein: 48, fat: 46, carbs: 190, sodium: 2300, calcium: 96 }},
      { id: '278', name: 'é±†é­šé›ç²’ç‚’é£¯', nameEn: 'Fried Rice with Dried Octopus and Chicken', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 8.3, fat: 7.6, carbs: 24, sodium: 290, calcium: 16 }, perServing: { weight: 740, calories: 1500, protein: 61, fat: 56, carbs: 180, sodium: 2100, calcium: 120 }},
      { id: '279', name: 'æ³¢è˜¿é›ç²’ç‚’é£¯', nameEn: 'Fried Rice with Pineapple and Chicken', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 6.2, fat: 7.8, carbs: 25, sodium: 290, calcium: 13 }, perServing: { weight: 730, calories: 1500, protein: 45, fat: 57, carbs: 180, sodium: 2100, calcium: 95 }},
      { id: '280', name: 'ç‘¤æŸ±è›‹ç™½ç‚’é£¯', nameEn: 'Fried Rice with Dried Scallop and Egg White', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 6.2, fat: 4.6, carbs: 29, sodium: 300, calcium: 8.5 }, perServing: { weight: 690, calories: 1200, protein: 43, fat: 32, carbs: 200, sodium: 2100, calcium: 59 }},
      { id: '281', name: 'ç”Ÿç‚’ç‰›è‚‰é£¯', nameEn: 'Fried Rice with Beef', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 6.7, fat: 7.6, carbs: 25, sodium: 330, calcium: 14 }, perServing: { weight: 610, calories: 1200, protein: 41, fat: 46, carbs: 150, sodium: 2000, calcium: 85 }},
      { id: '282', name: 'ç”Ÿç‚’é›çµ²é£¯', nameEn: 'Fried Rice with Chicken', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 7.1, fat: 8.2, carbs: 26, sodium: 280, calcium: 14 }, perServing: { weight: 600, calories: 1200, protein: 43, fat: 49, carbs: 160, sodium: 1700, calcium: 84 }},
      { id: '283', name: 'é®®èŒ„ç‰›è‚‰é…ç‚’é£¯', nameEn: 'Tomato Beef with Fried Rice', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 150, protein: 5.2, fat: 4.9, carbs: 22, sodium: 300, calcium: 11 }, perServing: { weight: 780, calories: 1200, protein: 41, fat: 38, carbs: 170, sodium: 2300, calcium: 86 }},

      // ç²¥ç²‰éºªé£¯ - "ç¢Ÿé ­é£¯" (Rice Plates)
      { id: '284', name: 'å’–å“©ç‰›è…©é£¯', nameEn: 'Rice with Curry Beef Brisket', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 160, protein: 7.7, fat: 6.3, carbs: 18, sodium: 290, calcium: 17 }, perServing: { weight: 800, calories: 1300, protein: 62, fat: 50, carbs: 140, sodium: 2300, calcium: 140 }},
      { id: '285', name: 'ç‡œè˜¿è””ç‰›è…©é£¯', nameEn: 'Rice with Braised Beef Brisket and Radish', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 130, protein: 7.5, fat: 2.7, carbs: 19, sodium: 260, calcium: 10 }, perServing: { weight: 750, calories: 980, protein: 56, fat: 20, carbs: 140, sodium: 2000, calcium: 75 }},
      { id: '286', name: 'æ²™çˆ¹ç‰›è‚‰é£¯', nameEn: 'Rice with Satay Beef', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 120, protein: 4.7, fat: 2.5, carbs: 20, sodium: 320, calcium: 11 }, perServing: { weight: 700, calories: 840, protein: 33, fat: 17, carbs: 140, sodium: 2200, calcium: 77 }},
      { id: '287', name: 'æ™‚èœç‰›è‚‰é£¯', nameEn: 'Rice with Beef and Vegetables', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 110, protein: 4.9, fat: 1.6, carbs: 19, sodium: 260, calcium: 12 }, perServing: { weight: 700, calories: 770, protein: 34, fat: 11, carbs: 130, sodium: 1800, calcium: 84 }},
      { id: '288', name: 'æ™‚èœè±¬è‚‰ç‰‡é£¯', nameEn: 'Rice with Pork and Vegetables', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 120, protein: 4.6, fat: 2.3, carbs: 20, sodium: 200, calcium: 11 }, perServing: { weight: 660, calories: 800, protein: 30, fat: 15, carbs: 130, sodium: 1300, calcium: 73 }},
      { id: '289', name: 'ç²Ÿç±³è‚‰ç²’é£¯', nameEn: 'Rice with Corn and Diced Pork', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 130, protein: 5.2, fat: 2.3, carbs: 22, sodium: 210, calcium: 7.3 }, perServing: { weight: 760, calories: 990, protein: 40, fat: 18, carbs: 170, sodium: 1600, calcium: 56 }},
      { id: '290', name: 'ç„—è±¬æ‰’é£¯', nameEn: 'Baked Pork Chop with Rice', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 190, protein: 7.4, fat: 8.8, carbs: 21, sodium: 320, calcium: 18 }, perServing: { weight: 710, calories: 1300, protein: 50, fat: 60, carbs: 140, sodium: 2200, calcium: 120 }},
      { id: '291', name: 'æç«¹ç«è…©(ç‡’è‚‰)é£¯', nameEn: 'Rice with Roast Pork and Beancurd Sticks', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 7.5, fat: 8.1, carbs: 19, sodium: 260, calcium: 13 }, perServing: { weight: 770, calories: 1400, protein: 57, fat: 62, carbs: 140, sodium: 2000, calcium: 99 }},
      { id: '292', name: 'é®®èŒ„ç‰›è‚‰é£¯', nameEn: 'Rice with Tomato and Beef', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 120, protein: 4.6, fat: 1.8, carbs: 21, sodium: 200, calcium: 6.6 }, perServing: { weight: 780, calories: 940, protein: 36, fat: 14, carbs: 160, sodium: 1600, calcium: 51 }},
      { id: '293', name: 'æ»‘è›‹è¦ä»é£¯', nameEn: 'Rice with Scrambled Egg and Shrimp', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 130, protein: 4.3, fat: 2.2, carbs: 22, sodium: 180, calcium: 13 }, perServing: { weight: 580, calories: 750, protein: 25, fat: 13, carbs: 130, sodium: 1000, calcium: 75 }},
      { id: '294', name: 'é­šé¦™èŒ„å­é£¯', nameEn: 'Rice with Eggplant in Fish-fragrant Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 150, protein: 3.5, fat: 5.9, carbs: 19, sodium: 250, calcium: 7.7 }, perServing: { weight: 720, calories: 1100, protein: 25, fat: 43, carbs: 140, sodium: 1800, calcium: 56 }},
      { id: '295', name: 'å†¬è°è’¸é›é£¯', nameEn: 'Rice with Steamed Chicken and Mushroom', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 160, protein: 6.1, fat: 4.4, carbs: 25, sodium: 280, calcium: 9.7 }, perServing: { weight: 430, calories: 660, protein: 25, fat: 18, carbs: 100, sodium: 1100, calcium: 40 }},
      { id: '296', name: 'è±‰æ±é³³çˆªæ’éª¨é£¯', nameEn: 'Rice with Chicken Feet and Spare Ribs in Black Bean Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 5.3, fat: 5.4, carbs: 28, sodium: 260, calcium: 12 }, perServing: { weight: 490, calories: 820, protein: 24, fat: 25, carbs: 130, sodium: 1200, calcium: 55 }},
      { id: '297', name: 'åœŸé­·(é­·é­š)è’¸è‚‰é¤…é£¯', nameEn: 'Rice with Steamed Pork Patty and Dried Squid', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 210, protein: 7.7, fat: 9.6, carbs: 22, sodium: 240, calcium: 8.4 }, perServing: { weight: 570, calories: 1200, protein: 44, fat: 54, carbs: 120, sodium: 1400, calcium: 48 }},
      { id: '298', name: 'è’¸é¯‡é­šé£¯', nameEn: 'Rice with Steamed Grass Carp', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 140, protein: 8.4, fat: 4.1, carbs: 18, sodium: 250, calcium: 25 }, perServing: { weight: 710, calories: 930, protein: 56, fat: 27, carbs: 120, sodium: 1700, calcium: 170 }},
      { id: '299', name: 'å‰ç‡’é£¯', nameEn: 'Rice with BBQ Pork', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 7.3, fat: 7.1, carbs: 26, sodium: 250, calcium: 8.7 }, perServing: { weight: 520, calories: 1000, protein: 38, fat: 37, carbs: 130, sodium: 1300, calcium: 45 }},
      { id: '300', name: 'ç‡’è‚‰é£¯', nameEn: 'Rice with Roast Pork', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 200, protein: 7.8, fat: 8.6, carbs: 23, sodium: 260, calcium: 8.3 }, perServing: { weight: 470, calories: 930, protein: 36, fat: 40, carbs: 110, sodium: 1200, calcium: 39 }},
      { id: '301', name: 'ç™½åˆ‡é›é£¯', nameEn: 'Rice with Poached Chicken', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 6.4, fat: 5.5, carbs: 25, sodium: 270, calcium: 11 }, perServing: { weight: 550, calories: 940, protein: 33, fat: 29, carbs: 130, sodium: 1400, calcium: 57 }},
      { id: '302', name: 'è±‰æ²¹é›é£¯', nameEn: 'Rice with Soy Sauce Chicken', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 180, protein: 6.4, fat: 5.7, carbs: 25, sodium: 250, calcium: 16 }, perServing: { weight: 460, calories: 770, protein: 27, fat: 24, carbs: 110, sodium: 1100, calcium: 69 }},
      { id: '303', name: 'ç‡’éµé£¯', nameEn: 'Rice with Roast Goose', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 190, protein: 6.7, fat: 6.8, carbs: 26, sodium: 170, calcium: 11 }, perServing: { weight: 530, calories: 970, protein: 34, fat: 35, carbs: 130, sodium: 870, calcium: 56 }},

      // ç²¥ç²‰éºªé£¯ - é†¬æ± (Sauces)
      { id: '304', name: 'ç‡’å‘³æ±', nameEn: 'Roast Meat Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 63, protein: 1.7, fat: 0.3, carbs: 13, sodium: 1900, calcium: 7.3 }, perServing: { weight: 15, calories: 9.5, protein: 0.26, fat: 0.045, carbs: 2, sodium: 290, calcium: 1.1 }},
      { id: '305', name: 'è–‘è“‰', nameEn: 'Ginger Paste', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 480, protein: 1.7, fat: 50, carbs: 6.4, sodium: 2000, calcium: 24 }, perServing: { weight: 18, calories: 86, protein: 0.31, fat: 9, carbs: 1.2, sodium: 360, calcium: 4.3 }},
      { id: '306', name: 'é…¸æ¢…é†¬', nameEn: 'Plum Sauce', category: 'ç²¥ç²‰éºªé£¯', per100g: { calories: 230, protein: 0, fat: 0.7, carbs: 56, sodium: 1600, calcium: 19 }, perServing: { weight: 20, calories: 46, protein: 0, fat: 0.14, carbs: 11, sodium: 320, calcium: 3.8 }},

      // é£²å“ (Beverages) - FEHD Report No. 33 (æ¯100æ¯«å‡)
      // å‡é£² (Cold Drinks)
      { id: '307', name: 'çå¤šå†° (å°‘ç”œ)', nameEn: 'Cendol Icy Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 72, protein: 0, fat: 3.8, carbs: 9.4, sodium: 13, calcium: 6.8 }, perServing: null },
      { id: '308', name: 'çå¤šå†° (æ™®é€š)', nameEn: 'Cendol Icy Drink (Regular)', category: 'é£²å“', per100g: { calories: 80, protein: 0, fat: 3.9, carbs: 11, sodium: 12, calcium: 7.0 }, perServing: null },
      { id: '309', name: 'å‡é´›é´¦ (å°‘ç”œ)', nameEn: 'Iced Yuan-yang (Less Sweet)', category: 'é£²å“', per100g: { calories: 40, protein: 1.3, fat: 1.1, carbs: 6.1, sodium: 14, calcium: 34 }, perServing: null },
      { id: '310', name: 'å‡é´›é´¦ (æ™®é€š)', nameEn: 'Iced Yuan-yang (Regular)', category: 'é£²å“', per100g: { calories: 52, protein: 1.5, fat: 1.3, carbs: 8.7, sodium: 16, calcium: 37 }, perServing: null },
      { id: '311', name: 'å‡æä»éœœ (å°‘ç”œ)', nameEn: 'Iced Almond Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 43, protein: 1.1, fat: 1.3, carbs: 6.8, sodium: 16, calcium: 32 }, perServing: null },
      { id: '312', name: 'å‡æä»éœœ (æ™®é€š)', nameEn: 'Iced Almond Drink (Regular)', category: 'é£²å“', per100g: { calories: 51, protein: 1.1, fat: 1.3, carbs: 8.9, sodium: 17, calcium: 33 }, perServing: null },
      { id: '313', name: 'å‡æœ±å¤åŠ›å’–å•¡ (å°‘ç”œ)', nameEn: 'Iced Caffe Mocha (Less Sweet)', category: 'é£²å“', per100g: { calories: 55, protein: 1.4, fat: 2.3, carbs: 7.3, sodium: 26, calcium: 40 }, perServing: null },
      { id: '314', name: 'å‡æœ±å¤åŠ›å’–å•¡ (æ™®é€š)', nameEn: 'Iced Caffe Mocha (Regular)', category: 'é£²å“', per100g: { calories: 61, protein: 1.5, fat: 2.2, carbs: 8.7, sodium: 26, calcium: 43 }, perServing: null },
      { id: '315', name: 'å‡æ³¡æ²«å’–å•¡ (å°‘ç”œ)', nameEn: 'Iced Cappuccino (Less Sweet)', category: 'é£²å“', per100g: { calories: 41, protein: 1.1, fat: 1.7, carbs: 5.4, sodium: 17, calcium: 36 }, perServing: null },
      { id: '316', name: 'å‡æ³¡æ²«å’–å•¡ (æ™®é€š)', nameEn: 'Iced Cappuccino (Regular)', category: 'é£²å“', per100g: { calories: 50, protein: 1.2, fat: 1.7, carbs: 7.6, sodium: 17, calcium: 39 }, perServing: null },
      { id: '317', name: 'å‡æœ±å¤åŠ›é£²å“ (å°‘ç”œ)', nameEn: 'Iced Chocolate Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 46, protein: 1.2, fat: 1.4, carbs: 7.2, sodium: 25, calcium: 30 }, perServing: null },
      { id: '318', name: 'å‡æœ±å¤åŠ›é£²å“ (æ™®é€š)', nameEn: 'Iced Chocolate Drink (Regular)', category: 'é£²å“', per100g: { calories: 55, protein: 1.1, fat: 1.5, carbs: 9.2, sodium: 27, calcium: 29 }, perServing: null },
      { id: '319', name: 'å‡å”‚å’• (å°‘ç”œ)', nameEn: 'Iced Cocoa Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 41, protein: 1.7, fat: 1.7, carbs: 4.6, sodium: 19, calcium: 40 }, perServing: null },
      { id: '320', name: 'å‡å”‚å’• (æ™®é€š)', nameEn: 'Iced Cocoa Drink (Regular)', category: 'é£²å“', per100g: { calories: 47, protein: 1.7, fat: 1.8, carbs: 6.1, sodium: 19, calcium: 39 }, perServing: null },
      { id: '321', name: 'å‡å’–å•¡ (å°‘ç”œ)', nameEn: 'Iced Coffee (Less Sweet)', category: 'é£²å“', per100g: { calories: 39, protein: 1.0, fat: 1.2, carbs: 6.0, sodium: 16, calcium: 29 }, perServing: null },
      { id: '322', name: 'å‡å’–å•¡ (æ™®é€š)', nameEn: 'Iced Coffee (Regular)', category: 'é£²å“', per100g: { calories: 48, protein: 1.0, fat: 1.3, carbs: 8.2, sodium: 16, calcium: 30 }, perServing: null },
      { id: '323', name: 'å‡çç ç¶ èŒ¶ (å°‘ç”œ)', nameEn: 'Iced Green Tea with Pearl Tapioca (Less Sweet)', category: 'é£²å“', per100g: { calories: 30, protein: 0, fat: 0, carbs: 7.3, sodium: 0, calcium: 1.5 }, perServing: null },
      { id: '324', name: 'å‡çç ç¶ èŒ¶ (æ™®é€š)', nameEn: 'Iced Green Tea with Pearl Tapioca (Regular)', category: 'é£²å“', per100g: { calories: 41, protein: 0, fat: 0, carbs: 10, sodium: 0, calcium: 1.6 }, perServing: null },
      { id: '325', name: 'å‡æª¸æª¬é‡‘æ¡”èœœ (å°‘ç”œ)', nameEn: 'Iced Lemon Kumquat Honey (Less Sweet)', category: 'é£²å“', per100g: { calories: 40, protein: 0.3, fat: 0, carbs: 9.2, sodium: 110, calcium: 4.6 }, perServing: null },
      { id: '326', name: 'å‡æª¸æª¬é‡‘æ¡”èœœ (æ™®é€š)', nameEn: 'Iced Lemon Kumquat Honey (Regular)', category: 'é£²å“', per100g: { calories: 47, protein: 0, fat: 0, carbs: 11, sodium: 110, calcium: 4.9 }, perServing: null },
      { id: '327', name: 'å‡æª¸æª¬å’–å•¡ (å°‘ç”œ)', nameEn: 'Iced Lemon Coffee (Less Sweet)', category: 'é£²å“', per100g: { calories: 29, protein: 0.3, fat: 0, carbs: 6.9, sodium: 0, calcium: 6.3 }, perServing: null },
      { id: '328', name: 'å‡æª¸æª¬å’–å•¡ (æ™®é€š)', nameEn: 'Iced Lemon Coffee (Regular)', category: 'é£²å“', per100g: { calories: 38, protein: 0.3, fat: 0, carbs: 8.9, sodium: 0, calcium: 5.5 }, perServing: null },
      { id: '329', name: 'å‡æª¸æ¨‚', nameEn: 'Iced Lemon Cola', category: 'é£²å“', per100g: { calories: 33, protein: 0, fat: 0, carbs: 8.0, sodium: 0, calcium: 3.4 }, perServing: null },
      { id: '330', name: 'å‡æª¸èœœ (å°‘ç”œ)', nameEn: 'Iced Lemon Honey (Less Sweet)', category: 'é£²å“', per100g: { calories: 24, protein: 0, fat: 0, carbs: 5.4, sodium: 0, calcium: 6.4 }, perServing: null },
      { id: '331', name: 'å‡æª¸èœœ (æ™®é€š)', nameEn: 'Iced Lemon Honey (Regular)', category: 'é£²å“', per100g: { calories: 32, protein: 0, fat: 0, carbs: 7.5, sodium: 0, calcium: 6.9 }, perServing: null },
      { id: '332', name: 'å‡æª¸æª¬æ¢³æ‰“', nameEn: 'Iced Lemon Soda', category: 'é£²å“', per100g: { calories: 23, protein: 0, fat: 0, carbs: 5.5, sodium: 8.8, calcium: 3.4 }, perServing: null },
      { id: '333', name: 'å‡æª¸æª¬èŒ¶ (å°‘ç”œ)', nameEn: 'Iced Lemon Tea (Less Sweet)', category: 'é£²å“', per100g: { calories: 29, protein: 0, fat: 0, carbs: 6.7, sodium: 0, calcium: 4.6 }, perServing: null },
      { id: '334', name: 'å‡æª¸æª¬èŒ¶ (æ™®é€š)', nameEn: 'Iced Lemon Tea (Regular)', category: 'é£²å“', per100g: { calories: 48, protein: 0, fat: 0.3, carbs: 11, sodium: 0, calcium: 4.5 }, perServing: null },
      { id: '335', name: 'å‡å¥¶èŒ¶ (å°‘ç”œ)', nameEn: 'Iced Milk Tea (Less Sweet)', category: 'é£²å“', per100g: { calories: 34, protein: 0.9, fat: 0.9, carbs: 5.5, sodium: 16, calcium: 30 }, perServing: null },
      { id: '336', name: 'å‡çç å¥¶èŒ¶ (å°‘ç”œ)', nameEn: 'Iced Milk Tea with Pearl Tapioca (Less Sweet)', category: 'é£²å“', per100g: { calories: 57, protein: 0, fat: 2.3, carbs: 9.0, sodium: 20, calcium: 1.6 }, perServing: null },
      { id: '337', name: 'å‡çç å¥¶èŒ¶ (æ™®é€š)', nameEn: 'Iced Milk Tea with Pearl Tapioca (Regular)', category: 'é£²å“', per100g: { calories: 68, protein: 0, fat: 2.2, carbs: 12, sodium: 20, calcium: 1.6 }, perServing: null },
      { id: '338', name: 'å‡å¥¶èŒ¶ (æ™®é€š)', nameEn: 'Iced Milk Tea (Regular)', category: 'é£²å“', per100g: { calories: 44, protein: 1.0, fat: 0.7, carbs: 8.5, sodium: 16, calcium: 31 }, perServing: null },
      { id: '339', name: 'å‡é¹¹æª¸æª¬æ¢³æ‰“', nameEn: 'Iced Salted Lemon Soda', category: 'é£²å“', per100g: { calories: 24, protein: 0, fat: 0, carbs: 5.9, sodium: 240, calcium: 3.8 }, perServing: null },
      { id: '340', name: 'å‡è¥¿æ´‹èœèœœ (å°‘ç”œ)', nameEn: 'Iced Watercress Honey (Less Sweet)', category: 'é£²å“', per100g: { calories: 26, protein: 0, fat: 0, carbs: 6.2, sodium: 10, calcium: 3.1 }, perServing: null },
      { id: '341', name: 'å‡è¥¿æ´‹èœèœœ (æ™®é€š)', nameEn: 'Iced Watercress Honey (Regular)', category: 'é£²å“', per100g: { calories: 32, protein: 0.3, fat: 0, carbs: 7.6, sodium: 12, calcium: 3.6 }, perServing: null },
      { id: '342', name: 'é¾çœ¼å†° (æ™®é€š)', nameEn: 'Longan Icy Drink (Regular)', category: 'é£²å“', per100g: { calories: 54, protein: 0, fat: 0.8, carbs: 11, sodium: 5.0, calcium: 5.3 }, perServing: null },
      { id: '343', name: 'é¾çœ¼å†° (å°‘ç”œ)', nameEn: 'Longan Icy Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 48, protein: 0, fat: 0.9, carbs: 9.8, sodium: 0, calcium: 6.3 }, perServing: null },
      { id: '344', name: 'ä»€æœå†° (å°‘ç”œ)', nameEn: 'Mixed Fruit Icy Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 53, protein: 0, fat: 0.8, carbs: 11, sodium: 0, calcium: 6.4 }, perServing: null },
      { id: '345', name: 'ä»€æœå†° (æ™®é€š)', nameEn: 'Mixed Fruit Icy Drink (Regular)', category: 'é£²å“', per100g: { calories: 56, protein: 0, fat: 0.8, carbs: 12, sodium: 0, calcium: 6.1 }, perServing: null },
      { id: '346', name: 'ä»€æœè³“æ²» (å°‘ç”œ)', nameEn: 'Mixed Fruit Punch (Less Sweet)', category: 'é£²å“', per100g: { calories: 46, protein: 0, fat: 0.3, carbs: 11, sodium: 0, calcium: 5.3 }, perServing: null },
      { id: '347', name: 'ä»€æœè³“æ²» (æ™®é€š)', nameEn: 'Mixed Fruit Punch (Regular)', category: 'é£²å“', per100g: { calories: 49, protein: 0, fat: 0.3, carbs: 12, sodium: 0, calcium: 5.5 }, perServing: null },
      { id: '348', name: 'è è˜¿å†° (å°‘ç”œ)', nameEn: 'Pineapple Icy Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 41, protein: 0, fat: 0.4, carbs: 9.2, sodium: 0, calcium: 3.4 }, perServing: null },
      { id: '349', name: 'è è˜¿å†° (æ™®é€š)', nameEn: 'Pineapple Icy Drink (Regular)', category: 'é£²å“', per100g: { calories: 53, protein: 0, fat: 0.4, carbs: 12, sodium: 0, calcium: 3.6 }, perServing: null },
      { id: '350', name: 'è è˜¿è³“æ²» (å°‘ç”œ)', nameEn: 'Pineapple Punch (Less Sweet)', category: 'é£²å“', per100g: { calories: 38, protein: 0, fat: 0.4, carbs: 8.4, sodium: 0, calcium: 4.2 }, perServing: null },
      { id: '351', name: 'è è˜¿è³“æ²» (æ™®é€š)', nameEn: 'Pineapple Punch (Regular)', category: 'é£²å“', per100g: { calories: 46, protein: 0, fat: 0.5, carbs: 10, sodium: 0, calcium: 4.4 }, perServing: null },
      { id: '352', name: 'ç´…è±†å†° (å°‘ç”œ)', nameEn: 'Red Bean Icy Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 79, protein: 2.5, fat: 1.1, carbs: 15, sodium: 10, calcium: 31 }, perServing: null },
      { id: '353', name: 'ç´…è±†å†° (æ™®é€š)', nameEn: 'Red Bean Icy Drink (Regular)', category: 'é£²å“', per100g: { calories: 87, protein: 2.6, fat: 1.2, carbs: 16, sodium: 11, calcium: 34 }, perServing: null },
      { id: '354', name: 'ç”œè±†æ¼¿ (å‡é£²)', nameEn: 'Sweetened Soybean Milk (Cold)', category: 'é£²å“', per100g: { calories: 55, protein: 2.1, fat: 1.5, carbs: 8.4, sodium: 0, calcium: 9.0 }, perServing: null },
      { id: '355', name: 'ä¸‰è‰²å†° (å°‘ç”œ)', nameEn: 'Tri-colour Icy Drink (Less Sweet)', category: 'é£²å“', per100g: { calories: 78, protein: 1.0, fat: 2.9, carbs: 12, sodium: 7.0, calcium: 5.9 }, perServing: null },
      { id: '356', name: 'ä¸‰è‰²å†° (æ™®é€š)', nameEn: 'Tri-colour Icy Drink (Regular)', category: 'é£²å“', per100g: { calories: 83, protein: 1.0, fat: 2.3, carbs: 13, sodium: 8.0, calcium: 6.0 }, perServing: null },

      // ç†±é£² (Hot Drinks)
      { id: '357', name: 'æä»éœœ (ä¸åŠ ç³–)', nameEn: 'Almond Drink (No Sugar Added)', category: 'é£²å“', per100g: { calories: 46, protein: 1.4, fat: 1.7, carbs: 6.3, sodium: 24, calcium: 46 }, perServing: null },
      { id: '358', name: 'æœ±å¤åŠ›å’–å•¡ (ä¸åŠ ç³–)', nameEn: 'Caffe Mocha (No Sugar Added)', category: 'é£²å“', per100g: { calories: 71, protein: 2.2, fat: 2.8, carbs: 9.1, sodium: 43, calcium: 66 }, perServing: null },
      { id: '359', name: 'æ³¡æ²«å’–å•¡ (ä¸åŠ ç³–)', nameEn: 'Cappuccino (No Sugar Added)', category: 'é£²å“', per100g: { calories: 40, protein: 2.1, fat: 2.2, carbs: 3.0, sodium: 27, calcium: 68 }, perServing: null },
      { id: '360', name: 'æŸšå­èŒ¶', nameEn: 'Citron Tea', category: 'é£²å“', per100g: { calories: 47, protein: 0, fat: 0, carbs: 11, sodium: 20, calcium: 5.2 }, perServing: null },
      { id: '361', name: 'å”‚å’• (ä¸åŠ ç³–)', nameEn: 'Cocoa Drink (No Sugar Added)', category: 'é£²å“', per100g: { calories: 43, protein: 2.1, fat: 2.2, carbs: 3.7, sodium: 26, calcium: 55 }, perServing: null },
      { id: '362', name: 'å’–å•¡ (ä¸åŠ ç³–)', nameEn: 'Coffee (No Sugar Added)', category: 'é£²å“', per100g: { calories: 43, protein: 2.0, fat: 2.4, carbs: 3.3, sodium: 33, calcium: 62 }, perServing: null },
      { id: '363', name: 'èŒ…æ ¹ç«¹è”—æ°´', nameEn: 'Cogon Grass and Sugar Cane Drink', category: 'é£²å“', per100g: { calories: 25, protein: 0, fat: 0, carbs: 6.1, sodium: 0, calcium: 3.8 }, perServing: null },
      { id: '364', name: 'ç‰¹æ¿ƒå’–å•¡ (ä¸åŠ ç³–)', nameEn: 'Espresso (No Sugar Added)', category: 'é£²å“', per100g: { calories: 12, protein: 0.8, fat: 0, carbs: 1.7, sodium: 0, calcium: 4.7 }, perServing: null },
      { id: '365', name: 'äº”èŠ±èŒ¶', nameEn: 'Five Flower Tea', category: 'é£²å“', per100g: { calories: 30, protein: 0, fat: 0, carbs: 7.0, sodium: 0, calcium: 4.6 }, perServing: null },
      { id: '366', name: 'èŠ±æ——åƒèœœ', nameEn: 'Ginseng Honey', category: 'é£²å“', per100g: { calories: 37, protein: 0, fat: 0, carbs: 8.6, sodium: 0, calcium: 2.7 }, perServing: null },
      { id: '367', name: 'çç ç¶ èŒ¶ (ä¸åŠ ç³–)', nameEn: 'Green Tea with Pearl Tapioca (No Sugar Added)', category: 'é£²å“', per100g: { calories: 37, protein: 0, fat: 0, carbs: 9.2, sodium: 0, calcium: 2.5 }, perServing: null },
      { id: '368', name: 'æœ±å¤åŠ›é£²å“ (ä¸åŠ ç³–)', nameEn: 'Hot Chocolate Drink (No Sugar Added)', category: 'é£²å“', per100g: { calories: 57, protein: 1.7, fat: 2.0, carbs: 8.1, sodium: 38, calcium: 47 }, perServing: null },
      { id: '369', name: 'æª¸æª¬é‡‘æ¡”èœœ', nameEn: 'Lemon and Kumquat Honey', category: 'é£²å“', per100g: { calories: 54, protein: 0, fat: 0, carbs: 13, sodium: 140, calcium: 7.7 }, perServing: null },
      { id: '370', name: 'æª¸æª¬å’–å•¡ (ä¸åŠ ç³–)', nameEn: 'Lemon Coffee (No Sugar Added)', category: 'é£²å“', per100g: { calories: 18, protein: 0.4, fat: 0, carbs: 3.8, sodium: 0, calcium: 9.8 }, perServing: null },
      { id: '371', name: 'æª¸æ¨‚ (ç†±)', nameEn: 'Lemon Cola (Hot)', category: 'é£²å“', per100g: { calories: 42, protein: 0, fat: 0, carbs: 10, sodium: 0, calcium: 7.8 }, perServing: null },
      { id: '372', name: 'æª¸èœœ', nameEn: 'Lemon Honey', category: 'é£²å“', per100g: { calories: 40, protein: 0, fat: 0.4, carbs: 9.1, sodium: 0, calcium: 9.8 }, perServing: null },
      { id: '373', name: 'æª¸æª¬èŒ¶ (ä¸åŠ ç³–)', nameEn: 'Lemon Tea (No Sugar Added)', category: 'é£²å“', per100g: { calories: 15, protein: 0, fat: 0, carbs: 3.1, sodium: 0, calcium: 8.9 }, perServing: null },
      { id: '374', name: 'å¥¶èŒ¶ (ä¸åŠ ç³–)', nameEn: 'Milk Tea (No Sugar Added)', category: 'é£²å“', per100g: { calories: 46, protein: 2.3, fat: 2.7, carbs: 3.2, sodium: 40, calcium: 77 }, perServing: null },
      { id: '375', name: 'çç å¥¶èŒ¶ (ä¸åŠ ç³–)', nameEn: 'Milk Tea with Pearl Tapioca (No Sugar Added)', category: 'é£²å“', per100g: { calories: 75, protein: 0.3, fat: 2.8, carbs: 12, sodium: 25, calcium: 2.6 }, perServing: null },
      { id: '376', name: 'é…¸æ¢…æ¹¯', nameEn: 'Sour Plum Drink', category: 'é£²å“', per100g: { calories: 51, protein: 0, fat: 0, carbs: 12, sodium: 0, calcium: 6.0 }, perServing: null },
      { id: '377', name: 'è±†æ¼¿ (ä¸åŠ ç³–)', nameEn: 'Soybean Milk (No Sugar Added)', category: 'é£²å“', per100g: { calories: 28, protein: 2.4, fat: 1.6, carbs: 0.9, sodium: 0, calcium: 9.7 }, perServing: null },
      { id: '378', name: 'è¥¿æ´‹èœèœœ', nameEn: 'Watercress Honey', category: 'é£²å“', per100g: { calories: 36, protein: 0, fat: 0, carbs: 8.6, sodium: 13, calcium: 4.5 }, perServing: null },
      { id: '379', name: 'é´›é´¦ (ä¸åŠ ç³–)', nameEn: 'Yuan-yang (No Sugar Added)', category: 'é£²å“', per100g: { calories: 53, protein: 2.5, fat: 2.4, carbs: 5.3, sodium: 31, calcium: 70 }, perServing: null },

      // æ¸¯å¼å°èœ - 10æ¬¾æ¸¯å¼å°èœæ¨£æœ¬ç‡Ÿé¤Šç´ æ¸¬è©¦çµæœ (10é–“é¤å»³å¹³å‡å€¼)
      // æ•¸æ“šä¾†æº: é£Ÿç‰©å®‰å…¨ä¸­å¿ƒã€Šæ¸¯å¼å°èœç‡Ÿé¤Šç´ å«é‡ç ”ç©¶ã€‹è¡¨å››
      // æ³¨æ„: æ­¤å ±å‘Šåªæä¾›èƒ½é‡ã€è„‚è‚ªå’Œéˆ‰çš„æ•¸æ“š
      { id: '380', name: 'ä¹¾ç‚’ç‰›æ²³', nameEn: 'Stir-fried Beef Ho Fun', category: 'æ¸¯å¼å°èœ', per100g: { calories: 186, protein: null, fat: 7.4, carbs: null, sodium: 494, calcium: null }, perServing: { weight: 442, calories: 822, protein: null, fat: 33, carbs: null, sodium: 2200, calcium: null } },
      { id: '381', name: 'æšå·ç‚’é£¯', nameEn: 'Yangzhou Fried Rice', category: 'æ¸¯å¼å°èœ', per100g: { calories: 185, protein: null, fat: 7.0, carbs: null, sodium: 414, calcium: null }, perServing: { weight: 379, calories: 701, protein: null, fat: 26, carbs: null, sodium: 1560, calcium: null } },
      { id: '382', name: 'æ˜Ÿæ´²ç‚’ç±³', nameEn: 'Singapore Fried Vermicelli', category: 'æ¸¯å¼å°èœ', per100g: { calories: 159, protein: null, fat: 5.5, carbs: null, sodium: 576, calcium: null }, perServing: { weight: 392, calories: 624, protein: null, fat: 22, carbs: null, sodium: 2240, calcium: null } },
      { id: '383', name: 'è‚‰çµ²ç‚’éºµ', nameEn: 'Stir-fried Noodles with Shredded Pork', category: 'æ¸¯å¼å°èœ', per100g: { calories: 190, protein: null, fat: 7.6, carbs: null, sodium: 607, calcium: null }, perServing: { weight: 402, calories: 763, protein: null, fat: 31, carbs: null, sodium: 2410, calcium: null } },
      { id: '384', name: 'é®®èŒ„ç‰›è‚‰é£¯', nameEn: 'Beef with Fresh Tomato on Rice', category: 'æ¸¯å¼å°èœ', per100g: { calories: 125, protein: null, fat: 3.5, carbs: null, sodium: 350, calcium: null }, perServing: { weight: 447, calories: 559, protein: null, fat: 16, carbs: null, sodium: 1560, calcium: null } },
      { id: '385', name: 'å’•åš•è‚‰é£¯', nameEn: 'Sweet and Sour Pork on Rice', category: 'æ¸¯å¼å°èœ', per100g: { calories: 153, protein: null, fat: 5.2, carbs: null, sodium: 278, calcium: null }, perServing: { weight: 446, calories: 682, protein: null, fat: 23, carbs: null, sodium: 1240, calcium: null } },
      { id: '386', name: 'è¥¿èŠ¹é›æŸ³é£¯', nameEn: 'Chicken with Celery on Rice', category: 'æ¸¯å¼å°èœ', per100g: { calories: 125, protein: null, fat: 3.1, carbs: null, sodium: 359, calcium: null }, perServing: { weight: 439, calories: 549, protein: null, fat: 13, carbs: null, sodium: 1560, calcium: null } },
      { id: '387', name: 'è±‰æ¤’æ’éª¨é£¯', nameEn: 'Spare Ribs with Black Bean Sauce on Rice', category: 'æ¸¯å¼å°èœ', per100g: { calories: 155, protein: null, fat: 5.8, carbs: null, sodium: 394, calcium: null }, perServing: { weight: 455, calories: 705, protein: null, fat: 26, carbs: null, sodium: 1800, calcium: null } },
      { id: '388', name: 'ç‘å£«é›ç¿¼é£¯', nameEn: 'Swiss Chicken Wings on Rice', category: 'æ¸¯å¼å°èœ', per100g: { calories: 150, protein: null, fat: 4.9, carbs: null, sodium: 381, calcium: null }, perServing: { weight: 445, calories: 668, protein: null, fat: 22, carbs: null, sodium: 1690, calcium: null } },
      { id: '389', name: 'ç«è…¿è›‹ç‚’é£¯', nameEn: 'Ham and Egg Fried Rice', category: 'æ¸¯å¼å°èœ', per100g: { calories: 180, protein: null, fat: 6.9, carbs: null, sodium: 536, calcium: null }, perServing: { weight: 386, calories: 694, protein: null, fat: 26, carbs: null, sodium: 2050, calcium: null } },

      // æ¸¯å¼å°èœ - è¡¨å››é¡å¤–5æ¬¾å°èœ (10é–“é¤å»³å¹³å‡å€¼)
      { id: '390', name: 'é¹¹è›‹è’¸è‚‰é¤…', nameEn: 'Steamed Minced Pork with Salted Egg', category: 'æ¸¯å¼å°èœ', per100g: { calories: 271, protein: null, fat: 6.0, carbs: null, sodium: 480, calcium: null }, perServing: { weight: 278, calories: 753, protein: null, fat: 18, carbs: null, sodium: 1668, calcium: null } },
      { id: '391', name: 'èœç±³é­šæ»‘', nameEn: 'Minced Fish with Vegetables on Rice', category: 'æ¸¯å¼å°èœ', per100g: { calories: 154, protein: null, fat: 1.6, carbs: null, sodium: 450, calcium: null }, perServing: { weight: 423, calories: 651, protein: null, fat: 6, carbs: null, sodium: 1930, calcium: null } },
      { id: '392', name: 'æ¢…èœè‚‰ç²’å››å­£è±†', nameEn: 'Preserved Vegetables with Minced Pork and French Beans', category: 'æ¸¯å¼å°èœ', per100g: { calories: 128, protein: null, fat: 1.8, carbs: null, sodium: 286, calcium: null }, perServing: { weight: 246, calories: 315, protein: null, fat: 5, carbs: null, sodium: 1082, calcium: null } },
      { id: '393', name: 'è¦ä»ç‚’è›‹', nameEn: 'Scrambled Eggs with Shrimp', category: 'æ¸¯å¼å°èœ', per100g: { calories: 205, protein: null, fat: 2.8, carbs: null, sodium: 398, calcium: null }, perServing: { weight: 348, calories: 714, protein: null, fat: 14, carbs: null, sodium: 1852, calcium: null } },
      { id: '394', name: 'é­šé¦™èŒ„å­ç…²', nameEn: 'Fish-flavoured Eggplant Hot Pot', category: 'æ¸¯å¼å°èœ', per100g: { calories: 131, protein: null, fat: 0.4, carbs: null, sodium: 483, calcium: null }, perServing: { weight: 464, calories: 609, protein: null, fat: 6, carbs: null, sodium: 1968, calcium: null } },

      // ä¸­å¼ç´ èœ - è¡¨äº”aï¼š8ç¨®ä¸­å¼ç´ èœæ¨£æœ¬çš„ç‡Ÿé¤Šå«é‡æ¸¬è©¦çµæœ (å¹³å‡å€¼)
      { id: '395', name: 'ç²Ÿç±³ç´ é­šå¡Š', nameEn: 'Vegetarian Corn Fish Fillet', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 102, protein: null, fat: 5.6, carbs: null, sodium: 376, calcium: null }, perServing: { weight: 383, calories: 373, protein: null, fat: 23, carbs: null, sodium: 1490, calcium: null } },
      { id: '396', name: 'é½‹é¹µå‘³æ‹¼ç›¤', nameEn: 'Vegetarian Braised Platter', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 174, protein: null, fat: 7.4, carbs: null, sodium: 355, calcium: null }, perServing: { weight: 585, calories: 906, protein: null, fat: 37, carbs: null, sodium: 2030, calcium: null } },
      { id: '397', name: 'ç´ é­šé¦™èŒ„å­', nameEn: 'Vegetarian Fish-flavoured Eggplant', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 68, protein: null, fat: 7.8, carbs: null, sodium: 350, calcium: null }, perServing: { weight: 477, calories: 289, protein: null, fat: 22, carbs: null, sodium: 1476, calcium: null } },
      { id: '398', name: 'ç¾…æ¼¢é½‹', nameEn: 'Lo Han Jai (Buddha\'s Delight)', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 67, protein: null, fat: 5.5, carbs: null, sodium: 330, calcium: null }, perServing: { weight: 519, calories: 336, protein: null, fat: 20, carbs: null, sodium: 1830, calcium: null } },
      { id: '399', name: 'ç´ ç¦å»ºç‚’é£¯', nameEn: 'Vegetarian Fujian Fried Rice', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 120, protein: null, fat: 3.9, carbs: null, sodium: 290, calcium: null }, perServing: { weight: 835, calories: 899, protein: null, fat: 27, carbs: null, sodium: 2440, calcium: null } },
      { id: '400', name: 'ç´…ç‡’è±†è…', nameEn: 'Braised Tofu', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 92, protein: null, fat: 5.5, carbs: null, sodium: 313, calcium: null }, perServing: { weight: 387, calories: 234, protein: null, fat: 13, carbs: null, sodium: 809, calcium: null } },
      { id: '401', name: 'è è˜¿ç´ å’•åš•è‚‰', nameEn: 'Vegetarian Sweet and Sour Pork with Pineapple', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 116, protein: null, fat: 6.5, carbs: null, sodium: 317, calcium: null }, perServing: { weight: 428, calories: 510, protein: null, fat: 17, carbs: null, sodium: 653, calcium: null } },
      { id: '402', name: 'æ»‹å‘³é½‹', nameEn: 'Assorted Vegetarian Delicacies', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 127, protein: null, fat: 7.7, carbs: null, sodium: 410, calcium: null }, perServing: { weight: 400, calories: 480, protein: null, fat: 34, carbs: null, sodium: 872, calcium: null } },
      { id: '403', name: 'èŠ‹é ­é­š', nameEn: 'Vegetarian Taro Fish', category: 'ä¸­å¼ç´ èœ', per100g: { calories: 92, protein: null, fat: 2.0, carbs: null, sodium: 204, calcium: null }, perServing: { weight: 255, calories: 669, protein: null, fat: 18, carbs: null, sodium: 588, calcium: null } }
    ];

    // Initialize
    document.addEventListener('DOMContentLoaded', async () => {
      // Try to load from IndexedDB first
      try {
        await openDatabase();
        await loadFromIndexedDB();

        // Load auto sync setting on startup
        const savedAutoSync = await loadAutoSyncSetting();
        autoSyncEnabled = savedAutoSync;
        console.log('Loaded autoSyncEnabled:', autoSyncEnabled);
      } catch (err) {
        console.log('IndexedDB not available:', err);
      }

      renderCategories();
      renderCategoryPills();
      renderFoodList();
      updateStats();
      setupEventListeners();
    });

    function setupEventListeners() {
      // Search
      document.getElementById('searchInput').addEventListener('input', (e) => {
        renderFoodList(e.target.value);
      });

      // Form submit
      document.getElementById('foodForm').addEventListener('submit', handleFormSubmit);

      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.header-menu-container')) {
          document.getElementById('dropdownMenu').classList.remove('show');
        }
      });
    }

    function toggleMenu() {
      event.stopPropagation();
      document.getElementById('dropdownMenu').classList.toggle('show');
    }

    function showCategoryManager() {
      document.getElementById('dropdownMenu').classList.remove('show');
      document.getElementById('homePage').classList.remove('active');
      document.getElementById('categoryPage').classList.add('active');
      document.getElementById('fab').style.display = 'none';
    }

    function backToHome() {
      document.getElementById('categoryPage').classList.remove('active');
      document.getElementById('homePage').classList.add('active');
      document.getElementById('fab').style.display = 'flex';
    }

    function renderCategoryPills() {
      const container = document.getElementById('categoryPills');
      const allCategories = ['å…¨éƒ¨', ...categories];
      container.innerHTML = allCategories.map(cat => {
        const emoji = categoryEmojis[cat] || 'ğŸ“¦';
        return `
          <button class="category-pill ${cat === currentFilter ? 'active' : ''}"
                  onclick="filterByCategory('${cat}')">
            ${cat !== 'å…¨éƒ¨' ? `<span class="emoji">${emoji}</span>` : ''}
            ${cat}
          </button>
        `;
      }).join('');
    }

    function filterByCategory(category) {
      currentFilter = category;
      renderCategoryPills();
      renderFoodList(document.getElementById('searchInput').value);
    }

    function toggleDisplayMode(event, foodId) {
      event.stopPropagation();
      if (showPer100gSet.has(foodId)) {
        showPer100gSet.delete(foodId);
        showToast('å·²åˆ‡æ›è‡³æ¯ä»½é¡¯ç¤º');
      } else {
        showPer100gSet.add(foodId);
        showToast('å·²åˆ‡æ›è‡³æ¯100gé¡¯ç¤º');
      }
      renderFoodList(document.getElementById('searchInput').value);
    }

    function renderFoodList(searchTerm = '') {
      const container = document.getElementById('foodList');
      let filteredFoods = foods;

      if (currentFilter !== 'å…¨éƒ¨') {
        filteredFoods = filteredFoods.filter(f => f.category === currentFilter);
      }

      if (searchTerm) {
        const term = searchTerm.toLowerCase();
        filteredFoods = filteredFoods.filter(f =>
          f.name.toLowerCase().includes(term) ||
          (f.nameEn && f.nameEn.toLowerCase().includes(term)) ||
          f.category.toLowerCase().includes(term)
        );
      }

      if (filteredFoods.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <i class="fas fa-bowl-food"></i>
            <h3>æš«ç„¡è³‡æ–™</h3>
            <p>é»æ“Šå³ä¸‹è§’ã€Œ+ã€æŒ‰éˆ•é–‹å§‹å»ºç«‹ä½ å˜…ç‡Ÿé¤Šè³‡æ–™åº«</p>
          </div>
        `;
        return;
      }

      container.innerHTML = filteredFoods.map(food => {
        const ps = food.perServing;
        const p100 = food.per100g;
        const emoji = categoryEmojis[food.category] || 'ğŸ“¦';

        // Determine which data to display based on this food's mode
        const showPer100g = showPer100gSet.has(food.id);
        const hasPerServing = ps && (ps.calories !== undefined);
        const hasPer100g = p100 && (p100.calories !== undefined);

        // Default: show perServing if available, otherwise per100g
        let data, modeText, modeClass;

        if (hasPerServing && hasPer100g) {
          // Has both - can toggle
          data = showPer100g ? p100 : ps;
          modeText = showPer100g ? 'æ¯100g' : (ps.weight ? `æ¯ä»½ ${ps.weight}g` : 'æ¯ä»½');
          modeClass = showPer100g ? 'per100g' : 'perserving';
        } else if (hasPerServing) {
          // Only perServing
          data = ps;
          modeText = ps.weight ? `æ¯ä»½ ${ps.weight}g` : 'æ¯ä»½';
          modeClass = 'perserving';
        } else {
          // Only per100g
          data = p100;
          modeText = 'æ¯100g';
          modeClass = 'per100g';
        }

        return `
        <div class="food-card">
          <div class="food-card-header">
            <div>
              <div class="food-name">${food.name}</div>
              <div class="food-meta">
                <span class="food-category-tag">
                  <span>${emoji}</span>
                  ${food.category}
                </span>
                <span class="nutrition-mode-tag ${modeClass}" onclick="toggleDisplayMode(event, '${food.id}')" title="é»æ“Šåˆ‡æ›é¡¯ç¤ºæ¨¡å¼">
                  ${modeText} <i class="fas fa-sync-alt"></i>
                </span>
              </div>
            </div>
            <div class="food-card-actions">
              <button class="action-icon-btn" onclick="editFood('${food.id}')" title="ç·¨è¼¯">
                <i class="fas fa-pen"></i>
              </button>
              <button class="action-icon-btn delete" onclick="confirmDeleteFood('${food.id}')" title="åˆªé™¤">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>

          <div class="nutrition-grid" onclick="toggleDisplayMode(event, '${food.id}')" title="é»æ“Šåˆ‡æ›é¡¯ç¤ºæ¨¡å¼">
            <div class="nutrition-box cal">
              <div class="nutrition-value">${data.calories !== null && data.calories !== undefined ? data.calories : '--'}</div>
              <div class="nutrition-label">KCAL</div>
            </div>
            <div class="nutrition-box protein">
              <div class="nutrition-value">${data.protein !== null && data.protein !== undefined ? data.protein + 'g' : '--'}</div>
              <div class="nutrition-label">è›‹ç™½è³ª</div>
            </div>
            <div class="nutrition-box fat">
              <div class="nutrition-value">${data.fat !== null && data.fat !== undefined ? data.fat + 'g' : '--'}</div>
              <div class="nutrition-label">è„‚è‚ª</div>
            </div>
            <div class="nutrition-box carbs">
              <div class="nutrition-value">${data.carbs !== null && data.carbs !== undefined ? data.carbs + 'g' : '--'}</div>
              <div class="nutrition-label">ç¢³æ°´</div>
            </div>
            ${data.sodium !== null && data.sodium !== undefined ? `
            <div class="nutrition-box sodium">
              <div class="nutrition-value">${data.sodium}</div>
              <div class="nutrition-label">éˆ‰ MG</div>
            </div>
            ` : ''}
            ${data.calcium !== null && data.calcium !== undefined ? `
            <div class="nutrition-box calcium">
              <div class="nutrition-value">${data.calcium}</div>
              <div class="nutrition-label">éˆ£ MG</div>
            </div>
            ` : ''}
          </div>

          <div class="food-footer">
            <i class="fas fa-info-circle"></i>
            <span>${food.nameEn || food.name} | ${food.category === 'éº¥ç•¶å‹' ? 'éº¥ç•¶å‹é¦™æ¸¯' : 'é£Ÿç’°ç½²å ±å‘Š'}</span>
          </div>
        </div>
      `}).join('');
    }

    function renderCategories() {
      // Update category select in form
      const select = document.getElementById('foodCategory');
      select.innerHTML = categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');

      // Update category list in management page
      const list = document.getElementById('categoryList');
      list.innerHTML = categories.map(cat => {
        const count = foods.filter(f => f.category === cat).length;
        const emoji = categoryEmojis[cat] || 'ğŸ“¦';
        return `
          <div class="category-item">
            <div>
              <span class="category-item-name">${emoji} ${cat}</span>
              <span class="category-item-count"> Â· ${count} é …</span>
            </div>
            <button class="category-delete-btn" onclick="confirmDeleteCategory('${cat}')">
              <i class="fas fa-minus-circle"></i>
            </button>
          </div>
        `;
      }).join('');
    }

    function addCategory() {
      const input = document.getElementById('newCategoryInput');
      const name = input.value.trim();
      if (name && !categories.includes(name)) {
        categories.push(name);
        input.value = '';
        renderCategories();
        renderCategoryPills();
        updateStats();
        saveToIndexedDB(); // Auto-save to IndexedDB
        doAutoSync(); // Auto-sync to cloud
        showToast('å·²æ–°å¢åˆ†é¡');
      }
    }

    function confirmDeleteCategory(name) {
      const count = foods.filter(f => f.category === name).length;
      showConfirmModal(
        'ç¢ºèªåˆªé™¤åˆ†é¡ï¼Ÿ',
        count > 0 ? `æ­¤åˆ†é¡ä¸‹æœ‰ ${count} å€‹é …ç›®ï¼Œåˆªé™¤å¾Œé …ç›®æœƒè¢«ç§»è‡³ã€Œå…¶ä»–ã€åˆ†é¡ã€‚` : 'ç¢ºå®šè¦åˆªé™¤æ­¤åˆ†é¡å—ï¼Ÿ',
        () => deleteCategory(name)
      );
    }

    function deleteCategory(name) {
      // Move foods to "å…¶ä»–"
      foods.forEach(f => {
        if (f.category === name) f.category = 'å…¶ä»–';
      });
      categories = categories.filter(c => c !== name);
      if (!categories.includes('å…¶ä»–')) categories.push('å…¶ä»–');
      renderCategories();
      renderCategoryPills();
      renderFoodList();
      updateStats();
      saveToIndexedDB(); // Auto-save to IndexedDB
      doAutoSync(); // Auto-sync to cloud
      closeConfirmModal();
      showToast('å·²åˆªé™¤åˆ†é¡');
    }

    function setInputMode(mode) {
      formInputMode = mode;
      const per100gBtn = document.getElementById('inputModePer100g');
      const perServingBtn = document.getElementById('inputModePerServing');
      const servingWeightGroup = document.getElementById('servingWeightGroup');
      const nutritionTitle = document.getElementById('nutritionSectionTitle');

      if (mode === 'per100g') {
        per100gBtn.classList.add('active');
        perServingBtn.classList.remove('active');
        servingWeightGroup.classList.add('hidden');
        nutritionTitle.textContent = 'ç‡Ÿé¤Šè³‡æ–™ (æ¯100g)';
      } else {
        per100gBtn.classList.remove('active');
        perServingBtn.classList.add('active');
        servingWeightGroup.classList.remove('hidden');
        nutritionTitle.textContent = 'ç‡Ÿé¤Šè³‡æ–™ (æ¯é£Ÿç”¨ä»½é‡)';
      }
    }

    function openAddModal() {
      document.getElementById('modalTitle').textContent = 'æ–°å¢é£Ÿç‰©';
      document.getElementById('submitBtn').textContent = 'å„²å­˜';
      document.getElementById('foodForm').reset();
      document.getElementById('editId').value = '';
      setInputMode('per100g');
      clearScanPreview();
      document.getElementById('addModal').classList.add('active');
    }

    function closeModal() {
      document.getElementById('addModal').classList.remove('active');
      clearScanPreview();
    }

    // Nutrition Label Scanning Functions
    let currentImageFile = null;

    function handleLabelImage(event) {
      const file = event.target.files[0];
      if (!file) return;

      currentImageFile = file;

      // Show preview
      const reader = new FileReader();
      reader.onload = (e) => {
        document.getElementById('scanPreviewImg').src = e.target.result;
        document.getElementById('scanPreview').classList.add('show');
      };
      reader.readAsDataURL(file);

      // Start AI recognition
      scanNutritionLabel(file);

      // Reset input
      event.target.value = '';
    }

    function clearScanPreview() {
      document.getElementById('scanPreview').classList.remove('show');
      document.getElementById('scanPreviewImg').src = '';
      document.getElementById('scanStatus').classList.remove('show', 'success', 'error');
      document.getElementById('scanStatus').textContent = '';
      document.getElementById('scanLabelBtn').classList.remove('scanning');
      document.getElementById('scanLabelBtn').querySelector('span').textContent = 'æ‹æ”/ä¸Šè¼‰ç‡Ÿé¤Šæ¨™ç±¤';
      currentImageFile = null;
    }

    function setScanStatus(message, type = '') {
      const status = document.getElementById('scanStatus');
      status.textContent = message;
      status.classList.remove('success', 'error');
      if (type) status.classList.add(type);
      status.classList.add('show');
    }

    // Register nutrition scan handler once globally
    let nutritionScanHandlerRegistered = false;
    function registerNutritionScanHandler() {
      if (nutritionScanHandlerRegistered) return;
      nutritionScanHandlerRegistered = true;

      window.Poe.registerHandler('nutrition-scan-handler', (result) => {
        const btn = document.getElementById('scanLabelBtn');
        if (!btn) return;

        const msg = result.responses[0];
        console.log('Nutrition scan response:', JSON.stringify(msg.status), msg.content ? msg.content.substring(0, 200) : 'no content');

        if (msg.status === 'error') {
          btn.classList.remove('scanning');
          btn.querySelector('i').className = 'fas fa-camera';
          btn.querySelector('span').textContent = 'æ‹æ”/ä¸Šè¼‰ç‡Ÿé¤Šæ¨™ç±¤';
          setScanStatus('è­˜åˆ¥å¤±æ•—ï¼š' + (msg.statusText || 'è«‹é‡è©¦'), 'error');
          return;
        }

        if (msg.status === 'incomplete') {
          // Still processing, update status
          setScanStatus('æ­£åœ¨åˆ†æä¸­...');
          return;
        }

        if (msg.status === 'complete') {
          btn.classList.remove('scanning');
          btn.querySelector('i').className = 'fas fa-camera';
          btn.querySelector('span').textContent = 'æ‹æ”/ä¸Šè¼‰ç‡Ÿé¤Šæ¨™ç±¤';

          try {
            // Parse the JSON response
            const content = msg.content;
            console.log('Full AI response:', content);
            // Find JSON in the response
            const jsonMatch = content.match(/\{[\s\S]*\}/);
            if (jsonMatch) {
              const data = JSON.parse(jsonMatch[0]);
              fillFormWithScannedData(data);
              setScanStatus('âœ“ å·²è‡ªå‹•å¡«å…¥è­˜åˆ¥åˆ°çš„ç‡Ÿé¤Šè³‡æ–™', 'success');
            } else {
              setScanStatus('ç„¡æ³•è§£æç‡Ÿé¤Šè³‡æ–™ï¼Œè«‹æ‰‹å‹•è¼¸å…¥', 'error');
            }
          } catch (err) {
            console.log('Parse error:', err);
            setScanStatus('è§£æå¤±æ•—ï¼Œè«‹æ‰‹å‹•è¼¸å…¥', 'error');
          }
        }
      });
    }

    async function scanNutritionLabel(file) {
      const btn = document.getElementById('scanLabelBtn');
      btn.classList.add('scanning');
      btn.querySelector('i').className = 'fas fa-spinner';
      btn.querySelector('span').textContent = 'AI è­˜åˆ¥ä¸­...';

      setScanStatus('æ­£åœ¨åˆ†æç‡Ÿé¤Šæ¨™ç±¤...');

      // Register handler if not already done
      registerNutritionScanHandler();

      try {
        const prompt = `@GPT-5.2 è«‹åˆ†æé€™å¼µç‡Ÿé¤Šæ¨™ç±¤åœ–ç‰‡ï¼Œæå–ä»¥ä¸‹è³‡è¨Šä¸¦ä»¥ç´” JSON æ ¼å¼å›è¦†ï¼ˆä¸è¦ markdownï¼‰ï¼š

{
  "name": "é£Ÿç‰©åç¨±ï¼ˆä¸­æ–‡ï¼Œå¦‚æœçœ‹åˆ°çš„è©±ï¼‰",
  "nameEn": "é£Ÿç‰©åç¨±ï¼ˆè‹±æ–‡ï¼Œå¦‚æœçœ‹åˆ°çš„è©±ï¼‰",
  "mode": "per100g æˆ– perServingï¼ˆæ ¹æ“šæ¨™ç±¤ä¸Šçš„æ•¸æ“šåŸºæº–ï¼‰",
  "servingWeight": æ¯ä»½é‡é‡æ•¸å­—ï¼ˆå¦‚æœæ˜¯æ¯ä»½çš„è©±ï¼Œå–®ä½å…‹ï¼‰,
  "calories": ç†±é‡æ•¸å­—ï¼ˆkcalï¼‰,
  "protein": è›‹ç™½è³ªæ•¸å­—ï¼ˆgï¼‰,
  "fat": è„‚è‚ªæ•¸å­—ï¼ˆgï¼‰,
  "carbs": ç¢³æ°´åŒ–åˆç‰©æ•¸å­—ï¼ˆgï¼‰,
  "sodium": éˆ‰æ•¸å­—ï¼ˆmgï¼Œå¦‚ç„¡å‰‡ nullï¼‰,
  "calcium": éˆ£æ•¸å­—ï¼ˆmgï¼Œå¦‚ç„¡å‰‡ nullï¼‰
}

æ³¨æ„ï¼š
- åªå›è¦† JSONï¼Œä¸è¦å…¶ä»–æ–‡å­—
- å¦‚æœæ˜¯ã€Œæ¯100å…‹ã€æˆ–ã€Œper 100gã€å‰‡ mode ç‚º "per100g"
- å¦‚æœæ˜¯ã€Œæ¯ä»½ã€æˆ–ã€Œper servingã€å‰‡ mode ç‚º "perServing"
- æ•¸å­—ä¸è¦å¸¶å–®ä½ï¼Œåªè¦ç´”æ•¸å­—
- å¦‚æœæ‰¾ä¸åˆ°æŸé …è³‡æ–™ï¼Œå¡« null`;

        await window.Poe.sendUserMessage(prompt, {
          attachments: [file],
          handler: 'nutrition-scan-handler',
          stream: false,
          openChat: false
        });
      } catch (err) {
        btn.classList.remove('scanning');
        btn.querySelector('i').className = 'fas fa-camera';
        btn.querySelector('span').textContent = 'æ‹æ”/ä¸Šè¼‰ç‡Ÿé¤Šæ¨™ç±¤';
        setScanStatus('ç™¼é€å¤±æ•—ï¼š' + err.message, 'error');
      }
    }

    function fillFormWithScannedData(data) {
      // Fill food name if available
      if (data.name) {
        document.getElementById('foodName').value = data.name;
      }
      if (data.nameEn) {
        document.getElementById('foodNameEn').value = data.nameEn;
      }

      // Set input mode based on scanned data
      if (data.mode === 'perServing' && data.servingWeight) {
        setInputMode('perServing');
        document.getElementById('servingWeight').value = data.servingWeight;
      } else {
        setInputMode('per100g');
      }

      // Fill nutrition data
      if (data.calories !== null && data.calories !== undefined) {
        document.getElementById('caloriesServing').value = data.calories;
      }
      if (data.protein !== null && data.protein !== undefined) {
        document.getElementById('proteinServing').value = data.protein;
      }
      if (data.fat !== null && data.fat !== undefined) {
        document.getElementById('fatServing').value = data.fat;
      }
      if (data.carbs !== null && data.carbs !== undefined) {
        document.getElementById('carbsServing').value = data.carbs;
      }
      if (data.sodium !== null && data.sodium !== undefined) {
        document.getElementById('sodiumServing').value = data.sodium;
      }
      if (data.calcium !== null && data.calcium !== undefined) {
        document.getElementById('calciumServing').value = data.calcium;
      }
    }

    function editFood(id) {
      const food = foods.find(f => f.id === id);
      if (!food) return;

      document.getElementById('modalTitle').textContent = 'ç·¨è¼¯é£Ÿç‰©';
      document.getElementById('submitBtn').textContent = 'æ›´æ–°';
      document.getElementById('editId').value = id;
      document.getElementById('foodName').value = food.name;
      document.getElementById('foodNameEn').value = food.nameEn || '';
      document.getElementById('foodCategory').value = food.category;

      // Helper to display value (null becomes empty, 0 stays as 0)
      const displayVal = (val) => val !== null && val !== undefined ? val : '';

      // Determine input mode based on existing data
      if (food.perServing && food.perServing.weight) {
        // Has serving data, use perServing mode
        setInputMode('perServing');
        document.getElementById('servingWeight').value = food.perServing.weight;
        document.getElementById('caloriesServing').value = displayVal(food.perServing.calories);
        document.getElementById('proteinServing').value = displayVal(food.perServing.protein);
        document.getElementById('fatServing').value = displayVal(food.perServing.fat);
        document.getElementById('carbsServing').value = displayVal(food.perServing.carbs);
        document.getElementById('sodiumServing').value = displayVal(food.perServing.sodium);
        document.getElementById('calciumServing').value = displayVal(food.perServing.calcium);
      } else {
        // No serving data, use per100g mode
        setInputMode('per100g');
        document.getElementById('servingWeight').value = '';
        document.getElementById('caloriesServing').value = displayVal(food.per100g.calories);
        document.getElementById('proteinServing').value = displayVal(food.per100g.protein);
        document.getElementById('fatServing').value = displayVal(food.per100g.fat);
        document.getElementById('carbsServing').value = displayVal(food.per100g.carbs);
        document.getElementById('sodiumServing').value = displayVal(food.per100g.sodium);
        document.getElementById('calciumServing').value = displayVal(food.per100g.calcium);
      }

      document.getElementById('addModal').classList.add('active');
    }

    async function handleFormSubmit(e) {
      e.preventDefault();

      const editId = document.getElementById('editId').value;
      const servingWeight = parseFloat(document.getElementById('servingWeight').value) || null;

      // Validate: if perServing mode, servingWeight is required
      if (formInputMode === 'perServing' && !servingWeight) {
        showToast('è«‹è¼¸å…¥æ¯ä»½é‡é‡');
        document.getElementById('servingWeight').focus();
        return;
      }

      // Helper function to parse value - returns null if empty, otherwise the number
      const parseNutritionValue = (id) => {
        const value = document.getElementById(id).value.trim();
        if (value === '') return null;
        const num = parseFloat(value);
        return isNaN(num) ? null : num;
      };

      const nutritionData = {
        calories: parseNutritionValue('caloriesServing'),
        protein: parseNutritionValue('proteinServing'),
        fat: parseNutritionValue('fatServing'),
        carbs: parseNutritionValue('carbsServing'),
        sodium: parseNutritionValue('sodiumServing'),
        calcium: parseNutritionValue('calciumServing')
      };

      let foodData;

      if (formInputMode === 'per100g') {
        // Input is per 100g, no serving data
        foodData = {
          id: editId || Date.now().toString(),
          name: document.getElementById('foodName').value.trim(),
          nameEn: document.getElementById('foodNameEn').value.trim() || null,
          category: document.getElementById('foodCategory').value,
          per100g: nutritionData,
          perServing: null
        };
      } else {
        // Input is per serving, calculate per100g
        // Helper to convert per serving to per 100g (handles null values)
        const toPer100g = (val, decimals = 0) => {
          if (val === null) return null;
          const result = val / servingWeight * 100;
          return decimals > 0 ? Math.round(result * Math.pow(10, decimals)) / Math.pow(10, decimals) : Math.round(result);
        };

        foodData = {
          id: editId || Date.now().toString(),
          name: document.getElementById('foodName').value.trim(),
          nameEn: document.getElementById('foodNameEn').value.trim() || null,
          category: document.getElementById('foodCategory').value,
          per100g: {
            calories: toPer100g(nutritionData.calories),
            protein: toPer100g(nutritionData.protein, 1),
            fat: toPer100g(nutritionData.fat, 1),
            carbs: toPer100g(nutritionData.carbs, 1),
            sodium: toPer100g(nutritionData.sodium),
            calcium: toPer100g(nutritionData.calcium)
          },
          perServing: {
            weight: servingWeight,
            ...nutritionData
          }
        };
      }

      if (editId) {
        const index = foods.findIndex(f => f.id === editId);
        if (index > -1) foods[index] = foodData;
        showToast('å·²æ›´æ–°è³‡æ–™');
      } else {
        foods.push(foodData);
        showToast('å·²æ–°å¢é£Ÿç‰©');
      }

      closeModal();
      renderFoodList();
      renderCategories();
      updateStats();
      saveToIndexedDB(); // Auto-save to IndexedDB

      // Auto-upload: check checkbox directly and get URL
      doAutoSync();
    }

    // Centralized auto-sync function - SIMPLIFIED: always sync if URL is configured
    async function doAutoSync() {
      // Get URL from memory or IndexedDB
      let url = memorySettings.appsScriptUrl;

      if (!url && db) {
        try {
          const tx = db.transaction(['settings'], 'readonly');
          const store = tx.objectStore('settings');
          const result = await new Promise(resolve => {
            const req = store.get('appsScriptUrl');
            req.onsuccess = () => resolve(req.result);
            req.onerror = () => resolve(null);
          });
          url = result ? result.value : '';
          // Cache it in memory for next time
          if (url) memorySettings.appsScriptUrl = url;
        } catch (e) { }
      }

      // No URL configured, skip sync
      if (!url) return;

      // Do the upload
      showToast('æ­£åœ¨åŒæ­¥...');
      try {
        await fetch(url, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            foods: foods,
            categories: categories,
            categoryEmojis: categoryEmojis,
            lastUpdated: new Date().toISOString()
          })
        });
        showToast('å·²åŒæ­¥ âœ“');
      } catch (e) {
        showToast('åŒæ­¥å¤±æ•—');
      }
    }

    function confirmDeleteFood(id) {
      const food = foods.find(f => f.id === id);
      showConfirmModal(
        'ç¢ºèªåˆªé™¤ï¼Ÿ',
        `ç¢ºå®šè¦åˆªé™¤ã€Œ${food.name}ã€å—ï¼Ÿæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚`,
        () => deleteFood(id)
      );
    }

    function deleteFood(id) {
      foods = foods.filter(f => f.id !== id);
      closeConfirmModal();
      renderFoodList();
      renderCategories();
      updateStats();
      saveToIndexedDB(); // Auto-save to IndexedDB
      doAutoSync(); // Auto-sync to cloud
      showToast('å·²åˆªé™¤');
    }

    function updateStats() {
      document.getElementById('totalItems').textContent = foods.length;
      document.getElementById('totalCategories').textContent = categories.length;
    }

    // Confirm Modal
    function showConfirmModal(title, message, onConfirm) {
      document.getElementById('confirmTitle').textContent = title;
      document.getElementById('confirmMessage').textContent = message;
      document.getElementById('confirmAction').onclick = onConfirm;
      document.getElementById('confirmModal').classList.add('active');
    }

    function closeConfirmModal() {
      document.getElementById('confirmModal').classList.remove('active');
    }

    // Toast
    function showToast(message, duration) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), duration || 2000);
    }

    // Data Management
    function exportData() {
      const data = { foods, categories, exportDate: new Date().toISOString() };
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `nutrition-data-${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      showToast('å·²åŒ¯å‡ºè³‡æ–™');
    }

    function importData(event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = (e) => {
        try {
          const data = JSON.parse(e.target.result);
          if (data.foods && Array.isArray(data.foods)) {
            foods = data.foods;
          }
          if (data.categories && Array.isArray(data.categories)) {
            categories = data.categories;
          }
          renderCategories();
          renderCategoryPills();
          renderFoodList();
          updateStats();
          saveToIndexedDB(); // Auto-save to IndexedDB
          showToast('å·²åŒ¯å…¥è³‡æ–™');
        } catch (err) {
          showToast('åŒ¯å…¥å¤±æ•—ï¼šæª”æ¡ˆæ ¼å¼éŒ¯èª¤');
        }
      };
      reader.readAsText(file);
      event.target.value = '';
    }

    function confirmClearData() {
      document.getElementById('dropdownMenu').classList.remove('show');
      showConfirmModal(
        'æ¸…é™¤æ‰€æœ‰è³‡æ–™ï¼Ÿ',
        'æ­¤æ“ä½œæœƒåˆªé™¤æ‰€æœ‰é£Ÿç‰©è³‡æ–™ï¼Œç„¡æ³•å¾©åŸã€‚å»ºè­°å…ˆåŒ¯å‡ºå‚™ä»½ã€‚',
        () => {
          foods = [];
          categories = ['é»å¿ƒ', 'å…¶ä»–'];
          currentFilter = 'å…¨éƒ¨';
          renderCategories();
          renderCategoryPills();
          renderFoodList();
          updateStats();
          saveToIndexedDB(); // Auto-save to IndexedDB
          closeConfirmModal();
          showToast('å·²æ¸…é™¤æ‰€æœ‰è³‡æ–™');
        }
      );
    }

    // ==================== AI Import Functions ====================
    let aiImportImageFile = null;
    let aiImportResults = [];

    function showAIImport() {
      document.getElementById('dropdownMenu').classList.remove('show');

      // Populate category select
      const select = document.getElementById('aiImportCategory');
      select.innerHTML = '<option value="">-- é¸æ“‡ç¾æœ‰åˆ†é¡ --</option>' +
        categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');

      // Reset form
      document.getElementById('aiNewCategory').value = '';
      document.getElementById('aiNewCategoryEmoji').value = '';
      clearAIImportPreview();
      document.getElementById('aiImportStatus').style.display = 'none';
      document.getElementById('aiImportResults').style.display = 'none';
      document.getElementById('aiAnalyzeBtn').disabled = true;
      document.getElementById('aiConfirmBtn').style.display = 'none';
      aiImportResults = [];

      document.getElementById('aiImportModal').classList.add('active');
    }

    function closeAIImportModal() {
      document.getElementById('aiImportModal').classList.remove('active');
      aiImportImageFile = null;
      aiImportResults = [];
    }

    function handleAIImportImage(event) {
      const file = event.target.files[0];
      if (!file) return;

      aiImportImageFile = file;
      const reader = new FileReader();
      reader.onload = (e) => {
        document.getElementById('aiImportPreviewImg').src = e.target.result;
        document.getElementById('aiImportPreview').style.display = 'block';
        document.getElementById('aiAnalyzeBtn').disabled = false;
      };
      reader.readAsDataURL(file);
    }

    function clearAIImportPreview() {
      document.getElementById('aiImportPreview').style.display = 'none';
      document.getElementById('aiImportPreviewImg').src = '';
      document.getElementById('aiImportImageInput').value = '';
      document.getElementById('aiAnalyzeBtn').disabled = true;
      aiImportImageFile = null;
    }

    function updateAIStatus(message, type = 'info') {
      const status = document.getElementById('aiImportStatus');
      status.style.display = 'block';
      status.style.background = type === 'error' ? 'rgba(239, 68, 68, 0.1)' :
                                 type === 'success' ? 'rgba(34, 197, 94, 0.1)' :
                                 'rgba(99, 102, 241, 0.1)';
      status.style.color = type === 'error' ? '#ef4444' :
                           type === 'success' ? '#22c55e' :
                           'var(--accent)';
      status.innerHTML = `<i class="fas fa-${type === 'error' ? 'exclamation-circle' : type === 'success' ? 'check-circle' : 'spinner fa-spin'}"></i> ${message}`;
    }

    // Register handler for AI response
    window.Poe.registerHandler('ai-import-handler', (result) => {
      const msg = result.responses[0];

      if (msg.status === 'error') {
        updateAIStatus('AIè­˜åˆ¥å¤±æ•—: ' + (msg.statusText || 'æœªçŸ¥éŒ¯èª¤'), 'error');
        document.getElementById('aiAnalyzeBtn').disabled = false;
        return;
      }

      if (msg.status === 'complete') {
        try {
          // Extract JSON from the response
          let jsonStr = msg.content;

          // Try to find JSON array in the response
          const jsonMatch = jsonStr.match(/\[[\s\S]*\]/);
          if (jsonMatch) {
            jsonStr = jsonMatch[0];
          }

          const parsedData = JSON.parse(jsonStr);

          if (Array.isArray(parsedData) && parsedData.length > 0) {
            aiImportResults = parsedData;
            displayAIResults(parsedData);
            updateAIStatus(`æˆåŠŸè­˜åˆ¥ ${parsedData.length} æ¬¾é£Ÿç‰©`, 'success');
            document.getElementById('aiConfirmBtn').style.display = 'block';
          } else {
            updateAIStatus('æœªèƒ½è­˜åˆ¥åˆ°æœ‰æ•ˆçš„ç‡Ÿé¤Šæ•¸æ“š', 'error');
          }
        } catch (e) {
          console.log('Parse error:', e, 'Content:', msg.content);
          updateAIStatus('è§£æAIå›æ‡‰æ™‚å‡ºéŒ¯ï¼Œè«‹é‡è©¦', 'error');
        }
        document.getElementById('aiAnalyzeBtn').disabled = false;
      }
    });

    function displayAIResults(data) {
      const container = document.getElementById('aiImportResultsList');
      const formatVal = (val, unit = '') => val !== null && val !== undefined ? val + unit : '-';

      container.innerHTML = data.map((item, idx) => {
        const p = item.per100g || {};
        const s = item.perServing;

        // Helper to format value with -- for null
        const fv = (val, unit = '') => val !== null && val !== undefined ? val + unit : '--';

        // Build nutrition display for per100g
        const per100gStr = `${fv(p.calories, 'kcal')} | è›‹ç™½è³ª${fv(p.protein, 'g')} | è„‚è‚ª${fv(p.fat, 'g')} | ç¢³æ°´${fv(p.carbs, 'g')} | éˆ‰${fv(p.sodium, 'mg')} | éˆ£${fv(p.calcium, 'mg')}`;

        // Build nutrition display for perServing
        let perServingStr = '';
        if (s) {
          perServingStr = `${fv(s.calories, 'kcal')} | è›‹ç™½è³ª${fv(s.protein, 'g')} | è„‚è‚ª${fv(s.fat, 'g')} | ç¢³æ°´${fv(s.carbs, 'g')} | éˆ‰${fv(s.sodium, 'mg')} | éˆ£${fv(s.calcium, 'mg')}`;
        }

        return `
        <div style="background: var(--bg-secondary); padding: 12px; border-radius: 10px; margin-bottom: 8px;">
          <div style="font-weight: 600; margin-bottom: 4px;">${item.name} ${item.nameEn ? `<span style="color: var(--text-secondary); font-weight: 400; font-size: 12px;">${item.nameEn}</span>` : ''}</div>
          <div style="font-size: 12px; color: var(--text-secondary);">
            æ¯100g: ${per100gStr}
          </div>
          ${s ? `
          <div style="font-size: 12px; color: var(--text-secondary);">
            æ¯ä»½(${s.weight || '?'}g): ${perServingStr}
          </div>
          ` : ''}
        </div>
      `}).join('');
      document.getElementById('aiImportResults').style.display = 'block';
    }

    async function analyzeWithAI() {
      if (!aiImportImageFile) {
        showToast('è«‹å…ˆé¸æ“‡åœ–ç‰‡');
        return;
      }

      document.getElementById('aiAnalyzeBtn').disabled = true;
      document.getElementById('aiConfirmBtn').style.display = 'none';
      document.getElementById('aiImportResults').style.display = 'none';
      updateAIStatus('æ­£åœ¨åˆ†æåœ–ç‰‡ï¼Œè«‹ç¨å€™...');

      const prompt = `è«‹åˆ†æé€™å¼µç‡Ÿé¤Šè¡¨æ ¼åœ–ç‰‡ï¼Œæå–æ¯ç¨®é£Ÿç‰©çš„ç‡Ÿé¤Šæ•¸æ“šã€‚

è¦æ±‚ï¼š
1. å¦‚æœåŒä¸€ç¨®é£Ÿç‰©æœ‰å¤šå€‹æ¨£æœ¬ï¼ˆä¾†è‡ªä¸åŒé¤å»³ï¼‰ï¼Œè«‹è¨ˆç®—æ‰€æœ‰æ¨£æœ¬çš„å¹³å‡å€¼
2. æå–æ‰€æœ‰å¯ç”¨çš„ç‡Ÿé¤Šæ•¸æ“šï¼š
   - é£Ÿç‰©åç¨±(name)ã€è‹±æ–‡å(nameEn)
   - æ¯100g: èƒ½é‡calories(kcal)ã€è›‹ç™½è³ªprotein(g)ã€è„‚è‚ªfat(g)ã€ç¢³æ°´åŒ–åˆç‰©carbs(g)ã€éˆ‰sodium(mg)ã€éˆ£calcium(mg)
   - æ¯ä»½: é‡é‡weight(g)ã€èƒ½é‡caloriesã€è›‹ç™½è³ªproteinã€è„‚è‚ªfatã€ç¢³æ°´åŒ–åˆç‰©carbsã€éˆ‰sodiumã€éˆ£calcium
3. åªè¼¸å‡ºJSONæ•¸çµ„ï¼Œä¸è¦å…¶ä»–æ–‡å­—èªªæ˜

è¼¸å‡ºæ ¼å¼ï¼š
[
  {
    "name": "ä¸­æ–‡å",
    "nameEn": "English Name",
    "per100g": { "calories": æ•¸å­—, "protein": æ•¸å­—, "fat": æ•¸å­—, "carbs": æ•¸å­—, "sodium": æ•¸å­—, "calcium": æ•¸å­— },
    "perServing": { "weight": æ•¸å­—, "calories": æ•¸å­—, "protein": æ•¸å­—, "fat": æ•¸å­—, "carbs": æ•¸å­—, "sodium": æ•¸å­—, "calcium": æ•¸å­— }
  }
]

é‡è¦ï¼šå¦‚æœè¡¨æ ¼ä¸­æ²’æœ‰æä¾›æŸé …ç‡Ÿé¤Šæ•¸æ“šï¼Œè©²é …è¨­ç‚ºnullã€‚å¦‚æœæ²’æœ‰æ¯ä»½æ•¸æ“šï¼ŒperServingæ•´å€‹è¨­ç‚ºnullã€‚æ•¸å€¼è«‹å››æ¨äº”å…¥åˆ°åˆç†ç²¾åº¦ã€‚`;

      try {
        await window.Poe.sendUserMessage('@Claude-Sonnet-4.5 ' + prompt, {
          attachments: [aiImportImageFile],
          handler: 'ai-import-handler',
          stream: false,
          openChat: false
        });
      } catch (err) {
        updateAIStatus('ç™¼é€è«‹æ±‚å¤±æ•—: ' + err.message, 'error');
        document.getElementById('aiAnalyzeBtn').disabled = false;
      }
    }

    function confirmAIImport() {
      if (aiImportResults.length === 0) {
        showToast('æ²’æœ‰å¯åŒ¯å…¥çš„æ•¸æ“š');
        return;
      }

      // Determine category
      let targetCategory = document.getElementById('aiImportCategory').value;
      const newCategory = document.getElementById('aiNewCategory').value.trim();
      const newEmoji = document.getElementById('aiNewCategoryEmoji').value.trim() || 'ğŸ“¦';

      if (newCategory) {
        targetCategory = newCategory;
        if (!categories.includes(newCategory)) {
          categories.splice(categories.length - 1, 0, newCategory); // Insert before 'å…¶ä»–'
          categoryEmojis[newCategory] = newEmoji;
        }
      }

      if (!targetCategory) {
        showToast('è«‹é¸æ“‡æˆ–è¼¸å…¥åˆ†é¡');
        return;
      }

      // Get max ID
      let maxId = Math.max(...foods.map(f => parseInt(f.id) || 0), 0);

      // Add foods
      let addedCount = 0;
      aiImportResults.forEach(item => {
        maxId++;
        const p = item.per100g || {};
        const s = item.perServing;

        const foodData = {
          id: maxId.toString(),
          name: item.name,
          nameEn: item.nameEn || null,
          category: targetCategory,
          per100g: {
            calories: p.calories ?? null,
            protein: p.protein ?? null,
            fat: p.fat ?? null,
            carbs: p.carbs ?? null,
            sodium: p.sodium ?? null,
            calcium: p.calcium ?? null
          },
          perServing: s ? {
            weight: s.weight ?? null,
            calories: s.calories ?? null,
            protein: s.protein ?? null,
            fat: s.fat ?? null,
            carbs: s.carbs ?? null,
            sodium: s.sodium ?? null,
            calcium: s.calcium ?? null
          } : null
        };
        foods.push(foodData);
        addedCount++;
      });

      // Save and update UI
      saveToIndexedDB();
      renderCategories();
      renderCategoryPills();
      renderFoodList();
      updateStats();

      closeAIImportModal();
      showToast(`æˆåŠŸåŒ¯å…¥ ${addedCount} æ¬¾é£Ÿç‰©åˆ°ã€Œ${targetCategory}ã€`);
    }

    // Cloud Sync Functions (legacy - kept for compatibility)
    async function loadCloudUrl() {
      if (!db) return;
      try {
        const tx = db.transaction(['settings'], 'readonly');
        const store = tx.objectStore('settings');
        const result = await new Promise((resolve, reject) => {
          const req = store.get('cloudSyncUrl');
          req.onsuccess = () => resolve(req.result);
          req.onerror = reject;
        });
        if (result && result.value) {
          cloudSyncUrl = result.value;
          document.getElementById('cloudUrl').value = cloudSyncUrl;
        }
      } catch (err) {
        console.log('Error loading cloud URL:', err);
      }
    }

    async function saveCloudUrl() {
      cloudSyncUrl = document.getElementById('cloudUrl').value.trim();

      if (!db) {
        showToast('å„²å­˜å¤±æ•—');
        return;
      }

      try {
        const tx = db.transaction(['settings'], 'readwrite');
        const store = tx.objectStore('settings');
        await new Promise((resolve, reject) => {
          const req = store.put({ key: 'cloudSyncUrl', value: cloudSyncUrl });
          req.onsuccess = resolve;
          req.onerror = reject;
        });
        showToast('å·²å„²å­˜ç¶²å€è¨­å®š');
      } catch (err) {
        showToast('å„²å­˜å¤±æ•—');
        console.error(err);
      }
    }

    function setCloudStatus(message, type) {
      const status = document.getElementById('cloudStatus');
      status.textContent = message;
      status.className = 'cloud-status';
      if (type) {
        status.classList.add(type);
      }
      status.style.display = message ? 'block' : 'none';
    }

    async function uploadToCloud() {
      const url = document.getElementById('cloudUrl').value.trim();
      if (!url) {
        setCloudStatus('è«‹å…ˆè¼¸å…¥ Google Apps Script ç¶²å€', 'error');
        return;
      }

      const uploadBtn = document.getElementById('cloudUploadBtn');
      uploadBtn.disabled = true;
      uploadBtn.classList.add('loading');
      uploadBtn.innerHTML = '<i class="fas fa-spinner"></i> ä¸Šå‚³ä¸­...';
      setCloudStatus('æ­£åœ¨ä¸Šå‚³è³‡æ–™...', '');

      try {
        const data = {
          foods: foods,
          categories: categories,
          lastUpdated: new Date().toISOString()
        };

        const response = await fetch(url, {
          method: 'POST',
          mode: 'no-cors',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });

        // Since we use no-cors, we can't read the response
        // We assume success if no error is thrown
        setCloudStatus('âœ… å·²ä¸Šå‚³åˆ°é›²ç«¯ï¼', 'success');
        showToast('å·²ä¸Šå‚³åˆ°é›²ç«¯');
      } catch (err) {
        setCloudStatus('ä¸Šå‚³å¤±æ•—ï¼š' + err.message, 'error');
        showToast('ä¸Šå‚³å¤±æ•—');
      } finally {
        uploadBtn.disabled = false;
        uploadBtn.classList.remove('loading');
        uploadBtn.innerHTML = '<i class="fas fa-cloud-upload-alt"></i> ä¸Šå‚³åˆ°é›²ç«¯';
      }
    }

    async function downloadFromCloud() {
      const url = document.getElementById('cloudUrl').value.trim();
      if (!url) {
        setCloudStatus('è«‹å…ˆè¼¸å…¥ Google Apps Script ç¶²å€', 'error');
        return;
      }

      const downloadBtn = document.getElementById('cloudDownloadBtn');
      downloadBtn.disabled = true;
      downloadBtn.classList.add('loading');
      downloadBtn.innerHTML = '<i class="fas fa-spinner"></i> ä¸‹è¼‰ä¸­...';
      setCloudStatus('æ­£åœ¨å¾é›²ç«¯ä¸‹è¼‰è³‡æ–™...', '');

      try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error('ç¶²çµ¡éŒ¯èª¤');
        }

        const data = await response.json();

        if (data.foods && Array.isArray(data.foods)) {
          foods = data.foods;
        }
        if (data.categories && Array.isArray(data.categories)) {
          categories = data.categories;
        }

        renderCategories();
        renderCategoryPills();
        renderFoodList();
        updateStats();
        saveToIndexedDB();

        const lastUpdated = data.lastUpdated ? new Date(data.lastUpdated).toLocaleString('zh-HK') : 'æœªçŸ¥';
        setCloudStatus(`âœ… å·²åŒæ­¥ï¼ä¸Šæ¬¡æ›´æ–°ï¼š${lastUpdated}`, 'success');
        showToast('å·²å¾é›²ç«¯ä¸‹è¼‰è³‡æ–™');
      } catch (err) {
        setCloudStatus('ä¸‹è¼‰å¤±æ•—ï¼š' + err.message, 'error');
        showToast('ä¸‹è¼‰å¤±æ•—');
      } finally {
        downloadBtn.disabled = false;
        downloadBtn.classList.remove('loading');
        downloadBtn.innerHTML = '<i class="fas fa-cloud-download-alt"></i> å¾é›²ç«¯ä¸‹è¼‰';
      }
    }

    // ========================================
    // Google Sheets Cloud Sync Functions
    // ========================================

    // Store the default foods data for reset functionality
    const defaultFoods = JSON.parse(JSON.stringify(foods));
    const defaultCategories = [...categories];
    const defaultCategoryEmojis = {...categoryEmojis};

    // Set sync status
    function setSheetSyncStatus(message, type) {
      const status = document.getElementById('sheetSyncStatus');
      if (!status) return;
      status.innerHTML = message;
      status.style.display = message ? 'block' : 'none';
      status.style.background = type === 'success' ? 'rgba(34, 197, 94, 0.1)' :
                                type === 'error' ? 'rgba(239, 68, 68, 0.1)' :
                                'rgba(99, 102, 241, 0.1)';
      status.style.color = type === 'success' ? '#22c55e' :
                           type === 'error' ? '#ef4444' :
                           'var(--text-secondary)';
    }

    // Load Google Sheet URL setting
    async function loadGoogleSheetUrl() {
      if (!db) return '';
      try {
        const tx = db.transaction(['settings'], 'readonly');
        const store = tx.objectStore('settings');
        const result = await new Promise((resolve, reject) => {
          const req = store.get('googleSheetUrl');
          req.onsuccess = () => resolve(req.result);
          req.onerror = reject;
        });
        return result ? result.value : '';
      } catch (err) {
        return '';
      }
    }

    // Save Google Sheet URL setting and test connection
    async function saveGoogleSheetUrl() {
      const url = document.getElementById('googleSheetUrl').value.trim();
      if (!url) {
        showToast('è«‹è¼¸å…¥ Google Sheets ç¶²å€');
        return;
      }

      setSheetSyncStatus('<i class="fas fa-spinner fa-spin"></i> æ­£åœ¨æ¸¬è©¦é€£æ¥...', '');

      try {
        // Test the URL first
        const response = await fetch(url);
        if (!response.ok) throw new Error('ç„¡æ³•é€£æ¥åˆ° Google Sheets');

        const csvText = await response.text();
        const lines = csvText.trim().split('\n');
        if (lines.length < 2) throw new Error('Google Sheet æ²’æœ‰è³‡æ–™');

        // Save to IndexedDB
        if (db) {
          const tx = db.transaction(['settings'], 'readwrite');
          const store = tx.objectStore('settings');
          await new Promise((resolve, reject) => {
            const req = store.put({ key: 'googleSheetUrl', value: url });
            req.onsuccess = resolve;
            req.onerror = reject;
          });
        }

        setSheetSyncStatus(`<i class="fas fa-check-circle"></i> é€£æ¥æˆåŠŸï¼æ‰¾åˆ° ${lines.length - 1} ç­†è³‡æ–™`, 'success');
        showToast('è¨­å®šå·²å„²å­˜ï¼Œé€£æ¥æˆåŠŸï¼');
      } catch (err) {
        setSheetSyncStatus('<i class="fas fa-exclamation-circle"></i> ' + err.message, 'error');
        showToast('é€£æ¥å¤±æ•—ï¼š' + err.message);
      }
    }

    // Load last sync time
    async function loadLastSyncTime() {
      if (!db) return null;
      try {
        const tx = db.transaction(['settings'], 'readonly');
        const store = tx.objectStore('settings');
        const result = await new Promise((resolve, reject) => {
          const req = store.get('lastSyncTime');
          req.onsuccess = () => resolve(req.result);
          req.onerror = reject;
        });
        return result ? result.value : null;
      } catch (err) {
        return null;
      }
    }

    // Save last sync time
    async function saveLastSyncTime() {
      if (!db) return;
      const now = new Date().toISOString();
      try {
        const tx = db.transaction(['settings'], 'readwrite');
        const store = tx.objectStore('settings');
        await new Promise((resolve, reject) => {
          const req = store.put({ key: 'lastSyncTime', value: now });
          req.onsuccess = resolve;
          req.onerror = reject;
        });
        updateLastSyncDisplay(now);
      } catch (err) {
        console.log('Error saving sync time:', err);
      }
    }

    // Update last sync display
    function updateLastSyncDisplay(isoTime) {
      const el = document.getElementById('lastSyncTime');
      if (el && isoTime) {
        const date = new Date(isoTime);
        el.textContent = date.toLocaleString('zh-HK');
      }
    }

    // Parse CSV to foods array
    function parseCSVToFoods(csvText) {
      const lines = csvText.trim().split('\n');
      if (lines.length < 2) return [];

      // Parse header
      const headers = parseCSVLine(lines[0]);
      const foodsData = [];

      for (let i = 1; i < lines.length; i++) {
        const values = parseCSVLine(lines[i]);
        if (values.length < 3) continue; // Skip invalid rows

        const row = {};
        headers.forEach((h, idx) => {
          row[h.trim()] = values[idx] ? values[idx].trim() : '';
        });

        // Build food object
        const food = {
          id: row['id'] || String(i),
          name: row['name'] || row['åç¨±'] || '',
          nameEn: row['nameEn'] || row['è‹±æ–‡åç¨±'] || '',
          category: row['category'] || row['åˆ†é¡'] || 'å…¶ä»–',
          per100g: {
            calories: parseFloat(row['calories_100g'] || row['å¡è·¯é‡Œ_100g']) || null,
            protein: parseFloat(row['protein_100g'] || row['è›‹ç™½è³ª_100g']) || null,
            fat: parseFloat(row['fat_100g'] || row['è„‚è‚ª_100g']) || null,
            carbs: parseFloat(row['carbs_100g'] || row['ç¢³æ°´åŒ–åˆç‰©_100g']) || null,
            sodium: parseFloat(row['sodium_100g'] || row['éˆ‰_100g']) || null,
            calcium: parseFloat(row['calcium_100g'] || row['éˆ£_100g']) || null
          }
        };

        // Add perServing if weight is specified
        const servingWeight = parseFloat(row['serving_weight'] || row['æ¯ä»½é‡é‡']);
        if (servingWeight) {
          food.perServing = {
            weight: servingWeight,
            calories: parseFloat(row['calories_serving'] || row['å¡è·¯é‡Œ_æ¯ä»½']) || null,
            protein: parseFloat(row['protein_serving'] || row['è›‹ç™½è³ª_æ¯ä»½']) || null,
            fat: parseFloat(row['fat_serving'] || row['è„‚è‚ª_æ¯ä»½']) || null,
            carbs: parseFloat(row['carbs_serving'] || row['ç¢³æ°´åŒ–åˆç‰©_æ¯ä»½']) || null,
            sodium: parseFloat(row['sodium_serving'] || row['éˆ‰_æ¯ä»½']) || null,
            calcium: parseFloat(row['calcium_serving'] || row['éˆ£_æ¯ä»½']) || null
          };
        }

        if (food.name) {
          foodsData.push(food);
        }
      }

      return foodsData;
    }

    // Parse a CSV line (handling quoted values)
    function parseCSVLine(line) {
      const result = [];
      let current = '';
      let inQuotes = false;

      for (let i = 0; i < line.length; i++) {
        const char = line[i];
        if (char === '"') {
          inQuotes = !inQuotes;
        } else if (char === ',' && !inQuotes) {
          result.push(current);
          current = '';
        } else {
          current += char;
        }
      }
      result.push(current);
      return result;
    }

    // Sync from Google Sheet
    async function syncFromGoogleSheet() {
      const btn = document.getElementById('sheetSyncBtn');
      if (btn) {
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> åŒæ­¥ä¸­...';
      }

      setSheetSyncStatus('<i class="fas fa-spinner fa-spin"></i> æ­£åœ¨å¾ Google Sheets ç²å–è³‡æ–™...', '');

      try {
        const sheetUrl = await loadGoogleSheetUrl();

        if (!sheetUrl) {
          setSheetSyncStatus('<i class="fas fa-info-circle"></i> å°šæœªè¨­å®š Google Sheets ç¶²å€', '');
          showToast('è«‹å…ˆè¨­å®š Google Sheets ç¶²å€');
          return;
        }

        const response = await fetch(sheetUrl);
        if (!response.ok) throw new Error('ç„¡æ³•é€£æ¥åˆ° Google Sheets');

        const csvText = await response.text();
        const newFoods = parseCSVToFoods(csvText);

        if (newFoods.length === 0) {
          throw new Error('æ²’æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„é£Ÿç‰©è³‡æ–™');
        }

        // Update foods
        foods = newFoods;

        // Extract categories from foods
        const newCategories = [...new Set(newFoods.map(f => f.category))];
        categories = newCategories.filter(c => c);

        renderCategories();
        renderCategoryPills();
        renderFoodList();
        updateStats();
        saveToIndexedDB();
        await saveLastSyncTime();

        setSheetSyncStatus(`<i class="fas fa-check-circle"></i> åŒæ­¥æˆåŠŸï¼å·²è¼‰å…¥ ${newFoods.length} æ¬¾é£Ÿç‰©`, 'success');
        showToast(`å·²åŒæ­¥ ${newFoods.length} æ¬¾é£Ÿç‰©`);
      } catch (err) {
        console.error('Google Sheet sync error:', err);
        setSheetSyncStatus('<i class="fas fa-exclamation-circle"></i> åŒæ­¥å¤±æ•—ï¼š' + err.message, 'error');
        showToast('åŒæ­¥å¤±æ•—');
      } finally {
        if (btn) {
          btn.disabled = false;
          btn.innerHTML = '<i class="fas fa-sync"></i> ç«‹å³åŒæ­¥æœ€æ–°è³‡æ–™';
        }
      }
    }

    // Show sheet template modal
    function showSheetTemplate() {
      const modal = document.createElement('div');
      modal.className = 'modal-overlay show';
      modal.innerHTML = `
        <div class="modal" style="max-width: 95vw; max-height: 85vh;">
          <div class="modal-header">
            <span class="modal-title">Google Sheets æ¨¡æ¿æ ¼å¼</span>
            <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body" style="overflow-x: auto;">
            <p style="margin-bottom: 12px; color: var(--text-secondary); font-size: 13px;">
              åœ¨ Google Sheets å»ºç«‹ä»¥ä¸‹æ¬„ä½ï¼ˆç¬¬ä¸€è¡Œç‚ºæ¨™é¡Œï¼‰ï¼š
            </p>
            <div style="overflow-x: auto; margin-bottom: 16px;">
              <table style="border-collapse: collapse; font-size: 11px; white-space: nowrap;">
                <tr style="background: var(--accent); color: white;">
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">id</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">name</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">nameEn</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">category</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">calories_100g</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">protein_100g</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">fat_100g</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">carbs_100g</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">sodium_100g</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">calcium_100g</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">serving_weight</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">calories_serving</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">protein_serving</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">fat_serving</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">carbs_serving</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">sodium_serving</th>
                  <th style="padding: 6px 8px; border: 1px solid var(--divider);">calcium_serving</th>
                </tr>
                <tr>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">1</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">è¦é¤ƒ</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">Shrimp dumpling</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">é»å¿ƒ</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">140</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">7.8</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">3.3</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">19</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">370</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">34</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">71</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">100</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">5.6</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">2.4</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">14</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">260</td>
                  <td style="padding: 6px 8px; border: 1px solid var(--divider);">24</td>
                </tr>
              </table>
            </div>
            <p style="margin-bottom: 12px; color: var(--text-secondary); font-size: 12px;">
              <strong>æç¤ºï¼š</strong><br>
              â€¢ ç¬¬ä¸€è¡Œå¿…é ˆæ˜¯æ¬„ä½æ¨™é¡Œ<br>
              â€¢ idã€nameã€category ç‚ºå¿…å¡«<br>
              â€¢ æ•¸å€¼æ¬„ä½ç•™ç©ºæœƒé¡¯ç¤ºç‚º "--"<br>
              â€¢ serving_weight é–‹å§‹çš„æ¬„ä½ç‚ºé¸å¡«
            </p>
            <button class="submit-btn" onclick="exportToCSV(); this.closest('.modal-overlay').remove();">
              <i class="fas fa-download"></i> åŒ¯å‡ºç›®å‰è³‡æ–™ç‚º CSVï¼ˆå¯ç›´æ¥åŒ¯å…¥ Google Sheetsï¼‰
            </button>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }

    // Export to CSV format
    function exportToCSV() {
      const headers = ['id', 'name', 'nameEn', 'category', 'calories_100g', 'protein_100g', 'fat_100g', 'carbs_100g', 'sodium_100g', 'calcium_100g', 'serving_weight', 'calories_serving', 'protein_serving', 'fat_serving', 'carbs_serving', 'sodium_serving', 'calcium_serving'];

      let csv = headers.join(',') + '\n';

      foods.forEach(food => {
        const row = [
          food.id,
          `"${(food.name || '').replace(/"/g, '""')}"`,
          `"${(food.nameEn || '').replace(/"/g, '""')}"`,
          `"${(food.category || '').replace(/"/g, '""')}"`,
          food.per100g?.calories ?? '',
          food.per100g?.protein ?? '',
          food.per100g?.fat ?? '',
          food.per100g?.carbs ?? '',
          food.per100g?.sodium ?? '',
          food.per100g?.calcium ?? '',
          food.perServing?.weight ?? '',
          food.perServing?.calories ?? '',
          food.perServing?.protein ?? '',
          food.perServing?.fat ?? '',
          food.perServing?.carbs ?? '',
          food.perServing?.sodium ?? '',
          food.perServing?.calcium ?? ''
        ];
        csv += row.join(',') + '\n';
      });

      const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8' }); // BOM for Excel
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = `nutrition-data-${new Date().toISOString().slice(0,10)}.csv`;
      a.click();

      URL.revokeObjectURL(url);
      showToast('å·²åŒ¯å‡º CSV æª”æ¡ˆ');
    }

    // Reset to default data
    function resetToDefault() {
      const modal = document.createElement('div');
      modal.className = 'modal-overlay show';
      modal.innerHTML = `
        <div class="modal" style="max-width: 320px;">
          <div class="modal-header">
            <span class="modal-title">ç¢ºèªé‡ç½®</span>
            <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <p style="margin-bottom: 16px; color: var(--text-secondary);">
              ç¢ºå®šè¦é‡ç½®ç‚ºé è¨­è³‡æ–™å—ï¼Ÿ<br>æ‚¨çš„æœ¬æ©Ÿä¿®æ”¹å°‡æœƒè¢«è¦†è“‹ã€‚
            </p>
            <div style="display: flex; gap: 8px;">
              <button class="submit-btn" style="flex: 1; background: var(--text-secondary);" onclick="this.closest('.modal-overlay').remove()">
                å–æ¶ˆ
              </button>
              <button class="submit-btn" style="flex: 1; background: #ef4444;" onclick="confirmReset(); this.closest('.modal-overlay').remove();">
                é‡ç½®
              </button>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
    }

    function confirmReset() {
      foods = JSON.parse(JSON.stringify(defaultFoods));
      categories = [...defaultCategories];
      Object.keys(categoryEmojis).forEach(k => delete categoryEmojis[k]);
      Object.assign(categoryEmojis, defaultCategoryEmojis);

      renderCategories();
      renderCategoryPills();
      renderFoodList();
      updateStats();
      saveToIndexedDB();

      showToast('å·²é‡ç½®ç‚ºé è¨­è³‡æ–™');
    }

    // Export local data as JSON
    function exportLocalData() {
      const data = {
        foods: foods,
        categories: categories,
        categoryEmojis: categoryEmojis,
        exportedAt: new Date().toISOString()
      };

      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);

      const a = document.createElement('a');
      a.href = url;
      a.download = `nutrition-data-${new Date().toISOString().slice(0,10)}.json`;
      a.click();

      URL.revokeObjectURL(url);
      showToast('å·²åŒ¯å‡º JSON è³‡æ–™');
    }

    // ========================================
    // Google Apps Script Two-Way Sync
    // ========================================

    let autoSyncEnabled = false;

    // Load Apps Script URL (with fallback to memory)
    async function loadAppsScriptUrl() {
      // First check memory storage
      if (memorySettings.appsScriptUrl) {
        return memorySettings.appsScriptUrl;
      }
      // Then try IndexedDB if available
      if (!db) {
        return '';
      }
      try {
        return await new Promise((resolve) => {
          const tx = db.transaction(['settings'], 'readonly');
          const store = tx.objectStore('settings');
          const req = store.get('appsScriptUrl');
          req.onsuccess = () => resolve(req.result ? req.result.value : '');
          req.onerror = () => resolve('');
        });
      } catch (err) {
        console.log('loadAppsScriptUrl error:', err);
        return '';
      }
    }

    // Save Apps Script URL and test
    async function saveAppsScriptUrl() {
      const url = document.getElementById('appsScriptUrl').value.trim();
      if (!url) {
        showToast('è«‹è¼¸å…¥ Google Apps Script ç¶²å€');
        return;
      }

      setSheetSyncStatus('<i class="fas fa-spinner fa-spin"></i> æ­£åœ¨æ¸¬è©¦é€£æ¥...', '');

      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('ç„¡æ³•é€£æ¥');

        const data = await response.json();
        if (!data.success) throw new Error(data.error || 'é€£æ¥å¤±æ•—');

        // Save URL to memory (always works)
        memorySettings.appsScriptUrl = url;

        // Also save to IndexedDB if available
        if (db) {
          try {
            const tx = db.transaction(['settings'], 'readwrite');
            const store = tx.objectStore('settings');
            await new Promise((resolve, reject) => {
              const req = store.put({ key: 'appsScriptUrl', value: url });
              req.onsuccess = resolve;
              req.onerror = reject;
            });
          } catch (e) {
            console.log('Could not save to IndexedDB:', e);
          }
        }

        const count = data.data?.foods?.length || 0;
        setSheetSyncStatus(`<i class="fas fa-check-circle"></i> é€£æ¥æˆåŠŸï¼é›²ç«¯æœ‰ ${count} æ¬¾é£Ÿç‰©`, 'success');
        showToast('è¨­å®šå·²å„²å­˜ï¼');
        updateSyncModeIndicator(true);
      } catch (err) {
        setSheetSyncStatus('<i class="fas fa-exclamation-circle"></i> ' + err.message, 'error');
        showToast('é€£æ¥å¤±æ•—');
      }
    }

    // Update sync mode indicator
    function updateSyncModeIndicator(connected) {
      const indicator = document.getElementById('syncModeIndicator');
      if (indicator) {
        if (connected) {
          indicator.innerHTML = '<i class="fas fa-check-circle" style="color: #22c55e;"></i><span style="color: #22c55e;">å·²é€£æ¥é›²ç«¯</span>';
        } else {
          indicator.innerHTML = '<i class="fas fa-info-circle"></i><span>å°šæœªè¨­å®šé›²ç«¯åŒæ­¥</span>';
        }
      }
    }

    // Toggle auto sync
    async function toggleAutoSync() {
      autoSyncEnabled = document.getElementById('autoSyncCheckbox').checked;
      console.log('Toggle auto sync to:', autoSyncEnabled);

      // Save to memory (always works)
      memorySettings.autoSyncEnabled = autoSyncEnabled;

      // Also try to save to IndexedDB if available
      if (db) {
        try {
          const tx = db.transaction(['settings'], 'readwrite');
          const store = tx.objectStore('settings');
          await new Promise((resolve, reject) => {
            const req = store.put({ key: 'autoSyncEnabled', value: autoSyncEnabled });
            req.onsuccess = () => {
              console.log('Auto sync setting saved to IndexedDB:', autoSyncEnabled);
              resolve();
            };
            req.onerror = () => {
              console.log('Failed to save auto sync setting');
              reject();
            };
          });
        } catch (err) {
          console.log('Could not save to IndexedDB:', err);
        }
      }
      showToast(autoSyncEnabled ? 'å·²å•Ÿç”¨è‡ªå‹•åŒæ­¥' : 'å·²åœç”¨è‡ªå‹•åŒæ­¥');

      // If just enabled, do an immediate sync to verify it works
      if (autoSyncEnabled) {
        console.log('Auto sync enabled, uploading now...');
        autoUploadIfEnabled();
      }
    }

    // Load auto sync setting
    async function loadAutoSyncSetting() {
      // Check memory first
      if (memorySettings.autoSyncEnabled !== undefined) {
        return memorySettings.autoSyncEnabled;
      }
      // Then try IndexedDB
      if (!db) return false;
      try {
        return await new Promise((resolve) => {
          const tx = db.transaction(['settings'], 'readonly');
          const store = tx.objectStore('settings');
          const req = store.get('autoSyncEnabled');
          req.onsuccess = () => resolve(req.result ? req.result.value : false);
          req.onerror = () => resolve(false);
        });
      } catch (err) {
        console.log('loadAutoSyncSetting error:', err);
        return false;
      }
    }

    // Sync TO cloud (upload)
    async function syncToCloud() {
      const url = await loadAppsScriptUrl();
      if (!url) {
        showToast('è«‹å…ˆè¨­å®š Google Apps Script ç¶²å€');
        return;
      }

      const btn = document.getElementById('cloudUploadBtn');
      if (btn) {
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ä¸Šå‚³ä¸­...';
      }

      setSheetSyncStatus('<i class="fas fa-spinner fa-spin"></i> æ­£åœ¨ä¸Šå‚³åˆ°é›²ç«¯...', '');

      try {
        const dataToSend = {
          foods: foods,
          categories: categories,
          categoryEmojis: categoryEmojis,
          lastUpdated: new Date().toISOString()
        };

        const response = await fetch(url, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dataToSend)
        });

        // no-cors means we can't read response, assume success
        await saveLastSyncTime();
        setSheetSyncStatus(`<i class="fas fa-check-circle"></i> ä¸Šå‚³æˆåŠŸï¼å…± ${foods.length} æ¬¾é£Ÿç‰©`, 'success');
        showToast('å·²ä¸Šå‚³åˆ°é›²ç«¯');
      } catch (err) {
        console.error('Upload error:', err);
        setSheetSyncStatus('<i class="fas fa-exclamation-circle"></i> ä¸Šå‚³å¤±æ•—', 'error');
        showToast('ä¸Šå‚³å¤±æ•—');
      } finally {
        if (btn) {
          btn.disabled = false;
          btn.innerHTML = '<i class="fas fa-cloud-upload-alt"></i> ä¸Šå‚³';
        }
      }
    }

    // Sync FROM cloud (download)
    async function syncFromCloud() {
      const url = await loadAppsScriptUrl();
      if (!url) {
        showToast('è«‹å…ˆè¨­å®š Google Apps Script ç¶²å€');
        return;
      }

      const btn = document.getElementById('cloudDownloadBtn');
      if (btn) {
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ä¸‹è¼‰ä¸­...';
      }

      setSheetSyncStatus('<i class="fas fa-spinner fa-spin"></i> æ­£åœ¨å¾é›²ç«¯ä¸‹è¼‰...', '');

      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error('ç„¡æ³•é€£æ¥');

        const result = await response.json();
        if (!result.success) throw new Error(result.error || 'ä¸‹è¼‰å¤±æ•—');

        const data = result.data;
        if (data.foods && Array.isArray(data.foods) && data.foods.length > 0) {
          foods = data.foods;
        }
        if (data.categories && Array.isArray(data.categories)) {
          categories = data.categories;
        }
        if (data.categoryEmojis) {
          Object.keys(categoryEmojis).forEach(k => delete categoryEmojis[k]);
          Object.assign(categoryEmojis, data.categoryEmojis);
        }

        renderCategories();
        renderCategoryPills();
        renderFoodList();
        updateStats();
        saveToIndexedDB();
        await saveLastSyncTime();

        setSheetSyncStatus(`<i class="fas fa-check-circle"></i> ä¸‹è¼‰æˆåŠŸï¼å…± ${foods.length} æ¬¾é£Ÿç‰©`, 'success');
        showToast(`å·²å¾é›²ç«¯ä¸‹è¼‰ ${foods.length} æ¬¾é£Ÿç‰©`);
      } catch (err) {
        console.error('Download error:', err);
        setSheetSyncStatus('<i class="fas fa-exclamation-circle"></i> ' + err.message, 'error');
        showToast('ä¸‹è¼‰å¤±æ•—');
      } finally {
        if (btn) {
          btn.disabled = false;
          btn.innerHTML = '<i class="fas fa-cloud-download-alt"></i> ä¸‹è¼‰';
        }
      }
    }

    // Auto upload after changes (if enabled)
    async function autoUploadIfEnabled() {
      console.log('autoUploadIfEnabled called, autoSyncEnabled:', autoSyncEnabled);
      if (!autoSyncEnabled) {
        console.log('Auto-sync is disabled, skipping upload');
        return;
      }
      const url = await loadAppsScriptUrl();
      if (!url) {
        console.log('No Apps Script URL configured');
        return;
      }

      try {
        const dataToSend = {
          foods: foods,
          categories: categories,
          categoryEmojis: categoryEmojis,
          lastUpdated: new Date().toISOString()
        };

        console.log('Auto-uploading to cloud...');
        showToast('æ­£åœ¨è‡ªå‹•åŒæ­¥...', 1000);

        await fetch(url, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(dataToSend)
        });

        console.log('Auto-synced to cloud successfully');
        showToast('å·²è‡ªå‹•åŒæ­¥åˆ°é›²ç«¯ âœ“', 1500);
      } catch (err) {
        console.log('Auto-sync failed:', err.message);
        showToast('è‡ªå‹•åŒæ­¥å¤±æ•—', 1500);
      }
    }

    // Show Apps Script setup instructions
    function showAppsScriptSetup() {
      const scriptCode = "// Google Apps Script ä»£ç¢¼ - è¤‡è£½æ­¤ä»£ç¢¼åˆ° Google Apps Script\n\nconst SCRIPT_PROP = PropertiesService.getScriptProperties();\n\nfunction doGet(e) {\n  try {\n    const data = SCRIPT_PROP.getProperty('nutritionData');\n    return ContentService\n      .createTextOutput(JSON.stringify({\n        success: true,\n        data: data ? JSON.parse(data) : { foods: [], categories: [], categoryEmojis: {} }\n      }))\n      .setMimeType(ContentService.MimeType.JSON);\n  } catch (err) {\n    return ContentService\n      .createTextOutput(JSON.stringify({ success: false, error: err.message }))\n      .setMimeType(ContentService.MimeType.JSON);\n  }\n}\n\nfunction doPost(e) {\n  try {\n    const data = JSON.parse(e.postData.contents);\n    SCRIPT_PROP.setProperty('nutritionData', JSON.stringify(data));\n    return ContentService\n      .createTextOutput(JSON.stringify({ success: true }))\n      .setMimeType(ContentService.MimeType.JSON);\n  } catch (err) {\n    return ContentService\n      .createTextOutput(JSON.stringify({ success: false, error: err.message }))\n      .setMimeType(ContentService.MimeType.JSON);\n  }\n}";

      const modal = document.createElement('div');
      modal.className = 'modal-overlay show';
      modal.innerHTML = `
        <div class="modal" style="max-width: 95vw; max-height: 90vh;">
          <div class="modal-header">
            <span class="modal-title">Google Apps Script è¨­å®šæ•™å­¸</span>
            <button class="modal-close" onclick="this.closest('.modal-overlay').remove()">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body" style="overflow-y: auto; max-height: 70vh;">
            <div style="margin-bottom: 16px;">
              <strong>æ­¥é©Ÿ 1ï¼šå»ºç«‹ Apps Script</strong>
              <ol style="margin: 8px 0; padding-left: 20px; font-size: 13px; color: var(--text-secondary);">
                <li>å‰å¾€ <a href="https://script.google.com" target="_blank" style="color: var(--accent);">script.google.com</a></li>
                <li>é»æ“Šã€Œæ–°å°ˆæ¡ˆã€</li>
                <li>åˆªé™¤é è¨­ä»£ç¢¼ï¼Œè²¼ä¸Šä¸‹æ–¹ä»£ç¢¼</li>
              </ol>
            </div>

            <div style="margin-bottom: 16px;">
              <strong>æ­¥é©Ÿ 2ï¼šè¤‡è£½æ­¤ä»£ç¢¼</strong>
              <pre id="scriptCodePre" style="background: var(--bg-primary); padding: 12px; border-radius: 8px; font-size: 11px; overflow-x: auto; white-space: pre-wrap; margin-top: 8px;"></pre>
              <button class="submit-btn" style="margin-top: 8px;" onclick="copyScriptCode()">
                <i class="fas fa-copy"></i> è¤‡è£½ä»£ç¢¼
              </button>
            </div>

            <div style="margin-bottom: 16px;">
              <strong>æ­¥é©Ÿ 3ï¼šéƒ¨ç½²ç‚ºç¶²é æ‡‰ç”¨ç¨‹å¼</strong>
              <ol style="margin: 8px 0; padding-left: 20px; font-size: 13px; color: var(--text-secondary);">
                <li>é»æ“Šå³ä¸Šè§’ã€Œéƒ¨ç½²ã€â†’ã€Œæ–°å¢éƒ¨ç½²ã€</li>
                <li>é¡å‹é¸æ“‡ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€</li>
                <li>åŸ·è¡Œèº«åˆ†ï¼šã€Œæˆ‘ã€</li>
                <li>èª°å¯ä»¥å­˜å–ï¼šã€Œæ‰€æœ‰äººã€</li>
                <li>é»æ“Šã€Œéƒ¨ç½²ã€</li>
                <li>è¤‡è£½ç”¢ç”Ÿçš„ç¶²å€</li>
              </ol>
            </div>

            <div>
              <strong>æ­¥é©Ÿ 4ï¼šè²¼ä¸Šç¶²å€</strong>
              <p style="font-size: 13px; color: var(--text-secondary); margin-top: 4px;">
                å°‡è¤‡è£½çš„ç¶²å€è²¼åˆ°ã€ŒGoogle Apps Script ç¶²å€ã€æ¬„ä½ï¼Œé»æ“Šã€Œå„²å­˜ä¸¦æ¸¬è©¦é€£æ¥ã€
              </p>
            </div>
          </div>
        </div>
      `;
      document.body.appendChild(modal);
      document.getElementById('scriptCodePre').textContent = scriptCode;
      window.currentScriptCode = scriptCode;
    }

    function copyScriptCode() {
      if (window.currentScriptCode) {
        navigator.clipboard.writeText(window.currentScriptCode);
        showToast('å·²è¤‡è£½ä»£ç¢¼');
      }
    }

    // Show cloud settings
    async function showCloudSettings() {
      document.getElementById('dropdownMenu').classList.remove('show');
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('cloudPage').classList.add('active');
      document.getElementById('fab').style.display = 'none';

      // Clear any previous error
      setSheetSyncStatus('', '');

      // Load settings sequentially to avoid DB conflicts
      try {
        const url = await loadAppsScriptUrl();
        const input = document.getElementById('appsScriptUrl');
        if (input) input.value = url || '';
        updateSyncModeIndicator(!!url);

        const time = await loadLastSyncTime();
        updateLastSyncDisplay(time);

        const enabled = await loadAutoSyncSetting();
        autoSyncEnabled = enabled;
        const checkbox = document.getElementById('autoSyncCheckbox');
        if (checkbox) checkbox.checked = enabled;
      } catch (err) {
        console.log('Error loading cloud settings:', err);
      }
    }

    // Auto sync on page load
    async function autoSyncOnLoad() {
      const url = await loadAppsScriptUrl();
      if (url) {
        try {
          const response = await fetch(url);
          if (response.ok) {
            const result = await response.json();
            if (result.success && result.data?.foods?.length > 0) {
              foods = result.data.foods;
              if (result.data.categories) categories = result.data.categories;
              if (result.data.categoryEmojis) {
                Object.keys(categoryEmojis).forEach(k => delete categoryEmojis[k]);
                Object.assign(categoryEmojis, result.data.categoryEmojis);
              }

              renderCategories();
              renderCategoryPills();
              renderFoodList();
              updateStats();
              saveToIndexedDB();
              await saveLastSyncTime();

              console.log('Auto-synced from cloud:', foods.length, 'items');
            }
          }
        } catch (err) {
          console.log('Auto-sync skipped:', err.message);
        }
      }

      // Load auto sync setting
      autoSyncEnabled = await loadAutoSyncSetting();
    }

    // Override initDB to add auto-sync
    const originalInitDB = initDB;
    initDB = async function() {
      await originalInitDB();
      setTimeout(autoSyncOnLoad, 1000);
    };

    // Hook into save functions to auto-upload
    const originalSaveToIndexedDB = saveToIndexedDB;
    saveToIndexedDB = async function() {
      await originalSaveToIndexedDB();
      // Auto upload if enabled (with debounce)
      clearTimeout(window.autoUploadTimeout);
      window.autoUploadTimeout = setTimeout(autoUploadIfEnabled, 2000);
    };
  </script>
</body>
</html>
